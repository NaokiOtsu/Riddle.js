/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(h,i,e){function c(a,b){if(typeof a==="string")return j(a,b,"querySelectorAll");else if(a instanceof HTMLElement)return m(k(a));else if(typeof a==="function")u?a(c):h.addEventListener("DOMContentLoaded",function(){a(c)},false)}function j(a,b,d){if(typeof b==="undefined"||b instanceof HTMLElement)return m(k((b||h)[d](a)));else if(b.__proto__===c.fn){var f=[];b.map(function(g){return k(g[d](a))}).forEach(function(g){g.forEach(function(o){f.push(o)})});return m(f)}}function k(a){if(a===null)return[];
else if(a instanceof HTMLElement)return[a];else if(typeof a.length==="number"&&typeof a.item==="function")return i.call(a)}function m(a){a.__proto__=c.fn;return a}function l(a,b){var d,f=b||"last";if(a.__proto__===c.fn){d=a.map(function(g){return g.outerHTML}).join("");this.forEach(function(g){l[f](g,d)})}else if(a instanceof HTMLElement){d=a.outerHTML;this.forEach(function(g){l[f](g,d)})}else typeof a==="string"&&this.forEach(function(g){l[f](g,a)});return this}function n(a,b){return a.filter(function(d){return d.event===
b})}function s(a){var b=[],d;for(d in a)b.push(e(d)+"="+e(a[d]));return"?"+b.join("&")}var p={},v=1,u=false;c.fn={detect:function(a){return this.filter(a)[0]},invoke:function(){var a=i.call(arguments),b=a.shift();return this.map(function(d){return d[b].apply(d,a)})},pluck:function(a){return this.map(function(b){return b[a]})},each:function(a){return this.forEach(function(b){a(m(k(b)))})},html:function(a){var b;if(typeof a==="undefined")return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(d){return d});
else if(typeof a==="string")this.forEach(function(d){d.innerHTML=a});else if(a instanceof HTMLElement)this.forEach(function(d){d.innerHTML=a.outerHTML});else if(a.__proto__===c.fn){b=a.map(function(d){return d.outerHTML}).join("");this.forEach(function(d){d.innerHTML=b})}return this},add:l,remove:function(){this.forEach(function(a){a.parentNode.removeChild(a)});return this},attr:function(a,b){if(typeof a==="string")if(typeof b==="undefined")return this.length===1?this[0].getAttribute(a):this.invoke("getAttribute",
a);else b===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(b));else typeof a==="object"&&this.forEach(function(d){for(var f in a)a[f]===null?d.removeAttribute(f):d.setAttribute(f,String(a[f]))});return this},css:function(a,b){if(typeof a==="string")if(typeof b==="undefined")return this.length===1?getComputedStyle(this[0],"").getPropertyValue(a):this.map(function(d){return getComputedStyle(d,"").getPropertyValue(a)});else b===null?this.forEach(function(d){d.style.removeProperty(a)}):
this.forEach(function(d){d.style.setProperty(a,b,"")});else typeof a==="object"&&this.forEach(function(d){for(var f in a)a[f]===null?d.style.removeProperty(f):d.style.setProperty(f,a[f],"")});return this},addClass:function(a){this.forEach(function(b){b.className===""?b.className=a:b.className+=" "+a});return this},removeClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(d){var f=d.className.replace(b,"");d.className=f.replace(/\s+$/,"")});return this},hasClass:function(a){var b=
RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(b):this.map(function(d){return!!d.className.match(b)})},bind:function(a,b,d){this.forEach(function(f){var g=f.nid||(f.nid=v++);g=p[g]||(p[g]=[]);g.push({event:a,callback:b,index:g.length});f.addEventListener(a,b,d||false)});return this},unbind:function(a){this.forEach(function(b){var d=b.nid||(b.nid=v++),f=a?n(p[d],a):p[d];f&&f.forEach(function(g){delete f[g.index];b.removeEventListener(g.event,g.callback,false)})});
return this}};h.addEventListener("DOMContentLoaded",function(){u=true},false);["click","submit","focus","blur","scroll","select","change"].forEach(function(a){c.fn[a]=function(b,d){this.bind(a,b,d)}});c.fn.__proto__=Array.prototype;l.prev=function(a,b){a.insertAdjacentHTML("beforeBegin",b)};l.first=function(a,b){a.insertAdjacentHTML("afterBegin",b)};l.last=function(a,b){a.insertAdjacentHTML("beforeEnd",b)};l.next=function(a,b){a.insertAdjacentHTML("afterEnd",b)};c.id=function(a,b){return j(a,b,"getElementById")};
c.cls=function(a,b){return j(a,b,"getElementsByClassName")};c.tag=function(a,b){return j(a,b,"getElementsByTagName")};c.ajax=function(a,b,d,f){var g=new XMLHttpRequest;f=f||{};d=d||function(){};var o=f.header||{},w=f.ctype||(f.method==="POST"?"application/x-www-form-urlencoded":""),q=f.data||"",t;g.onreadystatechange=function(){if(g.readyState===4)g.status>=200&&g.status<300?b(g.responseText,g):d(g)};if(typeof q==="object")q=s(q);g.open(f.method||"GET",a,true);w&&g.setRequestHeader("Content-Type",
w);g.setRequestHeader("X-Requested-With","XMLHttpRequest");for(t in o)g.setRequestHeader(t,o[t]);g.send(q)};c.version="0.2.5";window.r=c})(document,Array.prototype.slice,encodeURIComponent);(function(){function h(i,e){var c,j=0;for(c in i){e[c]=i[c];j++}return j}r.fn.animate=function(i,e){var c,j=0,k={"-webkit-transition":(e.duration||0.5)+"s "+(e.easing||"ease-in-out")};if(i instanceof Array){k["-webkit-transform"]=i.join(" ");c=1}else if(typeof i==="object")c=h(i,k);if(typeof e.callback==="function"){var m=this;this.bind("webkitTransitionEnd",function(l){++j;if(c===j){e.callback(l);m.unbind("webkitTransitionEnd")}})}this.css(k)}})();(function(h,i,e){function c(m,l){var n=l;if(typeof m!=="function")throw Error("First parameter should be function");if(typeof l==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(s){n=m(n,s)});return n}function j(){return this.replace(/(^\s+)|(\s+$)/g,"")}function k(m){return eval("("+m+")")}if(typeof i.reduce!=="function")i.reduce=c;if(typeof e.trim!=="function")e.trim=j;if(typeof h.JSON!=="object"){h.JSON={};h.JSON.parse=k}})(window,Array.prototype,String.prototype);(function(h,i,e){h.r.load=function(c,j){var k=0,m=c.length;c.forEach(function(l){var n=i.createElement("script");n.src=l;n.onload=function(){n.removeAttribute("onload");++k===m&&j()};e.appendChild(n)})}})(window,document,document.getElementsByTagName("head")[0]);(function(){function h(e){this.storage=e}function i(e){return i.sname||(i.sname=new h(window[e+"Storage"]))}h.prototype.set=function(e,c){if(typeof e==="number"||typeof e==="string")this.storage.setItem(e,JSON.stringify(c));else if(typeof c==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};h.prototype.get=function(e){return typeof this.storage[e]==="undefined"?null:JSON.parse(this.storage.getItem(e))};
h.prototype.clear=function(){this.storage.clear()};h.prototype.size=function(){return this.storage.length};h.prototype.keys=function(){var e=[],c;for(c in this.storage)e.push(c);return e};h.prototype.values=function(){var e=[],c;for(c in this.storage)e.push(this.get(c));return e};r.storage=i})();r(function(){function h(c,j){var k=document.createEvent("Event");k.initEvent(j,true,true);c.dispatchEvent(k)}var i=document.body,e={x1:0,x2:0,y1:0,y2:0,target:null};r(i).bind("touchstart",function(c){e.x1=c.touches[0].clientX;e.y1=c.touches[0].clientY;console.dir(e);e.target="tagName"in c.touches[0].target?c.touches[0].target:c.touches[0].target.parentNode});r(i).bind("touchmove",function(c){e.x2=c.touches[0].clientX;e.y2=c.touches[0].clientY;console.dir(e)});r(i).bind("touchend",function(){var c=
e.x1-e.x2,j=e.y1-e.y2;console.dir(e);console.log("dx = "+c);console.log("dy = "+j);if(Math.abs(j)>30)j>=0?h(e.target,"swipeup"):h(e.target,"swipedown");else if(c>j&&Math.abs(c)>30)c>=0?h(e.target,"swipeleft"):h(e.target,"swiperight");else h(e.target,"tap");e={x1:0,x2:0,y1:0,y2:0,target:null}});["tap","swipeleft","swiperight","swipeup","swipedown"].forEach(function(c){r.fn[c]=function(j,k){this.bind(c,j,k)}})});
