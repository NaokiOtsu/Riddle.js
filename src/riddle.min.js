/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(i,l,m){function d(a,b){if(typeof a==="string")return j(a,b,"querySelectorAll");else if(a instanceof Array)return g(a);else if(typeof a.addEventListener==="function")return g(h(a));else typeof a==="function"&&(n?a(d):i.addEventListener("DOMContentLoaded",function(){a(d)},!1))}function j(a,b,f){var c=[];if(b===void 0||b instanceof HTMLElement)return g(h((b||i)[f](a)));else if(d.isR(b))return b.map(function(b){return h(b[f](a))}).forEach(function(a){a.forEach(function(a){c.push(a)})}),g(c)}
function h(a){if(a===null||a===void 0)return[];else if(a instanceof HTMLElement)return[a];else if(typeof a.length==="number"&&typeof a.item==="function")return l.call(a)}function g(a){a.__proto__=d.fn;return a}var k={},o=1,n=!1;i.addEventListener("DOMContentLoaded",function(){n=!0},!1);d.fn={detect:function(a){return this.filter(a)[0]},invoke:function(){var a=l.call(arguments),b=a.shift();return this.map(function(f){return f[b].apply(f,a)})},pluck:function(a){return this.map(function(b){return b[a]})},
each:function(a){return this.forEach(function(b){a(g(h(b)))})},html:function(a){var b;if(a===void 0)return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(a){return a});else typeof a==="string"||typeof a==="number"?this.forEach(function(b){b.innerHTML=a}):a instanceof HTMLElement?this.forEach(function(b){b.innerHTML=a.outerHTML}):d.isR(a)&&(b=a.map(function(a){return a.outerHTML}).join(""),this.forEach(function(a){a.innerHTML=b}));return this},remove:function(){this.forEach(function(a){a.parentNode instanceof
HTMLElement&&a.parentNode.removeChild(a)});return this},add:function(a){var b;typeof a==="string"?this.forEach(function(b){b.insertAdjacentHTML("beforeEnd",a)}):a instanceof HTMLElement?this.forEach(function(b){b.appendChild(a)}):d.isR(a)&&(b=i.createDocumentFragment(),a.forEach(function(a){b.appendChild(a)}),this.forEach(function(a){a.appendChild(b)}));return this},attr:function(a,b){if(typeof a==="string")if(b===void 0)return this.length===1?this[0].getAttribute(a):this.invoke("getAttribute",a);
else b===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(b));else typeof a==="object"&&this.forEach(function(b){for(var c in a)a[c]===null?b.removeAttribute(c):b.setAttribute(c,String(a[c]))});return this},css:function(a,b){if(typeof a==="string")if(b===void 0)return this.length===1?getComputedStyle(this[0],null).getPropertyValue(a):this.map(function(b){return getComputedStyle(b,null).getPropertyValue(a)});else b===null?this.forEach(function(b){b.style.removeProperty(a)}):
this.forEach(function(f){f.style.setProperty(a,b,null)});else typeof a==="object"&&this.forEach(function(b){var c=";",e;for(e in a)a[e]===null?b.style.removeProperty(e):c+=e+":"+a[e]+";";b.style.cssText+=c});return this},addClass:function(a){this.forEach(function(b){b.className===""?b.className=a:b.className+=" "+a});return this},removeClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(a){var c=a.className.replace(b,"");a.className=c.replace(/\s+$/,"")});return this},
hasClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(b):this.map(function(a){return!!a.className.match(b)})},toggleClass:function(a,b){b===void 0?this.hasClass(a)?this.removeClass(a):this.addClass(a):this.hasClass(a)?(this.removeClass(a),this.addClass(b)):(this.removeClass(b),this.addClass(a))},bind:function(a,b,f){this.forEach(function(c){var e=c.__nid||(c.__nid=o++),e=k[e]||(k[e]=[]);e.push({event:a,callback:b,index:e.length});c.addEventListener(a,
b,f||!1)});return this},unbind:function(a){function b(a,b){return a.filter(function(a){return a.event===b})}this.forEach(function(f){var c=f.__nid||(f.__nid=o++),e=a?b(k[c],a):k[c];e&&e.forEach(function(a){delete e[a.index];f.removeEventListener(a.event,a.callback,!1)})});return this},delegate:function(a,b,f){this.bind(b,function(b){var e=d(a,this).detect(function(a){a=a.compareDocumentPosition(b.target);return a===0||a&Node.DOCUMENT_POSITION_CONTAINED_BY});e&&f.call(e,b)})}};d.fn.__proto__=[];d.ajax=
function(a,b,f,c){function e(a){var b=[],c;for(c in a)b.push(m(c)+"="+m(a[c]));return b.join("&")}var d=new XMLHttpRequest,c=c||{},b=b||function(){},f=f||function(){},g=c.method||"GET",i=c.header||{},j=c.ctype||(g==="POST"?"application/x-www-form-urlencoded":""),c=c.data||"",h;d.onreadystatechange=function(){d.readyState===4&&(d.status>=200&&d.status<300?b(d.responseText,d):f(d))};typeof c==="object"&&(c=e(c));d.open(g,a,!0);j&&d.setRequestHeader("Content-Type",j);d.setRequestHeader("X-Requested-With",
"XMLHttpRequest");for(h in i)d.setRequestHeader(h,i[h]);d.send(c)};d.id=function(a,b){return j(a,b,"getElementById")};d.cls=function(a,b){return j(a,b,"getElementsByClassName")};d.tag=function(a,b){return j(a,b,"getElementsByTagName")};d.isR=function(a){return a.__proto__===d.fn};d.version="0.3.0";window.r=d})(document,Array.prototype.slice,encodeURIComponent);
