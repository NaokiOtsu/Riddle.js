/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(i,o,p){function g(a,b){if(typeof a==="string")return j(a,b,"querySelectorAll");else if(a instanceof Array)return h(a);else if(typeof a.addEventListener==="function")return h(k(a));else if(typeof a==="function")q?a(g):i.addEventListener("DOMContentLoaded",function(){a(g)},false)}function j(a,b,c){var d=[];if(b===void 0||b instanceof HTMLElement)return h(k((b||i)[c](a)));else if(g.isR(b)){b.map(function(e){return k(e[c](a))}).forEach(function(e){e.forEach(function(f){d.push(f)})});return h(d)}}
function k(a){if(a===null||a===void 0)return[];else if(a instanceof HTMLElement)return[a];else if(typeof a.length==="number"&&typeof a.item==="function")return o.call(a)}function h(a){a.__proto__=g.fn;return a}var l={},r=1,q=false;i.addEventListener("DOMContentLoaded",function(){q=true},false);g.fn={detect:function(a){return this.filter(a)[0]},invoke:function(){var a=o.call(arguments),b=a.shift();return this.map(function(c){return c[b].apply(c,a)})},pluck:function(a){return this.map(function(b){return b[a]})},
each:function(a){return this.forEach(function(b){a(h(k(b)))})},html:function(a){var b;if(a===void 0)return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(c){return c});else if(typeof a==="string"||typeof a==="number")this.forEach(function(c){c.innerHTML=a});else if(a instanceof HTMLElement)this.forEach(function(c){c.innerHTML=a.outerHTML});else if(g.isR(a)){b=a.map(function(c){return c.outerHTML}).join("");this.forEach(function(c){c.innerHTML=b})}return this},remove:function(){this.forEach(function(a){a.parentNode instanceof
HTMLElement&&a.parentNode.removeChild(a)});return this},add:function(a){var b;if(typeof a==="string")this.forEach(function(c){c.insertAdjacentHTML("beforeEnd",a)});else if(a instanceof HTMLElement)this.forEach(function(c){c.appendChild(a)});else if(g.isR(a)){b=i.createDocumentFragment();a.forEach(function(c){b.appendChild(c)});this.forEach(function(c){c.appendChild(b)})}return this},attr:function(a,b){if(typeof a==="string")if(b===void 0)return this.length===1?this[0].getAttribute(a):this.invoke("getAttribute",
a);else b===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(b));else typeof a==="object"&&this.forEach(function(c){for(var d in a)a[d]===null?c.removeAttribute(d):c.setAttribute(d,String(a[d]))});return this},css:function(a,b){if(typeof a==="string")if(b===void 0)return this.length===1?getComputedStyle(this[0],null).getPropertyValue(a):this.map(function(c){return getComputedStyle(c,null).getPropertyValue(a)});else b===null?this.forEach(function(c){c.style.removeProperty(a)}):
this.forEach(function(c){c.style.setProperty(a,b,null)});else typeof a==="object"&&this.forEach(function(c){var d=";",e;for(e in a)if(a[e]===null)c.style.removeProperty(e);else d+=e+":"+a[e]+";";c.style.cssText+=d});return this},addClass:function(a){this.forEach(function(b){b.className===""?b.className=a:b.className+=" "+a});return this},removeClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(c){var d=c.className.replace(b,"");c.className=d.replace(/\s+$/,"")});
return this},hasClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(b):this.map(function(c){return!!c.className.match(b)})},toggleClass:function(a,b){if(b===void 0)this.hasClass(a)?this.removeClass(a):this.addClass(a);else if(this.hasClass(a)){this.removeClass(a);this.addClass(b)}else{this.removeClass(b);this.addClass(a)}},bind:function(a,b,c){this.forEach(function(d){var e=d.__nid||(d.__nid=r++);e=l[e]||(l[e]=[]);e.push({event:a,callback:b,index:e.length,
useCapture:c||false});d.addEventListener(a,b,c||false)});return this},unbind:function(a){function b(c,d){return c.filter(function(e){return e.event===d})}this.forEach(function(c){var d=c.__nid||(c.__nid=r++),e=a?b(l[d],a):l[d];e&&e.forEach(function(f){delete e[f.index];c.removeEventListener(f.event,f.callback,f.useCapture)})});return this},delegate:function(a,b,c){this.bind(b,function(d){var e=g(a,this).detect(function(f){f=f.compareDocumentPosition(d.target);return f===0||f&Node.DOCUMENT_POSITION_CONTAINED_BY});
e&&c.call(e,d)})}};g.fn.__proto__=[];g.ajax=function(a,b,c,d){function e(s){var t=[],m;for(m in s)t.push(p(m)+"="+p(s[m]));return t.join("&")}var f=new XMLHttpRequest;d=d||{};b=b||function(){};c=c||function(){};var u=d.method||"GET",v=d.header||{},w=d.ctype||(u==="POST"?"application/x-www-form-urlencoded":"");d=d.data||"";var n;f.onreadystatechange=function(){if(f.readyState===4)f.status>=200&&f.status<300?b(f.responseText,f):c(f)};if(typeof d==="object")d=e(d);f.open(u,a,true);w&&f.setRequestHeader("Content-Type",
w);f.setRequestHeader("X-Requested-With","XMLHttpRequest");for(n in v)f.setRequestHeader(n,v[n]);f.send(d)};g.id=function(a,b){return j(a,b,"getElementById")};g.cls=function(a,b){return j(a,b,"getElementsByClassName")};g.tag=function(a,b){return j(a,b,"getElementsByTagName")};g.isR=function(a){return a.__proto__===g.fn};g.version="0.3.0";window.r=g})(document,Array.prototype.slice,encodeURIComponent);
