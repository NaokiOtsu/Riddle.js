/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(f,e,c,d,k,g){function b(a,m){if(typeof a==="string")return h(d.call((m||e).querySelectorAll(a)));else if(typeof a==="object"&&a!==null&&typeof a.addEventListener==="function")return h([a]);else if(c(a))return h(a);else if(typeof a==="function")b.domReady?a(b):e.addEventListener("DOMContentLoaded",function(){a(b)},!1),b.init=a}function h(a){a.__proto__=b.fn;return a}b.listeners={};b.__nid=1;b.domReady=!1;e.addEventListener("DOMContentLoaded",function(){b.domReady=!0},!1);b.fn={detect:function(a){return this.filter(a)[0]},
invoke:function(){var a=d.call(arguments),b=a.shift();return this.map(function(c){return c[b].apply(c,a)})},pluck:function(a){return this.map(function(b){return b[a]})},each:function(a){return this.forEach(function(b){a(h([b]))})},html:function(a){return a===g?this[0].innerHTML:(typeof a==="string"||typeof a==="number"?this.forEach(function(b){b.innerHTML=a}):a instanceof HTMLElement?this.forEach(function(b){b.innerHTML=a.outerHTML}):b.isR(a)&&this.forEach(function(b){b.innerHTML=a[0].outerHTML}),
this)},remove:function(){this.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)});return this},add:function(a){var c;typeof a==="string"||typeof a==="number"?this.forEach(function(b){b.insertAdjacentHTML("beforeEnd",a)}):a instanceof HTMLElement?this.forEach(function(b){b.appendChild(a)}):b.isR(a)&&(c=e.createDocumentFragment(),a.forEach(function(a){c.appendChild(a)}),this.forEach(function(a){a.appendChild(c)}));return this},attr:function(a,b){if(typeof a==="string")if(b===g)return this[0].getAttribute(a);
else b===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(b));else typeof a==="object"&&this.forEach(function(b){for(var c in a)a[c]===null?b.removeAttribute(c):b.setAttribute(c,String(a[c]))});return this},css:function(a,b){if(typeof a==="string")if(b===g)return getComputedStyle(this[0],null).getPropertyValue(a);else b===null?this.forEach(function(b){b.style.removeProperty(a)}):this.forEach(function(c){c.style.setProperty(a,b,null)});else typeof a==="object"&&this.forEach(function(b){var c=
";",j;for(j in a)a[j]===null?b.style.removeProperty(j):c+=j+":"+a[j]+";";b.style.cssText+=c});return this},addClass:function(a){this.forEach(function(c){var d;if(!b(c).hasClass(a))d=c.className.split(" "),d.push(a),c.className=d.join(" ")});return this},removeClass:function(a){this.forEach(function(b){var c=b.className.split(" ");b.className=c.filter(function(b){return b!==a}).join(" ")});return this},hasClass:function(a){return!!this[0].className.match(RegExp("(?:^|\\b)"+a+"(?:\\b|$)"))},toggleClass:function(a){this.hasClass(a)?
this.removeClass(a):this.addClass(a)},bind:function(a,c,d){var e=a.split(" ");this.forEach(function(a){var i=b.nodeId(a),l=b.listeners[i]||(b.listeners[i]=[]);e.forEach(function(b){l.push({event:b,callback:c,index:l.length,useCapture:d||!1});a.addEventListener(b,c,d||!1)})});return this},unbind:function(a){function c(a,b){return a.filter(function(a){return a.event===b})}this.forEach(function(d){var e=b.nodeId(d),j=a?c(b.listeners[e]||[],a):b.listeners[e];j&&j.forEach(function(a){delete j[a.index];
d.removeEventListener(a.event,a.callback,a.useCapture)})});return this},trigger:function(a){var b=e.createEvent("Event");b.initEvent(a,!0,!0);this.forEach(function(a){a.dispatchEvent(b)});return this}};b.fn.__proto__=[];b.ajax=function(a,b,c,d){function j(a){var b=[],c;for(c in a)b.push(k(c)+"="+k(a[c]));return b.join("&")}var i=new XMLHttpRequest,d=d||{},b=b||function(){},c=c||function(){},l=d.method||"GET",e=d.header||{},g=d.ctype||(l==="POST"?"application/x-www-form-urlencoded":""),d=d.data||"",
f;i.onreadystatechange=function(){i.readyState===4&&(i.status>=200&&i.status<300?b(i.responseText,i):c(i))};typeof d==="object"&&(d=j(d));i.open(l,a,!0);g&&i.setRequestHeader("Content-Type",g);i.setRequestHeader("X-Requested-With","XMLHttpRequest");for(f in e)i.setRequestHeader(f,e[f]);i.send(d);return i};b.id=function(a,b){var c=(b||e).getElementById(a);return c?h([c]):h([])};b.cls=function(a,b){return h((b||e).getElementsByClassName(a))};b.tag=function(a,b){return h((b||e).getElementsByTagName(a))};
b.nodeId=function(a){return a.__nid||(a.__nid=b.__nid++)};b.isR=function(a){return a.__proto__===b.fn};b.version="0.4.0";f.r=b})(this,document,Array.isArray,Array.prototype.slice,encodeURIComponent);(function(f,e,c){f.r.load=function(d,f){var g=0,b=d.length;d.forEach(function(d){var a=e.createElement("script");a.src=d;a.onload=function(){a.removeAttribute("onload");++g===b&&f()};c.appendChild(a)})}})(window,document,document.getElementsByTagName("head")[0]);(function(){function f(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function e(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function c(a){a=String(a).match(/(\d+(?:\.\d+)?)(m?)(s?)/);
return a[2]===""&&a[3]==="s"?Number(a[1])*1E3:a[2]==="m"&&a[3]==="s"?Number(a[1]):300}function d(a,b,c){var d=c||{},e=d.duration||n,d=d.easing||o,g,f=0,h={};b instanceof Array?(h["-webkit-transform"]=b.join(" "),g=1):typeof b==="object"&&(g=k(b,h));typeof c.callback==="function"&&a.waitTransitionEnd(e,function(){++f;g===f&&c.callback()});h["-webkit-transition"]=e+" "+d;h["-webkit-backface-visibility"]="hidden";h["-webkit-perspective"]="1000";a.css(h)}function k(a,b){var c,d=0;for(c in a)b[c]=a[c],
d++;return d}function g(a,b){return"scale("+a+","+b+")"}function b(b,c){if(typeof b==="number"&&typeof c==="number")return a+b+"px,"+c+"px"+m;else if(typeof b==="string"&&typeof c==="string")return a+b+","+c+m}var h="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,a="translate"+(h?"3d(":"("),m=h?",0)":")",n="0.3s",o="ease-in-out";r.fn.animate=function(a,b){var c=0,e=this.length,g=b||{},f=g.callback||function(){};g.callback=function(){++c;c===e&&f()};this.each(function(b){d(b,a,g)})};r.fn.scale=
function(a,b,c){this.animate([g(a,b)],c)};r.fn.scaleR=function(a,b,c){var d=e(this);this.animate([g(d.x*a,d.y*b)],c)};r.fn.scaleX=function(a,b){var c=e(this);this.animate([g(a,c.y)],b)};r.fn.scaleRX=function(a,b){var c=e(this);this.animate([g(c.x*a,c.y)],b)};r.fn.scaleY=function(a,b){var c=e(this);this.animate([g(c.x,yScale)],b)};r.fn.scaleRY=function(a,b){var c=e(this);this.animate([g(c.x,c.y*a)],b)};r.fn.move=function(a,c,d){this.animate([b(a,c)],d)};r.fn.moveR=function(a,c,d){var e=f(this);this.animate([b(e.x+
a,e.y+c)],d)};r.fn.moveX=function(a,c){var d=f(this);this.animate([b(a,d.y)],c)};r.fn.moveRX=function(a,c,d){c=f(this);this.animate([b(c.x+a,c.y)],d)};r.fn.moveY=function(a,c){var d=f(this);this.animate([b(d.x,a)],c)};r.fn.moveRY=function(a,c){var d=f(this);this.animate([b(d.x,d.y+a)],c)};r.fn.fadeIn=function(a){var b=this;this.show();setTimeout(function(){b.animate({opacity:1},a)},0)};r.fn.fadeOut=function(a){var b=this;this.animate({opacity:0},a);this.waitTransitionEnd(typeof a==="object"?a.duration:
null,function(){b.hide()},!0)};r.fn.show=function(a){this.animate({display:"block"},a)};r.fn.hide=function(a){this.animate({display:"none"},a)};r.fn.waitTransitionEnd=function(a,b,d){var e=this,g,f,a=a||n;g=function(a,c){clearTimeout(c);b();d&&e.unbind("webkitTransitionEnd")};f=setTimeout(function(){g(null,f)},c(a)+200);e.bind("webkitTransitionEnd",g)}})();(function(){function f(e){var c=[],d=[];e.split(".").forEach(function(e){d.push(e);c.push(d.join("."))});return c}r.fn.delegate=function(e,c,d){this.bind(c,function(c){var g=r(e,this).detect(function(b){b=b.compareDocumentPosition(c.target);return b===0||b&Node.DOCUMENT_POSITION_CONTAINED_BY});g&&d.call(g,c)})};r.fn.bind=function(e,c,d){var f=e.split(" ");this.forEach(function(e){var b=getNodeId(e),h=listeners[b]||(listeners[b]=[]);f.forEach(function(a){h.push({event:a,callback:c,index:h.length,useCapture:d||
!1});e.addEventListener(a,c,d||!1)})});return this};r.fn.bind=function(e,c,d,k){this.forEach(function(c){var b=r.nodeId(c);events.forEach(function(e){var a=f(e);a.forEach(function(c){var e;e=a[0];r.listeners[b]=r.listeners[b]||{};c=r.listeners[b][c]||(r.listeners[b][c]=[]);c.push({name:e,actor:el,callback:d,index:c.length,useCapture:k||!1})});c.addEventListener(a[0],d,k||!1)})})}})();(function(f,e,c){function d(b,c){var a=c;if(typeof b!=="function")throw Error("First parameter should be function");if(typeof c==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(c){a=b(a,c)});return a}function k(){return this.replace(/(^\s+)|(\s+$)/g,"")}function g(b){return eval("("+b+")")}if(typeof e.reduce!=="function")e.reduce=d;if(typeof c.trim!=="function")c.trim=k;if(typeof f.JSON!=="object")f.JSON={},f.JSON.parse=g})(window,Array.prototype,String.prototype);r(function(){function f(c,e,f,b){var h=document.createEvent("MouseEvent");h.initMouseEvent(e,!0,!0,window,null,f,b);c.dispatchEvent(h)}var e=document.body,c={};r(e).bind("touchstart",function(d){c.x1=d.changedTouches[0].clientX;c.y1=d.changedTouches[0].clientY;c.position={x:d.changedTouches[0].clientX,y:d.changedTouches[0].clientY};c.target=d.changedTouches[0].target;c.startTime=Date.now()},!0);r(e).bind("touchmove",function(d){var e;e=d.changedTouches[0].clientX-c.position.x;var g=d.changedTouches[0].clientY-
c.position.y,b;b=r(d.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);b=b===null?{x:0,y:0,z:0}:{x:Number(b[1]),y:Number(b[2]),z:Number(b[3])};e={x:b.x+e,y:b.y+g};f(c.target,"drag",1.6*e.x,1.6*e.y);c.position.x=d.changedTouches[0].clientX;c.position.y=d.changedTouches[0].clientY;c.x2=d.changedTouches[0].clientX;c.y2=d.changedTouches[0].clientY;d.preventDefault()},!0);r(e).bind("touchend",function(d){var e=c.x1-c.x2,g=c.y1-c.y2,b=Math.abs(e),h=Math.abs(g);
c.startTime&&Date.now()-c.startTime>1E3?c={}:(h>30&&h>b?(d.preventDefault(),g>=0?f(c.target,"swipeup",e,g):f(c.target,"swipedown",e,g)):b>30&&b>h&&(d.preventDefault(),e>=0?f(c.target,"swipeleft",e,g):f(c.target,"swiperight",e,g)),c={x1:0,x2:0,y1:0,y2:0,target:null})},!0);r(e).bind("touchcancel",function(){c={x1:0,x2:0,y1:0,y2:0,target:null}},!0)});(function(){function f(c){this.storage=c}function e(c){return e.sname||(e.sname=new f(window[c+"Storage"]))}f.prototype.set=function(c,d){if(typeof c==="number"||typeof c==="string")this.storage.setItem(c,JSON.stringify(d));else if(typeof d==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};f.prototype.get=function(c){return typeof this.storage[c]==="undefined"?null:JSON.parse(this.storage.getItem(c))};
f.prototype.clear=function(){this.storage.clear()};f.prototype.size=function(){return this.storage.length};f.prototype.keys=function(){var c=[],d;for(d in this.storage)c.push(d);return c};f.prototype.values=function(){var c=[],d;for(d in this.storage)c.push(this.get(d));return c};r.storage=e})();
