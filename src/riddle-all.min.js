/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(f,h,c,e,j){function b(a,d){if(typeof a==="string")return g(e.call((d||h).querySelectorAll(a)));else if(typeof a==="object"&&a!==null&&typeof a.addEventListener==="function")return g([a]);else if(c(a))return g(a);else if(typeof a==="function")b.domReady?a(b):h.addEventListener("DOMContentLoaded",function(){a(b)},!1),b.init=a}function g(a){a.__proto__=b.fn;return a}b.listeners={};b.__nid=1;b.domReady=!1;h.addEventListener("DOMContentLoaded",function(){b.domReady=!0},!1);b.fn={detect:function(a){return this.filter(a)[0]},
invoke:function(){var a=e.call(arguments),d=a.shift();return this.map(function(b){return b[d].apply(b,a)})},pluck:function(a){return this.map(function(d){return d[a]})},each:function(a){return this.forEach(function(d){a(g([d]))})},html:function(a){return a===void 0?this[0].innerHTML:(typeof a==="string"||typeof a==="number"?this.forEach(function(d){d.innerHTML=a}):a instanceof HTMLElement?this.forEach(function(d){d.innerHTML=a.outerHTML}):b.isR(a)&&this.forEach(function(d){d.innerHTML=a[0].outerHTML}),
this)},remove:function(){this.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)});return this},add:function(a){var d;typeof a==="string"||typeof a==="number"?this.forEach(function(d){d.insertAdjacentHTML("beforeEnd",a)}):a instanceof HTMLElement?this.forEach(function(d){d.appendChild(a)}):b.isR(a)&&(d=h.createDocumentFragment(),a.forEach(function(a){d.appendChild(a)}),this.forEach(function(a){a.appendChild(d)}));return this},attr:function(a,d){if(typeof a==="string")if(d===void 0)return this[0].getAttribute(a);
else d===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(d));else typeof a==="object"&&this.forEach(function(d){for(var b in a)a[b]===null?d.removeAttribute(b):d.setAttribute(b,String(a[b]))});return this},css:function(a,d){if(typeof a==="string")if(d===void 0)return getComputedStyle(this[0],null).getPropertyValue(a);else d===null?this.forEach(function(d){d.style.removeProperty(a)}):this.forEach(function(b){b.style.setProperty(a,d,null)});else typeof a==="object"&&this.forEach(function(d){var b=
";",c;for(c in a)a[c]===null?d.style.removeProperty(c):b+=c+":"+a[c]+";";d.style.cssText+=b});return this},addClass:function(a){this.forEach(function(d){var c;if(!b(d).hasClass(a))c=d.className.split(" "),c.push(a),d.className=c.join(" ")});return this},removeClass:function(a){this.forEach(function(d){var b=d.className.split(" ");d.className=b.filter(function(d){return d!==a}).join(" ")});return this},hasClass:function(a){return!!this[0].className.match(RegExp("(?:^|\\b)"+a+"(?:\\b|$)"))},toggleClass:function(a){this.hasClass(a)?
this.removeClass(a):this.addClass(a)},bind:function(a,d,c){var g=a.split(" ");this.forEach(function(a){var i=b.nodeId(a),m=b.listeners[i]||(b.listeners[i]=[]);g.forEach(function(i){m.push({event:i,callback:d,index:m.length,useCapture:c||!1});a.addEventListener(i,d,c||!1)})});return this},unbind:function(a){function d(a,d){return a.filter(function(a){return a.event===d})}this.forEach(function(c){var g=b.nodeId(c),e=a?d(b.listeners[g]||[],a):b.listeners[g];e&&e.forEach(function(a){delete e[a.index];
c.removeEventListener(a.event,a.callback,a.useCapture)})});return this},trigger:function(a){h.createEvent("Event").initEvent(a,!0,!0);this.forEach(function(a){a.dispatchEvent(event)});return this}};b.fn.__proto__=[];b.ajax=function(a,d,c,b){function g(a){var i=[],b;for(b in a)i.push(j(b)+"="+j(a[b]));return i.join("&")}var i=new XMLHttpRequest,b=b||{},d=d||function(){},c=c||function(){},e=b.method||"GET",n=b.header||{},h=b.ctype||(e==="POST"?"application/x-www-form-urlencoded":""),b=b.data||"",f;
i.onreadystatechange=function(){i.readyState===4&&(i.status>=200&&i.status<300?d(i.responseText,i):c(i))};typeof b==="object"&&(b=g(b));i.open(e,a,!0);h&&i.setRequestHeader("Content-Type",h);i.setRequestHeader("X-Requested-With","XMLHttpRequest");for(f in n)i.setRequestHeader(f,n[f]);i.send(b);return i};b.id=function(a,b){var c=(b||h).getElementById(a);return c?g([c]):g([])};b.cls=function(a,b){return g((b||h).getElementsByClassName(a))};b.tag=function(a,b){return g((b||h).getElementsByTagName(a))};
b.nodeId=function(a){return a.__nid||(a.__nid=b.__nid++)};b.isR=function(a){return a.__proto__===b.fn};b.version="0.4.0";f.r=b})(this,document,Array.isArray,Array.prototype.slice,encodeURIComponent);(function(f,h,c){f.r.load=function(e,f){var b=0,g=e.length;e.forEach(function(a){var d=h.createElement("script");d.src=a;d.onload=function(){d.removeAttribute("onload");++b===g&&f()};c.appendChild(d)})}})(window,document,document.getElementsByTagName("head")[0]);(function(){function f(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function h(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function c(a){a=String(a).match(/(\d+(?:\.\d+)?)(m?)(s?)/);
return a[2]===""&&a[3]==="s"?Number(a[1])*1E3:a[2]==="m"&&a[3]==="s"?Number(a[1]):300}function e(a,b,c){var d=c||{},g=d.duration||l,d=d.easing||o,e,h=0,f={};b instanceof Array?(f["-webkit-transform"]=b.join(" "),e=1):typeof b==="object"&&(e=j(b,f));typeof c.callback==="function"&&a.waitTransitionEnd(g,function(){++h;e===h&&c.callback()});f["-webkit-transition"]=g+" "+d;f["-webkit-backface-visibility"]="hidden";f["-webkit-perspective"]="1000";a.css(f)}function j(a,b){var c,d=0;for(c in a)b[c]=a[c],
d++;return d}function b(a,b){return"scale("+a+","+b+")"}function g(a,b){if(typeof a==="number"&&typeof b==="number")return d+a+"px,"+b+"px"+k;else if(typeof a==="string"&&typeof b==="string")return d+a+","+b+k}var a="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,d="translate"+(a?"3d(":"("),k=a?",0)":")",l="0.3s",o="ease-in-out";r.fn.animate=function(a,b){var c=0,d=this.length,g=b||{},f=g.callback||function(){};g.callback=function(){++c;c===d&&f()};this.each(function(b){e(b,a,g)})};r.fn.scale=
function(a,c,d){this.animate([b(a,c)],d)};r.fn.scaleR=function(a,c,d){var g=h(this);this.animate([b(g.x*a,g.y*c)],d)};r.fn.scaleX=function(a,c){var d=h(this);this.animate([b(a,d.y)],c)};r.fn.scaleRX=function(a,c){var d=h(this);this.animate([b(d.x*a,d.y)],c)};r.fn.scaleY=function(a,c){var d=h(this);this.animate([b(d.x,yScale)],c)};r.fn.scaleRY=function(a,c){var d=h(this);this.animate([b(d.x,d.y*a)],c)};r.fn.move=function(a,b,c){this.animate([g(a,b)],c)};r.fn.moveR=function(a,b,c){var d=f(this);this.animate([g(d.x+
a,d.y+b)],c)};r.fn.moveX=function(a,b){var c=f(this);this.animate([g(a,c.y)],b)};r.fn.moveRX=function(a,b,c){b=f(this);this.animate([g(b.x+a,b.y)],c)};r.fn.moveY=function(a,b){var c=f(this);this.animate([g(c.x,a)],b)};r.fn.moveRY=function(a,b){var c=f(this);this.animate([g(c.x,c.y+a)],b)};r.fn.fadeIn=function(a){var b=this;this.show();setTimeout(function(){b.animate({opacity:1},a)},0)};r.fn.fadeOut=function(a){var b=this;this.animate({opacity:0},a);this.waitTransitionEnd(typeof a==="object"?a.duration:
null,function(){b.hide()},!0)};r.fn.show=function(a){this.animate({display:"block"},a)};r.fn.hide=function(a){this.animate({display:"none"},a)};r.fn.waitTransitionEnd=function(a,b,d){var g=this,e,f,a=a||l;e=function(a,c){clearTimeout(c);b();d&&g.unbind("webkitTransitionEnd")};f=setTimeout(function(){e(null,f)},c(a)+200);g.bind("webkitTransitionEnd",e)}})();(function(){function f(f){var c=[],e=[];f.split(".").forEach(function(f){e.push(f);c.push(e.join("."))});return c}r.fn.delegate=function(f,c,e){this.bind(c,function(c){var b=r(f,this).detect(function(b){b=b.compareDocumentPosition(c.target);return b===0||b&Node.DOCUMENT_POSITION_CONTAINED_BY});b&&e.call(b,c)})};r.fn.bind=function(f,c,e){var j=f.split(" ");this.forEach(function(b){var g=getNodeId(b),a=listeners[g]||(listeners[g]=[]);j.forEach(function(d){a.push({event:d,callback:c,index:a.length,useCapture:e||
!1});b.addEventListener(d,c,e||!1)})});return this};r.fn.bind=function(h,c,e,j){this.forEach(function(b){var c=r.nodeId(b);events.forEach(function(a){var d=f(a);d.forEach(function(a){var b;b=d[0];r.listeners[c]=r.listeners[c]||{};a=r.listeners[c][a]||(r.listeners[c][a]=[]);a.push({name:b,actor:el,callback:e,index:a.length,useCapture:j||!1})});b.addEventListener(d[0],e,j||!1)})})}})();(function(f,h,c){function e(b,a){var c=a;if(typeof b!=="function")throw Error("First parameter should be function");if(typeof a==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(a){c=b(c,a)});return c}function j(){return this.replace(/(^\s+)|(\s+$)/g,"")}function b(b){return eval("("+b+")")}if(typeof h.reduce!=="function")h.reduce=e;if(typeof c.trim!=="function")c.trim=j;if(typeof f.JSON!=="object")f.JSON={},f.JSON.parse=b})(window,Array.prototype,String.prototype);r(function(){function f(c,f,b,g){var a=document.createEvent("MouseEvent");a.initMouseEvent(f,!0,!0,window,null,b,g);c.dispatchEvent(a)}var h=document.body,c={};r(h).bind("touchstart",function(e){c.x1=e.changedTouches[0].clientX;c.y1=e.changedTouches[0].clientY;c.position={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};c.target=e.changedTouches[0].target;c.startTime=Date.now()},!0);r(h).bind("touchmove",function(e){var h;h=e.changedTouches[0].clientX-c.position.x;var b=e.changedTouches[0].clientY-
c.position.y,g;g=r(e.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);g=g===null?{x:0,y:0,z:0}:{x:Number(g[1]),y:Number(g[2]),z:Number(g[3])};h={x:g.x+h,y:g.y+b};f(c.target,"drag",1.6*h.x,1.6*h.y);c.position.x=e.changedTouches[0].clientX;c.position.y=e.changedTouches[0].clientY;c.x2=e.changedTouches[0].clientX;c.y2=e.changedTouches[0].clientY;e.preventDefault()},!0);r(h).bind("touchend",function(e){var h=c.x1-c.x2,b=c.y1-c.y2,g=Math.abs(h),a=Math.abs(b);
c.startTime&&Date.now()-c.startTime>1E3?c={}:(a>30&&a>g?(e.preventDefault(),b>=0?f(c.target,"swipeup",h,b):f(c.target,"swipedown",h,b)):g>30&&g>a&&(e.preventDefault(),h>=0?f(c.target,"swipeleft",h,b):f(c.target,"swiperight",h,b)),c={x1:0,x2:0,y1:0,y2:0,target:null})},!0);r(h).bind("touchcancel",function(){c={x1:0,x2:0,y1:0,y2:0,target:null}},!0)});(function(){function f(c){this.storage=c}function h(c){return h.sname||(h.sname=new f(window[c+"Storage"]))}f.prototype.set=function(c,e){if(typeof c==="number"||typeof c==="string")this.storage.setItem(c,JSON.stringify(e));else if(typeof e==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};f.prototype.get=function(c){return typeof this.storage[c]==="undefined"?null:JSON.parse(this.storage.getItem(c))};
f.prototype.clear=function(){this.storage.clear()};f.prototype.size=function(){return this.storage.length};f.prototype.keys=function(){var c=[],e;for(e in this.storage)c.push(e);return c};f.prototype.values=function(){var c=[],e;for(e in this.storage)c.push(this.get(e));return c};r.storage=h})();
