/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(j,m,n){function d(a,b){if(typeof a==="string")return k(a,b,"querySelectorAll");else if(a instanceof Array)return h(a);else if(typeof a.addEventListener==="function")return h(i(a));else typeof a==="function"&&(o?a(d):j.addEventListener("DOMContentLoaded",function(){a(d)},!1))}function k(a,b,e){if(b===void 0||b instanceof HTMLElement)return h(i((b||j)[e](a)));else if(b.__proto__===d.fn){var c=[];b.map(function(b){return i(b[e](a))}).forEach(function(a){a.forEach(function(a){c.push(a)})});
return h(c)}}function i(a){if(a===null||a===void 0)return[];else if(a instanceof HTMLElement)return[a];else if(typeof a.length==="number"&&typeof a.item==="function")return m.call(a)}function h(a){a.__proto__=d.fn;return a}function q(a,b){return a.filter(function(a){return a.event===b})}var l={},p=1,o=!1;d.fn={detect:function(a){return this.filter(a)[0]},invoke:function(){var a=m.call(arguments),b=a.shift();return this.map(function(e){return e[b].apply(e,a)})},pluck:function(a){return this.map(function(b){return b[a]})},
each:function(a){return this.forEach(function(b){a(h(i(b)))})},html:function(a){var b;if(a===void 0)return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(a){return a});else typeof a==="string"||typeof a==="number"?this.forEach(function(b){b.innerHTML=a}):a instanceof HTMLElement?this.forEach(function(b){b.innerHTML=a.outerHTML}):a.__proto__===d.fn&&(b=a.map(function(a){return a.outerHTML}).join(""),this.forEach(function(a){a.innerHTML=b}));return this},add:function(a){var b;
typeof a==="string"?this.forEach(function(b){b.insertAdjacentHTML("beforeEnd",a)}):a instanceof HTMLElement?this.forEach(function(b){b.appendChild(a)}):a.__proto__===d.fn&&(b=j.createDocumentFragment(),a.forEach(function(a){b.appendChild(a)}),this.forEach(function(a){a.appendChild(b)}));return this},remove:function(){this.forEach(function(a){a.parentNode instanceof HTMLElement&&a.parentNode.removeChild(a)});return this},attr:function(a,b){if(typeof a==="string")if(b===void 0)return this.length===
1?this[0].getAttribute(a):this.invoke("getAttribute",a);else b===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(b));else typeof a==="object"&&this.forEach(function(b){for(var c in a)a[c]===null?b.removeAttribute(c):b.setAttribute(c,String(a[c]))});return this},css:function(a,b){if(typeof a==="string")if(b===void 0)return this.length===1?getComputedStyle(this[0],null).getPropertyValue(a):this.map(function(b){return getComputedStyle(b,null).getPropertyValue(a)});else b===
null?this.forEach(function(b){b.style.removeProperty(a)}):this.forEach(function(e){e.style.setProperty(a,b,null)});else typeof a==="object"&&this.forEach(function(b){var c=";",f;for(f in a)a[f]===null?b.style.removeProperty(f):c+=f+":"+a[f]+";";b.style.cssText+=c});return this},addClass:function(a){this.forEach(function(b){b.className===""?b.className=a:b.className+=" "+a});return this},removeClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(a){var c=a.className.replace(b,
"");a.className=c.replace(/\s+$/,"")});return this},hasClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(b):this.map(function(a){return!!a.className.match(b)})},swapClass:function(a,b){this.removeClass(a);this.addClass(b)},bind:function(a,b,e){this.forEach(function(c){var f=c.__nid||(c.__nid=p++),f=l[f]||(l[f]=[]);f.push({event:a,callback:b,index:f.length});c.addEventListener(a,b,e||!1)});return this},unbind:function(a){this.forEach(function(b){var e=
b.__nid||(b.__nid=p++),c=a?q(l[e],a):l[e];c&&c.forEach(function(a){delete c[a.index];b.removeEventListener(a.event,a.callback,!1)})});return this},delegate:function(a,b,e){this.bind(b,function(b){var f=d(a,this).detect(function(a){a=a.compareDocumentPosition(b.target);return a===0||a&Node.DOCUMENT_POSITION_CONTAINED_BY});f&&e.call(f,b)})}};j.addEventListener("DOMContentLoaded",function(){o=!0},!1);d.fn.__proto__=[];d.ajax=function(a,b,e,c){function d(a){var b=[],c;for(c in a)b.push(n(c)+"="+n(a[c]));
return b.join("&")}var g=new XMLHttpRequest,c=c||{},b=b||function(){},e=e||function(){},h=c.method||"GET",j=c.header||{},k=c.ctype||(h==="POST"?"application/x-www-form-urlencoded":""),c=c.data||"",i;g.onreadystatechange=function(){g.readyState===4&&(g.status>=200&&g.status<300?b(g.responseText,g):e(g))};typeof c==="object"&&(c=d(c));g.open(h,a,!0);k&&g.setRequestHeader("Content-Type",k);g.setRequestHeader("X-Requested-With","XMLHttpRequest");for(i in j)g.setRequestHeader(i,j[i]);g.send(c)};d.id=function(a,
b){return k(a,b,"getElementById")};d.cls=function(a,b){return k(a,b,"getElementsByClassName")};d.tag=function(a,b){return k(a,b,"getElementsByTagName")};d.isR=function(a){return a.__proto__===d.fn};d.version="0.2.9";window.r=d})(document,Array.prototype.slice,encodeURIComponent);
