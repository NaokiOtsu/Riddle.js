/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(m,o,e){function f(a,c){if(typeof a==="string")return n(a,c,"querySelectorAll");else if(a instanceof HTMLElement)return j(l(a));else if(typeof a==="function")s?a(f):m.addEventListener("DOMContentLoaded",function(){a(f)},false)}function n(a,c,d){if(typeof c==="undefined"||c instanceof HTMLElement)return j(l((c||m)[d](a)));else if(c.__proto__===f.fn){var i=[];c.map(function(k){return l(k[d](a))}).forEach(function(k){k.forEach(function(t){i.push(t)})});return j(i)}}function l(a){if(a===null)return[];
else if(a instanceof HTMLElement)return[a];else if(typeof a.length==="number"&&typeof a.item==="function")return o.call(a)}function j(a){a.__proto__=f.fn;return a}function b(a,c){var d,i=c||"last";if(typeof a==="string")this.forEach(function(k){b[i](k,a)});else if(a instanceof HTMLElement){d=a.outerHTML;this.forEach(function(k){b[i](k,d)})}else if(a.__proto__===f.fn){d=a.map(function(k){return k.outerHTML}).join("");this.forEach(function(k){b[i](k,d)})}return this}function g(a,c){return a.filter(function(d){return d.event===
c})}function h(a){var c=[],d;for(d in a)c.push(e(d)+"="+e(a[d]));return c.join("&")}var p={},q=1,s=false;f.fn={detect:function(a){return this.filter(a)[0]},invoke:function(){var a=o.call(arguments),c=a.shift();return this.map(function(d){return d[c].apply(d,a)})},pluck:function(a){return this.map(function(c){return c[a]})},each:function(a){return this.forEach(function(c){a(j(l(c)))})},html:function(a){var c;if(typeof a==="undefined")return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(d){return d});
else if(typeof a==="string")this.forEach(function(d){d.innerHTML=a});else if(a instanceof HTMLElement)this.forEach(function(d){d.innerHTML=a.outerHTML});else if(a.__proto__===f.fn){c=a.map(function(d){return d.outerHTML}).join("");this.forEach(function(d){d.innerHTML=c})}return this},add:b,remove:function(){this.forEach(function(a){a.parentNode.removeChild(a)});return this},attr:function(a,c){if(typeof a==="string")if(typeof c==="undefined")return this.length===1?this[0].getAttribute(a):this.invoke("getAttribute",
a);else c===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(c));else typeof a==="object"&&this.forEach(function(d){for(var i in a)a[i]===null?d.removeAttribute(i):d.setAttribute(i,String(a[i]))});return this},css:function(a,c){if(typeof a==="string")if(typeof c==="undefined")return this.length===1?getComputedStyle(this[0],"").getPropertyValue(a):this.map(function(d){return getComputedStyle(d,"").getPropertyValue(a)});else c===null?this.forEach(function(d){d.style.removeProperty(a)}):
this.forEach(function(d){d.style.setProperty(a,c,"")});else typeof a==="object"&&this.forEach(function(d){for(var i in a)a[i]===null?d.style.removeProperty(i):d.style.setProperty(i,a[i],"")});return this},addClass:function(a){this.forEach(function(c){c.className===""?c.className=a:c.className+=" "+a});return this},removeClass:function(a){var c=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(d){var i=d.className.replace(c,"");d.className=i.replace(/\s+$/,"")});return this},hasClass:function(a){var c=
RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(c):this.map(function(d){return!!d.className.match(c)})},swapClass:function(a,c){this.removeClass(a);this.addClass(c)},bind:function(a,c,d){this.forEach(function(i){var k=i.nid||(i.nid=q++);k=p[k]||(p[k]=[]);k.push({event:a,callback:c,index:k.length});i.addEventListener(a,c,d||false)});return this},unbind:function(a){this.forEach(function(c){var d=c.nid||(c.nid=q++),i=a?g(p[d],a):p[d];i&&i.forEach(function(k){delete i[k.index];
c.removeEventListener(k.event,k.callback,false)})});return this}};m.addEventListener("DOMContentLoaded",function(){s=true},false);["click","submit","focus","blur","scroll","select","change"].forEach(function(a){f.fn[a]=function(c,d){this.bind(a,c,d)}});f.fn.__proto__=Array.prototype;b.prev=function(a,c){a.insertAdjacentHTML("beforeBegin",c)};b.first=function(a,c){a.insertAdjacentHTML("afterBegin",c)};b.last=function(a,c){a.insertAdjacentHTML("beforeEnd",c)};b.next=function(a,c){a.insertAdjacentHTML("afterEnd",
c)};f.id=function(a,c){return n(a,c,"getElementById")};f.cls=function(a,c){return n(a,c,"getElementsByClassName")};f.tag=function(a,c){return n(a,c,"getElementsByTagName")};f.ajax=function(a,c,d,i){var k=new XMLHttpRequest;i=i||{};c=c||function(){};d=d||function(){};var t=i.method||"GET",v=i.header||{},w=i.ctype||(t==="POST"?"application/x-www-form-urlencoded":"");i=i.data||"";var u;k.onreadystatechange=function(){if(k.readyState===4)k.status>=200&&k.status<300?c(k.responseText,k):d(k)};if(typeof i===
"object")i=h(i);k.open(t,a,true);w&&k.setRequestHeader("Content-Type",w);k.setRequestHeader("X-Requested-With","XMLHttpRequest");for(u in v)k.setRequestHeader(u,v[u]);k.send(i)};f.version="0.2.6";window.r=f})(document,Array.prototype.slice,encodeURIComponent);(function(){function m(b){b=b.css("-webkit-transform").match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/);return b!==null&&b.length===3?{x:Number(b[1]),y:Number(b[2])}:{x:0,y:0}}function o(b){b=b.css("-webkit-transform").match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/);return b!==null&&b.length===3?{x:Number(b[1]),y:Number(b[2])}:{x:1,y:1}}function e(b,g,h){var p="0.3s",q="ease-in-out",s,a=0,c={};if(g instanceof Array){c["-webkit-transform"]=
g.join(" ");s=1}else if(typeof g==="object")s=f(g,c);if(typeof h==="object"){if(typeof h.duration==="string")p=h.duration;else if(typeof h.duration==="number")p=h.duration+"s";if(typeof h.easing==="string")q=h.easing;typeof h.callback==="function"&&b.bind("webkitTransitionEnd",function(d){++a;if(s===a){h.callback(d);b.unbind("webkitTransitionEnd")}})}c["-webkit-transition"]=p+" "+q;c["-webkit-backface-visibility"]="hidden";c["-webkit-perspective"]="1000";c["-webkit-transform-origin"]="0 0";b.css(c)}
function f(b,g){var h,p=0;for(h in b){g[h]=b[h];p++}return p}var n="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,l="translate"+(n?"3d(":"("),j=n?",0)":")";r.fn.animate=function(b,g){var h=0,p=this.length,q=g||{},s=typeof q.callback==="function"?q.callback:function(){};q.callback=function(){++h;h===p&&s()};this.each(function(a){e(a,b,q)})};r.fn.scale=function(b,g,h){this.animate(["scale("+b+","+g+")"],h)};r.fn.scaleR=function(b,g,h){var p=o(this);this.animate(["scale("+p.x*b+","+p.y*g+")"],
h)};r.fn.scaleX=function(b,g){var h=o(this);this.animate(["scale("+b+","+h.y+")"],g)};r.fn.scaleRX=function(b,g){var h=o(this);this.animate(["scale("+h.x*b+","+h.y+")"],g)};r.fn.scaleY=function(b,g){this.animate(["scale("+o(this).x+","+yScale+")"],g)};r.fn.scaleRY=function(b,g){var h=o(this);this.animate(["scale("+h.x+","+h.y*b+")"],g)};r.fn.move=function(b,g,h){if(typeof b==="number"&&typeof g==="number")this.animate([l+b+"px,"+g+"px"+j],h);else typeof b==="string"&&typeof g==="string"&&this.animate([l+
b+","+g+j],h)};r.fn.moveR=function(b,g,h){var p=m(this);this.animate([l+(p.x+b)+"px,"+(p.y+g)+"px"+j],h)};r.fn.moveX=function(b,g){var h=m(this);if(typeof b==="number")this.animate([l+b+"px,"+h.y+"px"+j],g);else typeof b==="string"&&this.animate([l+b+","+h.y+j],g)};r.fn.moveRX=function(b,g,h){g=m(this);this.animate([l+(g.x+b)+"px,"+g.y+"px"+j],h)};r.fn.moveY=function(b,g){var h=m(this);if(typeof b==="number")this.animate([l+h.x+"px,"+b+"px"+j],g);else typeof b==="string"&&this.animate([l+h.x+"px,"+
b+j],g)};r.fn.moveRY=function(b,g){var h=m(this);this.animate([l+h.x+"px,"+(h.y+b)+"px"+j],g)};r.fn.fadeIn=function(b){this.animate({opacity:1},b)};r.fn.fadeOut=function(b){this.animate({opacity:0},b)};r.fn.show=function(b){this.animate({visibility:"visible"},b)};r.fn.hide=function(b){this.animate({visibility:"hidden"},b)}})();(function(m,o,e){function f(j,b){var g=b;if(typeof j!=="function")throw Error("First parameter should be function");if(typeof b==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(h){g=j(g,h)});return g}function n(){return this.replace(/(^\s+)|(\s+$)/g,"")}function l(j){return eval("("+j+")")}if(typeof o.reduce!=="function")o.reduce=f;if(typeof e.trim!=="function")e.trim=n;if(typeof m.JSON!=="object"){m.JSON={};m.JSON.parse=l}})(window,Array.prototype,String.prototype);(function(m,o,e){m.r.load=function(f,n){var l=0,j=f.length;f.forEach(function(b){var g=o.createElement("script");g.src=b;g.onload=function(){g.removeAttribute("onload");++l===j&&n()};e.appendChild(g)})}})(window,document,document.getElementsByTagName("head")[0]);(function(){function m(e){this.storage=e}function o(e){return o.sname||(o.sname=new m(window[e+"Storage"]))}m.prototype.set=function(e,f){if(typeof e==="number"||typeof e==="string")this.storage.setItem(e,JSON.stringify(f));else if(typeof f==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};m.prototype.get=function(e){return typeof this.storage[e]==="undefined"?null:JSON.parse(this.storage.getItem(e))};
m.prototype.clear=function(){this.storage.clear()};m.prototype.size=function(){return this.storage.length};m.prototype.keys=function(){var e=[],f;for(f in this.storage)e.push(f);return e};m.prototype.values=function(){var e=[],f;for(f in this.storage)e.push(this.get(f));return e};r.storage=o})();r(function(){function m(f,n,l,j){var b=document.createEvent("MouseEvent");b.initMouseEvent(n,true,true,window,null,l,j);f.dispatchEvent(b)}var o=document.body,e={};r(o).bind("touchstart",function(f){e.x1=f.changedTouches[0].clientX;e.y1=f.changedTouches[0].clientY;e.position={x:f.changedTouches[0].clientX,y:f.changedTouches[0].clientY};e.target=f.changedTouches[0].target;e.startTime=Date.now()},true);r(o).bind("touchmove",function(f){var n;n=f.changedTouches[0].clientX-e.position.x;var l=f.changedTouches[0].clientY-
e.position.y,j;j=r(e.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);j=j===null?{x:0,y:0,z:0}:{x:Number(j[1]),y:Number(j[2]),z:Number(j[3])};n={x:j.x+n,y:j.y+l};m(e.target,"drag",1.6*n.x,1.6*n.y);e.position.x=f.changedTouches[0].clientX;e.position.y=f.changedTouches[0].clientY;e.x2=f.changedTouches[0].clientX;e.y2=f.changedTouches[0].clientY;f.preventDefault()},true);r(o).bind("touchend",function(f){var n=e.x1-e.x2,l=e.y1-e.y2,j=Math.abs(n),b=Math.abs(l);
if(e.startTime&&Date.now()-e.startTime>1E3)e={};else{if(b>30&&b>j){f.preventDefault();l>=0?m(e.target,"swipeup",n,l):m(e.target,"swipedown",n,l)}else if(j>30&&j>b){f.preventDefault();n>=0?m(e.target,"swipeleft",n,l):m(e.target,"swiperight",n,l)}e={x1:0,x2:0,y1:0,y2:0,target:null}}},true);r(o).bind("touchcancel",function(){e={x1:0,x2:0,y1:0,y2:0,target:null}},true);["swipeleft","swiperight","swipeup","swipedown"].forEach(function(f){r.fn[f]=function(n,l){this.bind(f,n,l)}})});
