/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(e,d,b,g,j,f){function a(c,m){if(typeof c==="string")return i(g.call((m||d).querySelectorAll(c)));else if(typeof c==="object"&&c!==null&&typeof c.addEventListener==="function")return i([c]);else if(b(c))return i(c);else if(typeof c==="function")a.domReady?c(a):d.addEventListener("DOMContentLoaded",function(){c(a)},!1),a.init=c}function i(c){c.__proto__=a.fn;return c}function n(c){return c.__nid||(c.__nid=a.__nid++)}a.listeners={};a.__nid=1;a.domReady=!1;d.addEventListener("DOMContentLoaded",
function(){a.domReady=!0},!1);a.fn={each:function(c){return this.forEach(function(m){c(a.wrap([m]))})},html:function(c){return c===f?this[0].innerHTML:(typeof c==="string"||typeof c==="number"?this.forEach(function(a){a.innerHTML=c}):c instanceof HTMLElement?this.forEach(function(a){a.innerHTML=c.outerHTML}):a.isR(c)&&this.forEach(function(a){a.innerHTML=c[0].outerHTML}),this)},remove:function(){this.forEach(function(c){c.parentNode&&c.parentNode.removeChild(c)});return this},add:function(c){var m;
typeof c==="string"||typeof c==="number"?this.forEach(function(a){a.insertAdjacentHTML("beforeEnd",c)}):c instanceof HTMLElement?this.forEach(function(a){a.appendChild(c)}):a.isR(c)&&(m=d.createDocumentFragment(),c.forEach(function(c){m.appendChild(c)}),this.forEach(function(c){c.appendChild(m)}));return this},attr:function(c,a){if(typeof c==="string")if(a===f)return this[0].getAttribute(c);else a===null?this.forEach(function(a){a.removeAttribute(c)}):this.forEach(function(b){b.setAttribute(c,String(a))});
else typeof c==="object"&&this.forEach(function(a){for(var h in c)c[h]===null?a.removeAttribute(h):a.setAttribute(h,String(c[h]))});return this},css:function(c,a){if(typeof c==="string")if(a===f)return getComputedStyle(this[0],null).getPropertyValue(c);else a===null?this.forEach(function(a){a.style.removeProperty(c)}):this.forEach(function(b){b.style.setProperty(c,a,null)});else typeof c==="object"&&this.forEach(function(a){var h=";",l;for(l in c)c[l]===null?a.style.removeProperty(l):h+=l+":"+c[l]+
";";a.style.cssText+=h});return this},addClass:function(c){this.forEach(function(b){var d;if(!a(b).hasClass(c))d=b.className.split(" "),d.push(c),b.className=d.join(" ")});return this},removeClass:function(a){this.forEach(function(b){var d=b.className.split(" ");b.className=d.filter(function(h){return h!==a}).join(" ")});return this},hasClass:function(a){return!!this[0].className.match(RegExp("(?:^|\\b)"+a+"(?:\\b|$)"))},toggleClass:function(a){this.hasClass(a)?this.removeClass(a):this.addClass(a)},
bind:function(c,b,d){var h=c.split(" ");this.forEach(function(c){var k=n(c),g=a.listeners[k]||(a.listeners[k]=[]);h.forEach(function(a){g.push({event:a,callback:b,index:g.length,useCapture:d||!1});c.addEventListener(a,b,d||!1)})});return this},unbind:function(c){function b(a,h){return a.filter(function(a){return a.event===h})}this.forEach(function(d){var h=n(d),l=c?b(a.listeners[h]||[],c):a.listeners[h];l&&l.forEach(function(a){delete l[a.index];d.removeEventListener(a.event,a.callback,a.useCapture)})});
return this},trigger:function(a){var b=d.createEvent("Event");b.initEvent(a,!0,!0);this.forEach(function(a){a.dispatchEvent(b)});return this}};a.fn.__proto__=[];a.ajax=function(a,b,d,h){function l(a){var h=[],c;for(c in a)h.push(j(c)+"="+j(a[c]));return h.join("&")}var k=new XMLHttpRequest,h=h||{},b=b||function(){},d=d||function(){},g=h.method||"GET",f=h.header||{},e=h.ctype||(g==="POST"?"application/x-www-form-urlencoded":""),h=h.data||"",i;k.onreadystatechange=function(){k.readyState===4&&(k.status>=
200&&k.status<300?b(k.responseText,k):d(k))};typeof h==="object"&&(h=l(h));k.open(g,a,!0);e&&k.setRequestHeader("Content-Type",e);k.setRequestHeader("X-Requested-With","XMLHttpRequest");for(i in f)k.setRequestHeader(i,f[i]);k.send(h);return k};a.get=function(c,b,d,h){a.ajax(c,d,h,{data:b,method:"GET"})};a.post=function(c,b,d,h){a.ajax(c,d,h,{data:b,method:"POST"})};a.id=function(a,b){var g=(b||d).getElementById(a);return g?i([g]):i([])};a.cls=function(a,b){return i((b||d).getElementsByClassName(a))};
a.tag=function(a,b){return i((b||d).getElementsByTagName(a))};a.isR=function(c){return c.__proto__===a.fn};a.wrap=i;a.nodeId=n;a.on=a.bind;a.off=a.unbind;a.version="0.4.0";e.r=a})(this,document,Array.isArray||function(e){return e instanceof Array},Array.prototype.slice,encodeURIComponent);(function(){function e(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function d(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function b(a){a=String(a).match(/(\d+(?:\.\d+)?)(m?)(s?)/);
return a[2]===""&&a[3]==="s"?Number(a[1])*1E3:a[2]==="m"&&a[3]==="s"?Number(a[1]):300}function g(a,c,b){var d=b||{},g=d.duration||m,d=d.easing||o,f,e=0,i={};c instanceof Array?(i["-webkit-transform"]=c.join(" "),f=1):typeof c==="object"&&(f=j(c,i));typeof b.callback==="function"&&a.waitTransitionEnd(g,function(){++e;f===e&&b.callback()});i["-webkit-transition"]=g+" "+d;i["-webkit-backface-visibility"]="hidden";i["-webkit-perspective"]="1000";a.css(i)}function j(a,c){var b,d=0;for(b in a)c[b]=a[b],
d++;return d}function f(a,c){return"scale("+a+","+c+")"}function a(a,b){if(typeof a==="number"&&typeof b==="number")return n+a+"px,"+b+"px"+c;else if(typeof a==="string"&&typeof b==="string")return n+a+","+b+c}var i="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,n="translate"+(i?"3d(":"("),c=i?",0)":")",m="0.3s",o="ease-in-out";r.fn.animate=function(a,c){var b=0,d=this.length,f=c||{},e=f.callback||function(){};f.callback=function(){++b;b===d&&e()};this.each(function(c){g(c,a,f)})};r.fn.scale=
function(a,c,b){this.animate([f(a,c)],b)};r.fn.scaleR=function(a,c,b){var g=d(this);this.animate([f(g.x*a,g.y*c)],b)};r.fn.scaleX=function(a,c){var b=d(this);this.animate([f(a,b.y)],c)};r.fn.scaleRX=function(a,c){var b=d(this);this.animate([f(b.x*a,b.y)],c)};r.fn.scaleY=function(a,c){var b=d(this);this.animate([f(b.x,yScale)],c)};r.fn.scaleRY=function(a,c){var b=d(this);this.animate([f(b.x,b.y*a)],c)};r.fn.move=function(c,b,d){this.animate([a(c,b)],d)};r.fn.moveR=function(c,b,d){var g=e(this);this.animate([a(g.x+
c,g.y+b)],d)};r.fn.moveX=function(c,b){var d=e(this);this.animate([a(c,d.y)],b)};r.fn.moveRX=function(c,b,d){b=e(this);this.animate([a(b.x+c,b.y)],d)};r.fn.moveY=function(c,b){var d=e(this);this.animate([a(d.x,c)],b)};r.fn.moveRY=function(c,b){var d=e(this);this.animate([a(d.x,d.y+c)],b)};r.fn.fadeIn=function(a){var c=this;this.show();setTimeout(function(){c.animate({opacity:1},a)},0)};r.fn.fadeOut=function(a){var c=this;this.animate({opacity:0},a);this.waitTransitionEnd(typeof a==="object"?a.duration:
null,function(){c.hide()},!0)};r.fn.show=function(a){this.animate({display:"block"},a)};r.fn.hide=function(a){this.animate({display:"none"},a)};r.fn.waitTransitionEnd=function(a,c,d){var g=this,f,e,a=a||m;f=function(a,b){clearTimeout(b);c();d&&g.unbind("webkitTransitionEnd")};e=setTimeout(function(){f(null,e)},b(a)+200);g.bind("webkitTransitionEnd",f)}})();r.fn.collect=function(e){return this.map(function(d){return e(r.wrap([d]))})};r.fn.any=function(e){return this.some(function(d){return e(r.wrap([d]))})};r.fn.all=function(e){return this.every(function(d){return e(r.wrap([d]))})};r.fn.fold=function(e,d){return this.reduce(function(b){return e(r.wrap([b]))},d)};r.fn.foldRight=function(e,d){return this.reduceRight(function(b){return e(r.wrap([b]))},d)};(function(){function e(d){var b=[],g=[];d.split(".").forEach(function(d){g.push(d);b.push(g.join("."))});return b}r.fn.delegate=function(d,b,g){this.bind(b,function(b){var f=r(d,this).detect(function(a){a=a.compareDocumentPosition(b.target);return a===0||a&Node.DOCUMENT_POSITION_CONTAINED_BY});f&&g.call(f,b)})};r.fn.bind=function(d,b,g){var e=d.split(" ");this.forEach(function(d){var a=getNodeId(d),i=listeners[a]||(listeners[a]=[]);e.forEach(function(a){i.push({event:a,callback:b,index:i.length,useCapture:g||
!1});d.addEventListener(a,b,g||!1)})});return this};r.fn.bind=function(d,b,g,j){this.forEach(function(b){var a=r.nodeId(b);events.forEach(function(d){var n=e(d);n.forEach(function(c){var b;b=n[0];r.listeners[a]=r.listeners[a]||{};c=r.listeners[a][c]||(r.listeners[a][c]=[]);c.push({name:b,actor:el,callback:g,index:c.length,useCapture:j||!1})});b.addEventListener(n[0],g,j||!1)})})}})();(function(e,d,b){function g(a,b){var d=b;if(typeof a!=="function")throw Error("First parameter should be function");if(typeof b==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(c){d=a(d,c)});return d}function j(){return this.replace(/(^\s+)|(\s+$)/g,"")}function f(a){return eval("("+a+")")}if(typeof d.reduce!=="function")d.reduce=g;if(typeof b.trim!=="function")b.trim=j;if(typeof e.JSON!=="object")e.JSON={},e.JSON.parse=f})(window,Array.prototype,String.prototype);r(function(){function e(b,d,e,a){var i=document.createEvent("MouseEvent");i.initMouseEvent(d,!0,!0,window,null,e,a);b.dispatchEvent(i)}var d=document.body,b={};r(d).bind("touchstart",function(d){b.x1=d.changedTouches[0].clientX;b.y1=d.changedTouches[0].clientY;b.position={x:d.changedTouches[0].clientX,y:d.changedTouches[0].clientY};b.target=d.changedTouches[0].target;b.startTime=Date.now()},!0);r(d).bind("touchmove",function(d){var j;j=d.changedTouches[0].clientX-b.position.x;var f=d.changedTouches[0].clientY-
b.position.y,a;a=r(d.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);a=a===null?{x:0,y:0,z:0}:{x:Number(a[1]),y:Number(a[2]),z:Number(a[3])};j={x:a.x+j,y:a.y+f};e(b.target,"drag",1.6*j.x,1.6*j.y);b.position.x=d.changedTouches[0].clientX;b.position.y=d.changedTouches[0].clientY;b.x2=d.changedTouches[0].clientX;b.y2=d.changedTouches[0].clientY;d.preventDefault()},!0);r(d).bind("touchend",function(d){var j=b.x1-b.x2,f=b.y1-b.y2,a=Math.abs(j),i=Math.abs(f);
b.startTime&&Date.now()-b.startTime>1E3?b={}:(i>30&&i>a?(d.preventDefault(),f>=0?e(b.target,"swipeup",j,f):e(b.target,"swipedown",j,f)):a>30&&a>i&&(d.preventDefault(),j>=0?e(b.target,"swipeleft",j,f):e(b.target,"swiperight",j,f)),b={x1:0,x2:0,y1:0,y2:0,target:null})},!0);r(d).bind("touchcancel",function(){b={x1:0,x2:0,y1:0,y2:0,target:null}},!0)});
