/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(e,j,g){function f(b,a){if(typeof b==="string")return k(b,a,"querySelectorAll");else if(b instanceof HTMLElement)return h(i(b));else typeof b==="function"&&(l?b(f):e.addEventListener("DOMContentLoaded",function(){b(f)},!1))}function k(b,a,c){if(typeof a==="undefined"||a instanceof HTMLElement)return h(i((a||e)[c](b)));else if(a.__proto__===f.fn){var d=[];a.map(function(a){return i(a[c](b))}).forEach(function(b){b.forEach(function(b){d.push(b)})});return h(d)}}function i(b){if(b===null)return[];
else if(b instanceof HTMLElement)return[b];else if(typeof b.length==="number"&&typeof b.item==="function")return j.call(b)}function h(b){b.__proto__=f.fn;return b}function a(b,a){return b.filter(function(b){return b.event===a})}function d(b){var a=[],c;for(c in b)a.push(g(c)+"="+g(b[c]));return a.join("&")}var c={},m=1,l=!1;f.fn={detect:function(b){return this.filter(b)[0]},invoke:function(){var b=j.call(arguments),a=b.shift();return this.map(function(c){return c[a].apply(c,b)})},pluck:function(b){return this.map(function(a){return a[b]})},
each:function(b){return this.forEach(function(a){b(h(i(a)))})},html:function(b){var a;if(typeof b==="undefined")return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(b){return b});else typeof b==="string"||typeof b==="number"?this.forEach(function(a){a.innerHTML=b}):b instanceof HTMLElement?this.forEach(function(a){a.innerHTML=b.outerHTML}):b.__proto__===f.fn&&(a=b.map(function(b){return b.outerHTML}).join(""),this.forEach(function(b){b.innerHTML=a}));return this},add:function(b){var a;
typeof b==="string"?this.forEach(function(a){a.insertAdjacentHTML("beforeEnd",b)}):b instanceof HTMLElement?this.forEach(function(a){a.appendChild(b)}):b.__proto__===f.fn&&(a=e.createDocumentFragment(),b.forEach(function(b){a.appendChild(b)}),this.forEach(function(b){b.appendChild(a)}));return this},remove:function(){this.forEach(function(b){b.parentNode.removeChild(b)});return this},attr:function(b,a){if(typeof b==="string")if(typeof a==="undefined")return this.length===1?this[0].getAttribute(b):
this.invoke("getAttribute",b);else a===null?this.invoke("removeAttribute",b):this.invoke("setAttribute",b,String(a));else typeof b==="object"&&this.forEach(function(a){for(var c in b)b[c]===null?a.removeAttribute(c):a.setAttribute(c,String(b[c]))});return this},css:function(b,a){if(typeof b==="string")if(typeof a==="undefined")return this.length===1?getComputedStyle(this[0],null).getPropertyValue(b):this.map(function(a){return getComputedStyle(a,null).getPropertyValue(b)});else a===null?this.forEach(function(a){a.style.removeProperty(b)}):
this.forEach(function(c){c.style.setProperty(b,a,null)});else typeof b==="object"&&this.forEach(function(a){var c=";",d;for(d in b)b[d]===null?a.style.removeProperty(d):c+=d+":"+b[d]+";";a.style.cssText+=c});return this},addClass:function(a){this.forEach(function(c){c.className===""?c.className=a:c.className+=" "+a});return this},removeClass:function(a){var c=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(a){var b=a.className.replace(c,"");a.className=b.replace(/\s+$/,"")});return this},
hasClass:function(a){var c=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(c):this.map(function(a){return!!a.className.match(c)})},swapClass:function(a,c){this.removeClass(a);this.addClass(c)},bind:function(a,d,f){this.forEach(function(e){var g=e.nid||(e.nid=m++),g=c[g]||(c[g]=[]);g.push({event:a,callback:d,index:g.length});e.addEventListener(a,d,f||!1)});return this},unbind:function(b){this.forEach(function(d){var f=d.nid||(d.nid=m++),e=b?a(c[f],b):c[f];e&&e.forEach(function(a){delete e[a.index];
d.removeEventListener(a.event,a.callback,!1)})});return this},delegate:function(a,c,d){this.bind(c,function(c){var e=f(a,this).detect(function(a){a=a.compareDocumentPosition(c.target);return a===0||a&Node.DOCUMENT_POSITION_CONTAINED_BY});e&&d.call(e,c)})}};e.addEventListener("DOMContentLoaded",function(){l=!0},!1);f.fn.__proto__=[];f.id=function(a,c){return k(a,c,"getElementById")};f.cls=function(a,c){return k(a,c,"getElementsByClassName")};f.tag=function(a,c){return k(a,c,"getElementsByTagName")};
f.ajax=function(a,c,e,f){var g=new XMLHttpRequest,f=f||{},c=c||function(){},e=e||function(){},m=f.method||"GET",h=f.header||{},l=f.ctype||(m==="POST"?"application/x-www-form-urlencoded":""),f=f.data||"",i;g.onreadystatechange=function(){g.readyState===4&&(g.status>=200&&g.status<300?c(g.responseText,g):e(g))};typeof f==="object"&&(f=d(f));g.open(m,a,!0);l&&g.setRequestHeader("Content-Type",l);g.setRequestHeader("X-Requested-With","XMLHttpRequest");for(i in h)g.setRequestHeader(i,h[i]);g.send(f)};
f.version="0.2.9";window.r=f})(document,Array.prototype.slice,encodeURIComponent);(function(e,j,g){e.r.load=function(f,e){var i=0,h=f.length;f.forEach(function(a){var d=j.createElement("script");d.src=a;d.onload=function(){d.removeAttribute("onload");++i===h&&e()};g.appendChild(d)})}})(window,document,document.getElementsByTagName("head")[0]);(function(e,j,g){function f(f,a){var d=a;if(typeof f!=="function")throw Error("First parameter should be function");if(typeof a==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(a){d=f(d,a)});return d}function k(){return this.replace(/(^\s+)|(\s+$)/g,"")}function i(f){return eval("("+f+")")}if(typeof j.reduce!=="function")j.reduce=f;if(typeof g.trim!=="function")g.trim=k;if(typeof e.JSON!=="object")e.JSON={},e.JSON.parse=i})(window,Array.prototype,String.prototype);(function(){function e(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function j(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function g(a,d,c){var e="0.3s",g="ease-in-out",
b,i=0,h={};d instanceof Array?(h["-webkit-transform"]=d.join(" "),b=1):typeof d==="object"&&(b=f(d,h));if(typeof c==="object"){typeof c.duration==="string"?e=c.duration:typeof c.duration==="number"&&(e=c.duration+"s");if(typeof c.easing==="string")g=c.easing;typeof c.callback==="function"&&a.bind("webkitTransitionEnd",function(d){++i;b===i&&(c.callback(d),a.unbind("webkitTransitionEnd"))})}h["-webkit-transition"]=e+" "+g;h["-webkit-backface-visibility"]="hidden";h["-webkit-perspective"]="1000";a.css(h)}
function f(a,d){var c,f=0;for(c in a)d[c]=a[c],f++;return f}var k="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,i="translate"+(k?"3d(":"("),h=k?",0)":")";r.fn.animate=function(a,d){var c=0,f=this.length,e=d||{},b=typeof e.callback==="function"?e.callback:function(){};e.callback=function(){++c;c===f&&b()};this.each(function(c){g(c,a,e)})};r.fn.scale=function(a,d,c){this.animate(["scale("+a+","+d+")"],c)};r.fn.scaleR=function(a,d,c){var f=j(this);this.animate(["scale("+f.x*a+","+f.y*d+")"],
c)};r.fn.scaleX=function(a,d){var c=j(this);this.animate(["scale("+a+","+c.y+")"],d)};r.fn.scaleRX=function(a,d){var c=j(this);this.animate(["scale("+c.x*a+","+c.y+")"],d)};r.fn.scaleY=function(a,d){this.animate(["scale("+j(this).x+","+yScale+")"],d)};r.fn.scaleRY=function(a,d){var c=j(this);this.animate(["scale("+c.x+","+c.y*a+")"],d)};r.fn.move=function(a,d,c){typeof a==="number"&&typeof d==="number"?this.animate([i+a+"px,"+d+"px"+h],c):typeof a==="string"&&typeof d==="string"&&this.animate([i+
a+","+d+h],c)};r.fn.moveR=function(a,d,c){var f=e(this);this.animate([i+(f.x+a)+"px,"+(f.y+d)+"px"+h],c)};r.fn.moveX=function(a,d){var c=e(this);typeof a==="number"?this.animate([i+a+"px,"+c.y+"px"+h],d):typeof a==="string"&&this.animate([i+a+","+c.y+h],d)};r.fn.moveRX=function(a,d,c){d=e(this);this.animate([i+(d.x+a)+"px,"+d.y+"px"+h],c)};r.fn.moveY=function(a,d){var c=e(this);typeof a==="number"?this.animate([i+c.x+"px,"+a+"px"+h],d):typeof a==="string"&&this.animate([i+c.x+"px,"+a+h],d)};r.fn.moveRY=
function(a,d){var c=e(this);this.animate([i+c.x+"px,"+(c.y+a)+"px"+h],d)};r.fn.fadeIn=function(a){this.animate({opacity:1},a)};r.fn.fadeOut=function(a){this.animate({opacity:0},a)};r.fn.show=function(a){this.animate({visibility:"visible"},a)};r.fn.hide=function(a){this.animate({visibility:"hidden"},a)}})();r(function(){var e,j,g,f,k,i,h;function a(a,d,f,b){var e=document.createEvent("MouseEvent");e.initMouseEvent(d,!0,!0,window,null,f,b);a.dispatchEvent(e)}var d=document.body;e=void 0;j=void 0;g=void 0;f=void 0;k=void 0;i=void 0;h=void 0;r(d).bind("touchstart",function(a){j=a.changedTouches[0].clientX;g=a.changedTouches[0].clientY;f={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};e=a.changedTouches[0].target;k=Date.now()},!0);r(d).bind("touchmove",function(c){var d,g;d=c.changedTouches[0].clientX-
f.x;g=c.changedTouches[0].clientY-f.y;var b;b=r(e).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);b=b===null?{x:0,y:0,z:0}:{x:Number(b[1]),y:Number(b[2]),z:Number(b[3])};d=b.x+d;g=b.y+g;a(e,"drag",1.6*d,1.6*g);f.x=c.changedTouches[0].clientX;f.y=c.changedTouches[0].clientY;i=c.changedTouches[0].clientX;h=c.changedTouches[0].clientY;c.preventDefault()},!0);r(d).bind("touchend",function(c){var d=j-i,l=g-h,b=Math.abs(d),n=Math.abs(l);k&&Date.now()-k>1E3?(e=void 0,
j=void 0,g=void 0,f=void 0,k=void 0,i=void 0,h=void 0):(n>30&&n>b?(c.preventDefault(),l>=0?a(e,"swipeup",d,l):a(e,"swipedown",d,l)):b>30&&b>n&&(c.preventDefault(),d>=0?a(e,"swipeleft",d,l):a(e,"swiperight",d,l)),j=0,i=0,g=0,h=0,e=null,f=void 0,k=void 0)},!0);r(d).bind("touchcancel",function(){j=0;i=0;g=0;h=0;e=null;f=void 0;k=void 0},!0);["swipeleft","swiperight","swipeup","swipedown"].forEach(function(a){r.fn[a]=function(d,f){this.bind(a,d,f)}})});(function(){function e(e){this.storage=e}function j(g){return j.sname||(j.sname=new e(window[g+"Storage"]))}e.prototype.set=function(e,f){if(typeof e==="number"||typeof e==="string")this.storage.setItem(e,JSON.stringify(f));else if(typeof f==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};e.prototype.get=function(e){return typeof this.storage[e]==="undefined"?null:JSON.parse(this.storage.getItem(e))};
e.prototype.clear=function(){this.storage.clear()};e.prototype.size=function(){return this.storage.length};e.prototype.keys=function(){var e=[],f;for(f in this.storage)e.push(f);return e};e.prototype.values=function(){var e=[],f;for(f in this.storage)e.push(this.get(f));return e};r.storage=j})();
