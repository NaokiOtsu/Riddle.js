/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(e,j,i){function d(a,c){if(typeof a==="string")return k(a,c,"querySelectorAll");else if(a instanceof Array)return h(a);else if(typeof a.addEventListener==="function")return h(g(a));else typeof a==="function"&&(n?a(d):e.addEventListener("DOMContentLoaded",function(){a(d)},!1))}function k(a,c,b){var f=[];if(c===void 0||c instanceof HTMLElement)return h(g((c||e)[b](a)));else if(d.isR(c))return c.map(function(f){return g(f[b](a))}).forEach(function(b){b.forEach(function(b){f.push(b)})}),h(f)}
function g(a){if(a===null||a===void 0)return[];else if(a instanceof HTMLElement)return[a];else if(typeof a.length==="number"&&typeof a.item==="function")return j.call(a)}function h(a){a.__proto__=d.fn;return a}var m={},l=1,n=!1;e.addEventListener("DOMContentLoaded",function(){n=!0},!1);d.fn={detect:function(a){return this.filter(a)[0]},invoke:function(){var a=j.call(arguments),c=a.shift();return this.map(function(b){return b[c].apply(b,a)})},pluck:function(a){return this.map(function(c){return c[a]})},
each:function(a){return this.forEach(function(c){a(h(g(c)))})},html:function(a){var c;if(a===void 0)return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(b){return b});else typeof a==="string"||typeof a==="number"?this.forEach(function(b){b.innerHTML=a}):a instanceof HTMLElement?this.forEach(function(b){b.innerHTML=a.outerHTML}):d.isR(a)&&(c=a.map(function(b){return b.outerHTML}).join(""),this.forEach(function(b){b.innerHTML=c}));return this},remove:function(){this.forEach(function(a){a.parentNode instanceof
HTMLElement&&a.parentNode.removeChild(a)});return this},add:function(a){var c;typeof a==="string"?this.forEach(function(b){b.insertAdjacentHTML("beforeEnd",a)}):a instanceof HTMLElement?this.forEach(function(b){b.appendChild(a)}):d.isR(a)&&(c=e.createDocumentFragment(),a.forEach(function(b){c.appendChild(b)}),this.forEach(function(b){b.appendChild(c)}));return this},attr:function(a,c){if(typeof a==="string")if(c===void 0)return this.length===1?this[0].getAttribute(a):this.invoke("getAttribute",a);
else c===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(c));else typeof a==="object"&&this.forEach(function(b){for(var f in a)a[f]===null?b.removeAttribute(f):b.setAttribute(f,String(a[f]))});return this},css:function(a,c){if(typeof a==="string")if(c===void 0)return this.length===1?getComputedStyle(this[0],null).getPropertyValue(a):this.map(function(b){return getComputedStyle(b,null).getPropertyValue(a)});else c===null?this.forEach(function(b){b.style.removeProperty(a)}):
this.forEach(function(b){b.style.setProperty(a,c,null)});else typeof a==="object"&&this.forEach(function(b){var f=";",c;for(c in a)a[c]===null?b.style.removeProperty(c):f+=c+":"+a[c]+";";b.style.cssText+=f});return this},addClass:function(a){this.forEach(function(c){c.className===""?c.className=a:c.className+=" "+a});return this},removeClass:function(a){var c=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(b){var a=b.className.replace(c,"");b.className=a.replace(/\s+$/,"")});return this},
hasClass:function(a){var c=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(c):this.map(function(b){return!!b.className.match(c)})},toggleClass:function(a,c){c===void 0?this.hasClass(a)?this.removeClass(a):this.addClass(a):this.hasClass(a)?(this.removeClass(a),this.addClass(c)):(this.removeClass(c),this.addClass(a))},bind:function(a,c,b){this.forEach(function(f){var o=f.__nid||(f.__nid=l++),o=m[o]||(m[o]=[]);o.push({event:a,callback:c,index:o.length});f.addEventListener(a,
c,b||!1)});return this},unbind:function(a){function c(b,a){return b.filter(function(b){return b.event===a})}this.forEach(function(b){var f=b.__nid||(b.__nid=l++),o=a?c(m[f],a):m[f];o&&o.forEach(function(a){delete o[a.index];b.removeEventListener(a.event,a.callback,!1)})});return this},delegate:function(a,c,b){this.bind(c,function(f){var c=d(a,this).detect(function(b){b=b.compareDocumentPosition(f.target);return b===0||b&Node.DOCUMENT_POSITION_CONTAINED_BY});c&&b.call(c,f)})}};d.fn.__proto__=[];d.ajax=
function(a,c,b,f){function o(b){var a=[],f;for(f in b)a.push(i(f)+"="+i(b[f]));return a.join("&")}var d=new XMLHttpRequest,f=f||{},c=c||function(){},b=b||function(){},e=f.method||"GET",n=f.header||{},h=f.ctype||(e==="POST"?"application/x-www-form-urlencoded":""),f=f.data||"",g;d.onreadystatechange=function(){d.readyState===4&&(d.status>=200&&d.status<300?c(d.responseText,d):b(d))};typeof f==="object"&&(f=o(f));d.open(e,a,!0);h&&d.setRequestHeader("Content-Type",h);d.setRequestHeader("X-Requested-With",
"XMLHttpRequest");for(g in n)d.setRequestHeader(g,n[g]);d.send(f)};d.id=function(a,c){return k(a,c,"getElementById")};d.cls=function(a,c){return k(a,c,"getElementsByClassName")};d.tag=function(a,c){return k(a,c,"getElementsByTagName")};d.isR=function(a){return a.__proto__===d.fn};d.version="0.3.0";window.r=d})(document,Array.prototype.slice,encodeURIComponent);(function(e,j,i){e.r.load=function(d,e){var g=0,h=d.length;d.forEach(function(d){var l=j.createElement("script");l.src=d;l.onload=function(){l.removeAttribute("onload");++g===h&&e()};i.appendChild(l)})}})(window,document,document.getElementsByTagName("head")[0]);(function(e,j,i){function d(d,e){var i=e;if(typeof d!=="function")throw Error("First parameter should be function");if(typeof e==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(e){i=d(i,e)});return i}function k(){return this.replace(/(^\s+)|(\s+$)/g,"")}function g(d){return eval("("+d+")")}if(typeof j.reduce!=="function")j.reduce=d;if(typeof i.trim!=="function")i.trim=k;if(typeof e.JSON!=="object")e.JSON={},e.JSON.parse=g})(window,Array.prototype,String.prototype);(function(){r.fn.union=function(e){return e.__proto__===r.fn?r(this.concat(e)):this}})();(function(){function e(b){b=b.css("-webkit-transform");b=typeof b==="string"?b.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return b!==null&&b.length===3?{x:Number(b[1]),y:Number(b[2])}:{x:0,y:0}}function j(b){b=b.css("-webkit-transform");b=typeof b==="string"?b.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return b!==null&&b.length===3?{x:Number(b[1]),y:Number(b[2])}:{x:1,y:1}}function i(b){b=String(b).match(/(\d+(?:\.\d+)?)(m?)(s?)/);
return b[2]===""&&b[3]==="s"?Number(b[1])*1E3:b[2]==="m"&&b[3]==="s"?Number(b[1]):300}function d(b,f,d){var e=d||{},i=e.duration||a,e=e.easing||c,g,n=0,h={};f instanceof Array?(h["-webkit-transform"]=f.join(" "),g=1):typeof f==="object"&&(g=k(f,h));typeof d.callback==="function"&&b.waitTransitionEnd(i,function(){++n;g===n&&d.callback()});h["-webkit-transition"]=i+" "+e;h["-webkit-backface-visibility"]="hidden";h["-webkit-perspective"]="1000";b.css(h)}function k(b,a){var c,d=0;for(c in b)a[c]=b[c],
d++;return d}function g(b,a){return"scale("+b+","+a+")"}function h(b,a){if(typeof b==="number"&&typeof a==="number")return l+b+"px,"+a+"px"+n;else if(typeof b==="string"&&typeof a==="string")return l+b+","+a+n}var m="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,l="translate"+(m?"3d(":"("),n=m?",0)":")",a="0.3s",c="ease-in-out";r.fn.animate=function(b,a){var c=0,e=this.length,i=a||{},g=i.callback||function(){};i.callback=function(){++c;c===e&&g()};this.each(function(a){d(a,b,i)})};r.fn.scale=
function(b,a,c){this.animate([g(b,a)],c)};r.fn.scaleR=function(b,a,c){var d=j(this);this.animate([g(d.x*b,d.y*a)],c)};r.fn.scaleX=function(b,a){var c=j(this);this.animate([g(b,c.y)],a)};r.fn.scaleRX=function(b,a){var c=j(this);this.animate([g(c.x*b,c.y)],a)};r.fn.scaleY=function(b,a){var c=j(this);this.animate([g(c.x,yScale)],a)};r.fn.scaleRY=function(b,a){var c=j(this);this.animate([g(c.x,c.y*b)],a)};r.fn.move=function(b,a,c){this.animate([h(b,a)],c)};r.fn.moveR=function(b,a,c){var d=e(this);this.animate([h(d.x+
b,d.y+a)],c)};r.fn.moveX=function(b,a){var c=e(this);this.animate([h(b,c.y)],a)};r.fn.moveRX=function(b,a,c){a=e(this);this.animate([h(a.x+b,a.y)],c)};r.fn.moveY=function(a,c){var d=e(this);this.animate([h(d.x,a)],c)};r.fn.moveRY=function(a,c){var d=e(this);this.animate([h(d.x,d.y+a)],c)};r.fn.fadeIn=function(a){var c=this;this.show();setTimeout(function(){c.animate({opacity:1},a)},0)};r.fn.fadeOut=function(a){var c=this;this.animate({opacity:0},a);this.waitTransitionEnd(typeof a==="object"?a.duration:
null,function(){c.hide()},!0)};r.fn.show=function(a){this.animate({display:"block"},a)};r.fn.hide=function(a){this.animate({display:"none"},a)};r.fn.waitTransitionEnd=function(b,c,d){var e=this,g,h,b=b||a;g=function(a,b){clearTimeout(b);c();d&&e.unbind("webkitTransitionEnd")};h=setTimeout(function(){g(null,h)},i(b)+200);e.bind("webkitTransitionEnd",g)}})();r(function(){function e(d,a,c,b){var e=document.createEvent("MouseEvent");e.initMouseEvent(a,!0,!0,window,null,c,b);d.dispatchEvent(e)}var j=document.body,i,d,k,g,h,m,l;r(j).bind("touchstart",function(e){i=e.changedTouches[0].clientX;d=e.changedTouches[0].clientY;k={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};g=e.changedTouches[0].target;h=Date.now()},!0);r(j).bind("touchmove",function(d){var a,c;a=d.changedTouches[0].clientX-k.x;c=d.changedTouches[0].clientY-k.y;var b;b=r(d.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);
b=b===null?{x:0,y:0,z:0}:{x:Number(b[1]),y:Number(b[2]),z:Number(b[3])};a=b.x+a;c=b.y+c;e(g,"drag",1.6*a,1.6*c);k.x=d.changedTouches[0].clientX;k.y=d.changedTouches[0].clientY;m=d.changedTouches[0].clientX;l=d.changedTouches[0].clientY;d.preventDefault()},!0);r(j).bind("touchend",function(j){var a=i-m,c=d-l,b=Math.abs(a),f=Math.abs(c);h&&Date.now()-h>1E3?(i=void 0,d=void 0,k=void 0,g=void 0,h=void 0,m=void 0,l=void 0):(f>30&&f>b?(j.preventDefault(),c>=0?e(g,"swipeup",a,c):e(g,"swipedown",a,c)):b>
30&&b>f&&(j.preventDefault(),a>=0?e(g,"swipeleft",a,c):e(g,"swiperight",a,c)),i=0,m=0,d=0,l=0,g=null,k=void 0,h=void 0)},!0);r(j).bind("touchcancel",function(){i=0;m=0;d=0;l=0;g=null;k=void 0;h=void 0},!0)});(function(){function e(e){this.storage=e}function j(i){return j.sname||(j.sname=new e(window[i+"Storage"]))}e.prototype.set=function(e,d){if(typeof e==="number"||typeof e==="string")this.storage.setItem(e,JSON.stringify(d));else if(typeof d==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};e.prototype.get=function(e){return typeof this.storage[e]==="undefined"?null:JSON.parse(this.storage.getItem(e))};
e.prototype.clear=function(){this.storage.clear()};e.prototype.size=function(){return this.storage.length};e.prototype.keys=function(){var e=[],d;for(d in this.storage)e.push(d);return e};e.prototype.values=function(){var e=[],d;for(d in this.storage)e.push(this.get(d));return e};r.storage=j})();
