/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(e,h,i){function d(c,a){if(typeof c==="string")return k(c,a,"querySelectorAll");else if(c instanceof HTMLElement)return j(g(c));else typeof c==="function"&&(n?c(d):e.addEventListener("DOMContentLoaded",function(){c(d)},!1))}function k(c,a,b){if(typeof a==="undefined"||a instanceof HTMLElement)return j(g((a||e)[b](c)));else if(a.__proto__===d.fn){var f=[];a.map(function(a){return g(a[b](c))}).forEach(function(c){c.forEach(function(c){f.push(c)})});return j(f)}}function g(c){if(c===null)return[];
else if(c instanceof HTMLElement)return[c];else if(typeof c.length==="number"&&typeof c.item==="function")return h.call(c)}function j(c){c.__proto__=d.fn;return c}function a(c,b){var f,e=b||"last";typeof c==="string"?this.forEach(function(b){a[e](b,c)}):c instanceof HTMLElement?(f=c.outerHTML,this.forEach(function(c){a[e](c,f)})):c.__proto__===d.fn&&(f=c.map(function(c){return c.outerHTML}).join(""),this.forEach(function(c){a[e](c,f)}));return this}function f(c,a){return c.filter(function(c){return c.event===
a})}function b(c){var a=[],b;for(b in c)a.push(i(b)+"="+i(c[b]));return a.join("&")}var l={},m=1,o,n=!1;d.fn={detect:function(c){return this.filter(c)[0]},invoke:function(){var c=h.call(arguments),a=c.shift();return this.map(function(b){return b[a].apply(b,c)})},pluck:function(c){return this.map(function(a){return a[c]})},each:function(c){return this.forEach(function(a){c(j(g(a)))})},html:function(c){var a;if(typeof c==="undefined")return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(c){return c});
else typeof c==="string"||typeof c==="number"?this.forEach(function(a){a.innerHTML=c}):c instanceof HTMLElement?this.forEach(function(a){a.innerHTML=c.outerHTML}):c.__proto__===d.fn&&(a=c.map(function(c){return c.outerHTML}).join(""),this.forEach(function(c){c.innerHTML=a}));return this},add:a,remove:function(){this.forEach(function(c){c.parentNode.removeChild(c)});return this},attr:function(c,a){if(typeof c==="string")if(typeof a==="undefined")return this.length===1?this[0].getAttribute(c):this.invoke("getAttribute",
c);else a===null?this.invoke("removeAttribute",c):this.invoke("setAttribute",c,String(a));else typeof c==="object"&&this.forEach(function(a){for(var b in c)c[b]===null?a.removeAttribute(b):a.setAttribute(b,String(c[b]))});return this},css:function(c,a){if(typeof c==="string")if(typeof a==="undefined")return this.length===1?getComputedStyle(this[0],"").getPropertyValue(c):this.map(function(a){return getComputedStyle(a,"").getPropertyValue(c)});else a===null?this.forEach(function(a){a.style.removeProperty(c)}):
this.forEach(function(b){b.style.setProperty(c,a,"")});else typeof c==="object"&&this.forEach(function(a){var b=";",f;for(f in c)c[f]===null?a.style.removeProperty(f):b+=f+":"+c[f]+";";a.style.cssText+=b});return this},addClass:function(a){this.forEach(function(b){b.className===""?b.className=a:b.className+=" "+a});return this},removeClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(a){var c=a.className.replace(b,"");a.className=c.replace(/\s+$/,"")});return this},
hasClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(b):this.map(function(a){return!!a.className.match(b)})},swapClass:function(a,b){this.removeClass(a);this.addClass(b)},bind:function(a,b,f){this.forEach(function(d){var e=d.nid||(d.nid=m++),e=l[e]||(l[e]=[]);e.push({event:a,callback:b,index:e.length});d.addEventListener(a,b,f||!1)});return this},unbind:function(a){this.forEach(function(b){var d=b.nid||(b.nid=m++),e=a?f(l[d],a):l[d];e&&e.forEach(function(a){delete e[a.index];
b.removeEventListener(a.event,a.callback,!1)})});return this}};e.addEventListener("DOMContentLoaded",function(){o=d(e.body);n=!0},!1);d.fn.__proto__=[];a.prev=function(a,b){a.insertAdjacentHTML("beforeBegin",b)};a.first=function(a,b){a.insertAdjacentHTML("afterBegin",b)};a.last=function(a,b){a.insertAdjacentHTML("beforeEnd",b)};a.next=function(a,b){a.insertAdjacentHTML("afterEnd",b)};d.id=function(a,b){return k(a,b,"getElementById")};d.cls=function(a,b){return k(a,b,"getElementsByClassName")};d.tag=
function(a,b){return k(a,b,"getElementsByTagName")};d.ajax=function(a,f,e,d){var l=new XMLHttpRequest,d=d||{},f=f||function(){},e=e||function(){},i=d.method||"GET",j=d.header||{},m=d.ctype||(i==="POST"?"application/x-www-form-urlencoded":""),d=d.data||"",g;l.onreadystatechange=function(){l.readyState===4&&(l.status>=200&&l.status<300?f(l.responseText,l):e(l))};typeof d==="object"&&(d=b(d));l.open(i,a,!0);m&&l.setRequestHeader("Content-Type",m);l.setRequestHeader("X-Requested-With","XMLHttpRequest");
for(g in j)l.setRequestHeader(g,j[g]);l.send(d)};d.delegate=function(a,b,f){o.bind(b,function(b){d(a).detect(function(a){return a===b.target})&&f(b)})};d.version="0.2.8";window.r=d})(document,Array.prototype.slice,encodeURIComponent);(function(e,h,i){e.r.load=function(d,e){var g=0,j=d.length;d.forEach(function(a){var f=h.createElement("script");f.src=a;f.onload=function(){f.removeAttribute("onload");++g===j&&e()};i.appendChild(f)})}})(window,document,document.getElementsByTagName("head")[0]);(function(e,h,i){function d(d,a){var f=a;if(typeof d!=="function")throw Error("First parameter should be function");if(typeof a==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(a){f=d(f,a)});return f}function k(){return this.replace(/(^\s+)|(\s+$)/g,"")}function g(d){return eval("("+d+")")}if(typeof h.reduce!=="function")h.reduce=d;if(typeof i.trim!=="function")i.trim=k;if(typeof e.JSON!=="object")e.JSON={},e.JSON.parse=g})(window,Array.prototype,String.prototype);(function(){function e(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function h(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function i(a,f,b){var e="0.3s",i="ease-in-out",
g,j=0,c={};f instanceof Array?(c["-webkit-transform"]=f.join(" "),g=1):typeof f==="object"&&(g=d(f,c));if(typeof b==="object"){typeof b.duration==="string"?e=b.duration:typeof b.duration==="number"&&(e=b.duration+"s");if(typeof b.easing==="string")i=b.easing;typeof b.callback==="function"&&a.bind("webkitTransitionEnd",function(c){++j;g===j&&(b.callback(c),a.unbind("webkitTransitionEnd"))})}c["-webkit-transition"]=e+" "+i;c["-webkit-backface-visibility"]="hidden";c["-webkit-perspective"]="1000";c["-webkit-transform-origin"]=
"0 0";a.css(c)}function d(a,f){var b,d=0;for(b in a)f[b]=a[b],d++;return d}var k="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,g="translate"+(k?"3d(":"("),j=k?",0)":")";r.fn.animate=function(a,f){var b=0,d=this.length,e=f||{},g=typeof e.callback==="function"?e.callback:function(){};e.callback=function(){++b;b===d&&g()};this.each(function(b){i(b,a,e)})};r.fn.scale=function(a,f,b){this.animate(["scale("+a+","+f+")"],b)};r.fn.scaleR=function(a,f,b){var d=h(this);this.animate(["scale("+d.x*
a+","+d.y*f+")"],b)};r.fn.scaleX=function(a,f){var b=h(this);this.animate(["scale("+a+","+b.y+")"],f)};r.fn.scaleRX=function(a,f){var b=h(this);this.animate(["scale("+b.x*a+","+b.y+")"],f)};r.fn.scaleY=function(a,f){this.animate(["scale("+h(this).x+","+yScale+")"],f)};r.fn.scaleRY=function(a,f){var b=h(this);this.animate(["scale("+b.x+","+b.y*a+")"],f)};r.fn.move=function(a,f,b){typeof a==="number"&&typeof f==="number"?this.animate([g+a+"px,"+f+"px"+j],b):typeof a==="string"&&typeof f==="string"&&
this.animate([g+a+","+f+j],b)};r.fn.moveR=function(a,f,b){var d=e(this);this.animate([g+(d.x+a)+"px,"+(d.y+f)+"px"+j],b)};r.fn.moveX=function(a,d){var b=e(this);typeof a==="number"?this.animate([g+a+"px,"+b.y+"px"+j],d):typeof a==="string"&&this.animate([g+a+","+b.y+j],d)};r.fn.moveRX=function(a,d,b){d=e(this);this.animate([g+(d.x+a)+"px,"+d.y+"px"+j],b)};r.fn.moveY=function(a,d){var b=e(this);typeof a==="number"?this.animate([g+b.x+"px,"+a+"px"+j],d):typeof a==="string"&&this.animate([g+b.x+"px,"+
a+j],d)};r.fn.moveRY=function(a,d){var b=e(this);this.animate([g+b.x+"px,"+(b.y+a)+"px"+j],d)};r.fn.fadeIn=function(a){this.animate({opacity:1},a)};r.fn.fadeOut=function(a){this.animate({opacity:0},a)};r.fn.show=function(a){this.animate({visibility:"visible"},a)};r.fn.hide=function(a){this.animate({visibility:"hidden"},a)}})();r(function(){var e,h,i,d,k,g,j;function a(a,d,e,f){var i=document.createEvent("MouseEvent");i.initMouseEvent(d,!0,!0,window,null,e,f);a.dispatchEvent(i)}var f=document.body;e=void 0;h=void 0;i=void 0;d=void 0;k=void 0;g=void 0;j=void 0;r(f).bind("touchstart",function(a){h=a.changedTouches[0].clientX;i=a.changedTouches[0].clientY;d={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};e=a.changedTouches[0].target;k=Date.now()},!0);r(f).bind("touchmove",function(b){var f,i;f=b.changedTouches[0].clientX-
d.x;i=b.changedTouches[0].clientY-d.y;var h;h=r(e).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);h=h===null?{x:0,y:0,z:0}:{x:Number(h[1]),y:Number(h[2]),z:Number(h[3])};f=h.x+f;i=h.y+i;a(e,"drag",1.6*f,1.6*i);d.x=b.changedTouches[0].clientX;d.y=b.changedTouches[0].clientY;g=b.changedTouches[0].clientX;j=b.changedTouches[0].clientY;b.preventDefault()},!0);r(f).bind("touchend",function(b){var f=h-g,m=i-j,o=Math.abs(f),n=Math.abs(m);k&&Date.now()-k>1E3?(e=void 0,
h=void 0,i=void 0,d=void 0,k=void 0,g=void 0,j=void 0):(n>30&&n>o?(b.preventDefault(),m>=0?a(e,"swipeup",f,m):a(e,"swipedown",f,m)):o>30&&o>n&&(b.preventDefault(),f>=0?a(e,"swipeleft",f,m):a(e,"swiperight",f,m)),h=0,g=0,i=0,j=0,e=null,d=void 0,k=void 0)},!0);r(f).bind("touchcancel",function(){h=0;g=0;i=0;j=0;e=null;d=void 0;k=void 0},!0);["swipeleft","swiperight","swipeup","swipedown"].forEach(function(a){r.fn[a]=function(d,f){this.bind(a,d,f)}})});(function(){function e(e){this.storage=e}function h(i){return h.sname||(h.sname=new e(window[i+"Storage"]))}e.prototype.set=function(e,d){if(typeof e==="number"||typeof e==="string")this.storage.setItem(e,JSON.stringify(d));else if(typeof d==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};e.prototype.get=function(e){return typeof this.storage[e]==="undefined"?null:JSON.parse(this.storage.getItem(e))};
e.prototype.clear=function(){this.storage.clear()};e.prototype.size=function(){return this.storage.length};e.prototype.keys=function(){var e=[],d;for(d in this.storage)e.push(d);return e};e.prototype.values=function(){var e=[],d;for(d in this.storage)e.push(this.get(d));return e};r.storage=h})();
