/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(f,e,b,d,k,g){function c(a,m){if(typeof a==="string")return h(d.call((m||e).querySelectorAll(a)));else if(typeof a==="object"&&a!==null&&typeof a.addEventListener==="function")return h([a]);else if(b(a))return h(a);else if(typeof a==="function")c.domReady?a(c):e.addEventListener("DOMContentLoaded",function(){a(c)},!1),c.init=a}function h(a){a.__proto__=c.fn;return a}c.listeners={};c.__nid=1;c.domReady=!1;e.addEventListener("DOMContentLoaded",function(){c.domReady=!0},!1);c.fn={detect:function(a){return this.filter(a)[0]},
invoke:function(){var a=d.call(arguments),c=a.shift();return this.map(function(b){return b[c].apply(b,a)})},pluck:function(a){return this.map(function(c){return c[a]})},each:function(a){return this.forEach(function(c){a(h([c]))})},html:function(a){return a===g?this[0].innerHTML:(typeof a==="string"||typeof a==="number"?this.forEach(function(c){c.innerHTML=a}):a instanceof HTMLElement?this.forEach(function(c){c.innerHTML=a.outerHTML}):c.isR(a)&&this.forEach(function(c){c.innerHTML=a[0].outerHTML}),
this)},remove:function(){this.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)});return this},add:function(a){var b;typeof a==="string"||typeof a==="number"?this.forEach(function(c){c.insertAdjacentHTML("beforeEnd",a)}):a instanceof HTMLElement?this.forEach(function(c){c.appendChild(a)}):c.isR(a)&&(b=e.createDocumentFragment(),a.forEach(function(a){b.appendChild(a)}),this.forEach(function(a){a.appendChild(b)}));return this},attr:function(a,c){if(typeof a==="string")if(c===g)return this[0].getAttribute(a);
else c===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(c));else typeof a==="object"&&this.forEach(function(c){for(var b in a)a[b]===null?c.removeAttribute(b):c.setAttribute(b,String(a[b]))});return this},css:function(a,c){if(typeof a==="string")if(c===g)return getComputedStyle(this[0],null).getPropertyValue(a);else c===null?this.forEach(function(c){c.style.removeProperty(a)}):this.forEach(function(b){b.style.setProperty(a,c,null)});else typeof a==="object"&&this.forEach(function(c){var b=
";",j;for(j in a)a[j]===null?c.style.removeProperty(j):b+=j+":"+a[j]+";";c.style.cssText+=b});return this},addClass:function(a){this.forEach(function(b){var d;if(!c(b).hasClass(a))d=b.className.split(" "),d.push(a),b.className=d.join(" ")});return this},removeClass:function(a){this.forEach(function(c){var b=c.className.split(" ");c.className=b.filter(function(c){return c!==a}).join(" ")});return this},hasClass:function(a){return!!this[0].className.match(RegExp("(?:^|\\b)"+a+"(?:\\b|$)"))},toggleClass:function(a){this.hasClass(a)?
this.removeClass(a):this.addClass(a)},bind:function(a,b,d){var e=a.split(" ");this.forEach(function(a){var i=c.nodeId(a),l=c.listeners[i]||(c.listeners[i]=[]);e.forEach(function(c){l.push({event:c,callback:b,index:l.length,useCapture:d||!1});a.addEventListener(c,b,d||!1)})});return this},unbind:function(a){function b(a,c){return a.filter(function(a){return a.event===c})}this.forEach(function(d){var e=c.nodeId(d),j=a?b(c.listeners[e]||[],a):c.listeners[e];j&&j.forEach(function(a){delete j[a.index];
d.removeEventListener(a.event,a.callback,a.useCapture)})});return this},trigger:function(a){e.createEvent("Event").initEvent(a,!0,!0);this.forEach(function(a){a.dispatchEvent(event)});return this}};c.fn.__proto__=[];c.ajax=function(a,c,b,d){function j(a){var c=[],b;for(b in a)c.push(k(b)+"="+k(a[b]));return c.join("&")}var i=new XMLHttpRequest,d=d||{},c=c||function(){},b=b||function(){},l=d.method||"GET",e=d.header||{},g=d.ctype||(l==="POST"?"application/x-www-form-urlencoded":""),d=d.data||"",f;
i.onreadystatechange=function(){i.readyState===4&&(i.status>=200&&i.status<300?c(i.responseText,i):b(i))};typeof d==="object"&&(d=j(d));i.open(l,a,!0);g&&i.setRequestHeader("Content-Type",g);i.setRequestHeader("X-Requested-With","XMLHttpRequest");for(f in e)i.setRequestHeader(f,e[f]);i.send(d);return i};c.id=function(a,c){var b=(c||e).getElementById(a);return b?h([b]):h([])};c.cls=function(a,c){return h((c||e).getElementsByClassName(a))};c.tag=function(a,c){return h((c||e).getElementsByTagName(a))};
c.nodeId=function(a){return a.__nid||(a.__nid=c.__nid++)};c.isR=function(a){return a.__proto__===c.fn};c.version="0.4.0";f.r=c})(this,document,Array.isArray,Array.prototype.slice,encodeURIComponent);(function(f,e,b){f.r.load=function(d,f){var g=0,c=d.length;d.forEach(function(d){var a=e.createElement("script");a.src=d;a.onload=function(){a.removeAttribute("onload");++g===c&&f()};b.appendChild(a)})}})(window,document,document.getElementsByTagName("head")[0]);(function(){function f(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function e(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function b(a){a=String(a).match(/(\d+(?:\.\d+)?)(m?)(s?)/);
return a[2]===""&&a[3]==="s"?Number(a[1])*1E3:a[2]==="m"&&a[3]==="s"?Number(a[1]):300}function d(a,c,b){var d=b||{},e=d.duration||n,d=d.easing||o,g,f=0,h={};c instanceof Array?(h["-webkit-transform"]=c.join(" "),g=1):typeof c==="object"&&(g=k(c,h));typeof b.callback==="function"&&a.waitTransitionEnd(e,function(){++f;g===f&&b.callback()});h["-webkit-transition"]=e+" "+d;h["-webkit-backface-visibility"]="hidden";h["-webkit-perspective"]="1000";a.css(h)}function k(a,c){var b,d=0;for(b in a)c[b]=a[b],
d++;return d}function g(a,c){return"scale("+a+","+c+")"}function c(c,b){if(typeof c==="number"&&typeof b==="number")return a+c+"px,"+b+"px"+m;else if(typeof c==="string"&&typeof b==="string")return a+c+","+b+m}var h="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,a="translate"+(h?"3d(":"("),m=h?",0)":")",n="0.3s",o="ease-in-out";r.fn.animate=function(a,c){var b=0,e=this.length,g=c||{},f=g.callback||function(){};g.callback=function(){++b;b===e&&f()};this.each(function(c){d(c,a,g)})};r.fn.scale=
function(a,c,b){this.animate([g(a,c)],b)};r.fn.scaleR=function(a,c,b){var d=e(this);this.animate([g(d.x*a,d.y*c)],b)};r.fn.scaleX=function(a,c){var b=e(this);this.animate([g(a,b.y)],c)};r.fn.scaleRX=function(a,c){var b=e(this);this.animate([g(b.x*a,b.y)],c)};r.fn.scaleY=function(a,c){var b=e(this);this.animate([g(b.x,yScale)],c)};r.fn.scaleRY=function(a,c){var b=e(this);this.animate([g(b.x,b.y*a)],c)};r.fn.move=function(a,b,d){this.animate([c(a,b)],d)};r.fn.moveR=function(a,b,d){var e=f(this);this.animate([c(e.x+
a,e.y+b)],d)};r.fn.moveX=function(a,b){var d=f(this);this.animate([c(a,d.y)],b)};r.fn.moveRX=function(a,b,d){b=f(this);this.animate([c(b.x+a,b.y)],d)};r.fn.moveY=function(a,b){var d=f(this);this.animate([c(d.x,a)],b)};r.fn.moveRY=function(a,b){var d=f(this);this.animate([c(d.x,d.y+a)],b)};r.fn.fadeIn=function(a){var c=this;this.show();setTimeout(function(){c.animate({opacity:1},a)},0)};r.fn.fadeOut=function(a){var c=this;this.animate({opacity:0},a);this.waitTransitionEnd(typeof a==="object"?a.duration:
null,function(){c.hide()},!0)};r.fn.show=function(a){this.animate({display:"block"},a)};r.fn.hide=function(a){this.animate({display:"none"},a)};r.fn.waitTransitionEnd=function(a,c,d){var e=this,g,f,a=a||n;g=function(a,b){clearTimeout(b);c();d&&e.unbind("webkitTransitionEnd")};f=setTimeout(function(){g(null,f)},b(a)+200);e.bind("webkitTransitionEnd",g)}})();(function(){function f(e){var b=[],d=[];e.split(".").forEach(function(e){d.push(e);b.push(d.join("."))});return b}r.fn.delegate=function(e,b,d){this.bind(b,function(b){var g=r(e,this).detect(function(c){c=c.compareDocumentPosition(b.target);return c===0||c&Node.DOCUMENT_POSITION_CONTAINED_BY});g&&d.call(g,b)})};r.fn.bind=function(e,b,d){var f=e.split(" ");this.forEach(function(e){var c=getNodeId(e),h=listeners[c]||(listeners[c]=[]);f.forEach(function(a){h.push({event:a,callback:b,index:h.length,useCapture:d||
!1});e.addEventListener(a,b,d||!1)})});return this};r.fn.bind=function(e,b,d,k){this.forEach(function(b){var c=r.nodeId(b);events.forEach(function(e){var a=f(e);a.forEach(function(b){var e;e=a[0];r.listeners[c]=r.listeners[c]||{};b=r.listeners[c][b]||(r.listeners[c][b]=[]);b.push({name:e,actor:el,callback:d,index:b.length,useCapture:k||!1})});b.addEventListener(a[0],d,k||!1)})})}})();(function(f,e,b){function d(c,b){var a=b;if(typeof c!=="function")throw Error("First parameter should be function");if(typeof b==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(b){a=c(a,b)});return a}function k(){return this.replace(/(^\s+)|(\s+$)/g,"")}function g(c){return eval("("+c+")")}if(typeof e.reduce!=="function")e.reduce=d;if(typeof b.trim!=="function")b.trim=k;if(typeof f.JSON!=="object")f.JSON={},f.JSON.parse=g})(window,Array.prototype,String.prototype);r(function(){function f(b,e,f,c){var h=document.createEvent("MouseEvent");h.initMouseEvent(e,!0,!0,window,null,f,c);b.dispatchEvent(h)}var e=document.body,b={};r(e).bind("touchstart",function(d){b.x1=d.changedTouches[0].clientX;b.y1=d.changedTouches[0].clientY;b.position={x:d.changedTouches[0].clientX,y:d.changedTouches[0].clientY};b.target=d.changedTouches[0].target;b.startTime=Date.now()},!0);r(e).bind("touchmove",function(d){var e;e=d.changedTouches[0].clientX-b.position.x;var g=d.changedTouches[0].clientY-
b.position.y,c;c=r(d.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);c=c===null?{x:0,y:0,z:0}:{x:Number(c[1]),y:Number(c[2]),z:Number(c[3])};e={x:c.x+e,y:c.y+g};f(b.target,"drag",1.6*e.x,1.6*e.y);b.position.x=d.changedTouches[0].clientX;b.position.y=d.changedTouches[0].clientY;b.x2=d.changedTouches[0].clientX;b.y2=d.changedTouches[0].clientY;d.preventDefault()},!0);r(e).bind("touchend",function(d){var e=b.x1-b.x2,g=b.y1-b.y2,c=Math.abs(e),h=Math.abs(g);
b.startTime&&Date.now()-b.startTime>1E3?b={}:(h>30&&h>c?(d.preventDefault(),g>=0?f(b.target,"swipeup",e,g):f(b.target,"swipedown",e,g)):c>30&&c>h&&(d.preventDefault(),e>=0?f(b.target,"swipeleft",e,g):f(b.target,"swiperight",e,g)),b={x1:0,x2:0,y1:0,y2:0,target:null})},!0);r(e).bind("touchcancel",function(){b={x1:0,x2:0,y1:0,y2:0,target:null}},!0)});(function(){function f(b){this.storage=b}function e(b){return e.sname||(e.sname=new f(window[b+"Storage"]))}f.prototype.set=function(b,d){if(typeof b==="number"||typeof b==="string")this.storage.setItem(b,JSON.stringify(d));else if(typeof d==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};f.prototype.get=function(b){return typeof this.storage[b]==="undefined"?null:JSON.parse(this.storage.getItem(b))};
f.prototype.clear=function(){this.storage.clear()};f.prototype.size=function(){return this.storage.length};f.prototype.keys=function(){var b=[],d;for(d in this.storage)b.push(d);return b};f.prototype.values=function(){var b=[],d;for(d in this.storage)b.push(this.get(d));return b};r.storage=e})();
