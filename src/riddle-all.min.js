/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(f,d,b,e,i,g){function a(c,l){if(typeof c==="string")return h(e.call((l||d).querySelectorAll(c)));else if(typeof c==="object"&&c!==null&&typeof c.addEventListener==="function")return h([c]);else if(b(c))return h(c);else if(typeof c==="function")a.domReady?c(a):d.addEventListener("DOMContentLoaded",function(){c(a)},!1),a.init=c}function h(c){c.__proto__=a.fn;return c}a.listeners={};a.__nid=1;a.domReady=!1;d.addEventListener("DOMContentLoaded",function(){a.domReady=!0},!1);a.fn={html:function(c){return c===
g?this[0].innerHTML:(typeof c==="string"||typeof c==="number"?this.forEach(function(a){a.innerHTML=c}):c instanceof HTMLElement?this.forEach(function(a){a.innerHTML=c.outerHTML}):a.isR(c)&&this.forEach(function(a){a.innerHTML=c[0].outerHTML}),this)},remove:function(){this.forEach(function(c){c.parentNode&&c.parentNode.removeChild(c)});return this},add:function(c){var l;typeof c==="string"||typeof c==="number"?this.forEach(function(a){a.insertAdjacentHTML("beforeEnd",c)}):c instanceof HTMLElement?
this.forEach(function(a){a.appendChild(c)}):a.isR(c)&&(l=d.createDocumentFragment(),c.forEach(function(c){l.appendChild(c)}),this.forEach(function(c){c.appendChild(l)}));return this},attr:function(c,a){if(typeof c==="string")if(a===g)return this[0].getAttribute(c);else a===null?this.forEach(function(a){a.removeAttribute(c)}):this.forEach(function(b){b.setAttribute(c,String(a))});else typeof c==="object"&&this.forEach(function(a){for(var b in c)c[b]===null?a.removeAttribute(b):a.setAttribute(b,String(c[b]))});
return this},css:function(c,a){if(typeof c==="string")if(a===g)return getComputedStyle(this[0],null).getPropertyValue(c);else a===null?this.forEach(function(a){a.style.removeProperty(c)}):this.forEach(function(b){b.style.setProperty(c,a,null)});else typeof c==="object"&&this.forEach(function(a){var b=";",k;for(k in c)c[k]===null?a.style.removeProperty(k):b+=k+":"+c[k]+";";a.style.cssText+=b});return this},addClass:function(c){this.forEach(function(b){var d;if(!a(b).hasClass(c))d=b.className.split(" "),
d.push(c),b.className=d.join(" ")});return this},removeClass:function(c){this.forEach(function(a){var b=a.className.split(" ");a.className=b.filter(function(a){return a!==c}).join(" ")});return this},hasClass:function(a){return!!this[0].className.match(RegExp("(?:^|\\b)"+a+"(?:\\b|$)"))},toggleClass:function(a){this.hasClass(a)?this.removeClass(a):this.addClass(a)},bind:function(c,b,d){var e=c.split(" ");this.forEach(function(c){var j=a.nodeId(c),m=a.listeners[j]||(a.listeners[j]=[]);e.forEach(function(a){m.push({event:a,
callback:b,index:m.length,useCapture:d||!1});c.addEventListener(a,b,d||!1)})});return this},unbind:function(c){function b(a,c){return a.filter(function(a){return a.event===c})}this.forEach(function(d){var e=a.nodeId(d),k=c?b(a.listeners[e]||[],c):a.listeners[e];k&&k.forEach(function(a){delete k[a.index];d.removeEventListener(a.event,a.callback,a.useCapture)})});return this},trigger:function(a){var b=d.createEvent("Event");b.initEvent(a,!0,!0);this.forEach(function(a){a.dispatchEvent(b)});return this}};
a.fn.__proto__=[];a.ajax=function(a,b,d,e){function k(a){var c=[],k;for(k in a)c.push(i(k)+"="+i(a[k]));return c.join("&")}var j=new XMLHttpRequest,e=e||{},b=b||function(){},d=d||function(){},m=e.method||"GET",f=e.header||{},g=e.ctype||(m==="POST"?"application/x-www-form-urlencoded":""),e=e.data||"",h;j.onreadystatechange=function(){j.readyState===4&&(j.status>=200&&j.status<300?b(j.responseText,j):d(j))};typeof e==="object"&&(e=k(e));j.open(m,a,!0);g&&j.setRequestHeader("Content-Type",g);j.setRequestHeader("X-Requested-With",
"XMLHttpRequest");for(h in f)j.setRequestHeader(h,f[h]);j.send(e);return j};a.id=function(a,b){var e=(b||d).getElementById(a);return e?h([e]):h([])};a.cls=function(a,b){return h((b||d).getElementsByClassName(a))};a.tag=function(a,b){return h((b||d).getElementsByTagName(a))};a.nodeId=function(c){return c.__nid||(c.__nid=a.__nid++)};a.isR=function(c){return c.__proto__===a.fn};a.version="0.4.0";f.r=a})(this,document,Array.isArray||function(f){return f instanceof Array},Array.prototype.slice,encodeURIComponent);(function(){function f(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function d(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function b(a){a=String(a).match(/(\d+(?:\.\d+)?)(m?)(s?)/);
return a[2]===""&&a[3]==="s"?Number(a[1])*1E3:a[2]==="m"&&a[3]==="s"?Number(a[1]):300}function e(a,c,b){var e=b||{},d=e.duration||n,e=e.easing||o,f,g=0,h={};c instanceof Array?(h["-webkit-transform"]=c.join(" "),f=1):typeof c==="object"&&(f=i(c,h));typeof b.callback==="function"&&a.waitTransitionEnd(d,function(){++g;f===g&&b.callback()});h["-webkit-transition"]=d+" "+e;h["-webkit-backface-visibility"]="hidden";h["-webkit-perspective"]="1000";a.css(h)}function i(a,c){var b,e=0;for(b in a)c[b]=a[b],
e++;return e}function g(a,c){return"scale("+a+","+c+")"}function a(a,b){if(typeof a==="number"&&typeof b==="number")return c+a+"px,"+b+"px"+l;else if(typeof a==="string"&&typeof b==="string")return c+a+","+b+l}var h="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,c="translate"+(h?"3d(":"("),l=h?",0)":")",n="0.3s",o="ease-in-out";r.fn.animate=function(a,c){var b=0,d=this.length,f=c||{},g=f.callback||function(){};f.callback=function(){++b;b===d&&g()};this.each(function(c){e(c,a,f)})};r.fn.scale=
function(a,c,b){this.animate([g(a,c)],b)};r.fn.scaleR=function(a,c,b){var e=d(this);this.animate([g(e.x*a,e.y*c)],b)};r.fn.scaleX=function(a,c){var b=d(this);this.animate([g(a,b.y)],c)};r.fn.scaleRX=function(a,c){var b=d(this);this.animate([g(b.x*a,b.y)],c)};r.fn.scaleY=function(a,c){var b=d(this);this.animate([g(b.x,yScale)],c)};r.fn.scaleRY=function(a,c){var b=d(this);this.animate([g(b.x,b.y*a)],c)};r.fn.move=function(c,b,e){this.animate([a(c,b)],e)};r.fn.moveR=function(c,b,e){var d=f(this);this.animate([a(d.x+
c,d.y+b)],e)};r.fn.moveX=function(c,b){var e=f(this);this.animate([a(c,e.y)],b)};r.fn.moveRX=function(c,b,e){b=f(this);this.animate([a(b.x+c,b.y)],e)};r.fn.moveY=function(c,b){var e=f(this);this.animate([a(e.x,c)],b)};r.fn.moveRY=function(c,b){var e=f(this);this.animate([a(e.x,e.y+c)],b)};r.fn.fadeIn=function(a){var c=this;this.show();setTimeout(function(){c.animate({opacity:1},a)},0)};r.fn.fadeOut=function(a){var c=this;this.animate({opacity:0},a);this.waitTransitionEnd(typeof a==="object"?a.duration:
null,function(){c.hide()},!0)};r.fn.show=function(a){this.animate({display:"block"},a)};r.fn.hide=function(a){this.animate({display:"none"},a)};r.fn.waitTransitionEnd=function(a,c,e){var d=this,f,g,a=a||n;f=function(a,b){clearTimeout(b);c();e&&d.unbind("webkitTransitionEnd")};g=setTimeout(function(){f(null,g)},b(a)+200);d.bind("webkitTransitionEnd",f)}})();r.fn.each=function(f){return this.forEach(function(d){f(wrap([d]))})};r.fn.collect=function(f){return this.map(function(d){return f(wrap([d]))})};r.fn.any=function(f){return this.some(function(d){return f(wrap([d]))})};r.fn.all=function(f){return this.every(function(d){return f(wrap([d]))})};r.fn.fold=function(f,d){return this.reduce(function(b){return f(wrap([b]))},d)};r.fn.foldRight=function(f,d){return this.reduceRight(function(b){return f(wrap([b]))},d)};(function(){function f(d){var b=[],e=[];d.split(".").forEach(function(d){e.push(d);b.push(e.join("."))});return b}r.fn.delegate=function(d,b,e){this.bind(b,function(b){var f=r(d,this).detect(function(a){a=a.compareDocumentPosition(b.target);return a===0||a&Node.DOCUMENT_POSITION_CONTAINED_BY});f&&e.call(f,b)})};r.fn.bind=function(d,b,e){var f=d.split(" ");this.forEach(function(d){var a=getNodeId(d),h=listeners[a]||(listeners[a]=[]);f.forEach(function(a){h.push({event:a,callback:b,index:h.length,useCapture:e||
!1});d.addEventListener(a,b,e||!1)})});return this};r.fn.bind=function(d,b,e,i){this.forEach(function(b){var a=r.nodeId(b);events.forEach(function(d){var c=f(d);c.forEach(function(b){var d;d=c[0];r.listeners[a]=r.listeners[a]||{};b=r.listeners[a][b]||(r.listeners[a][b]=[]);b.push({name:d,actor:el,callback:e,index:b.length,useCapture:i||!1})});b.addEventListener(c[0],e,i||!1)})})}})();(function(f,d,b){function e(a,b){var c=b;if(typeof a!=="function")throw Error("First parameter should be function");if(typeof b==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(b){c=a(c,b)});return c}function i(){return this.replace(/(^\s+)|(\s+$)/g,"")}function g(a){return eval("("+a+")")}if(typeof d.reduce!=="function")d.reduce=e;if(typeof b.trim!=="function")b.trim=i;if(typeof f.JSON!=="object")f.JSON={},f.JSON.parse=g})(window,Array.prototype,String.prototype);r(function(){function f(b,d,f,a){var h=document.createEvent("MouseEvent");h.initMouseEvent(d,!0,!0,window,null,f,a);b.dispatchEvent(h)}var d=document.body,b={};r(d).bind("touchstart",function(e){b.x1=e.changedTouches[0].clientX;b.y1=e.changedTouches[0].clientY;b.position={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};b.target=e.changedTouches[0].target;b.startTime=Date.now()},!0);r(d).bind("touchmove",function(e){var d;d=e.changedTouches[0].clientX-b.position.x;var g=e.changedTouches[0].clientY-
b.position.y,a;a=r(e.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);a=a===null?{x:0,y:0,z:0}:{x:Number(a[1]),y:Number(a[2]),z:Number(a[3])};d={x:a.x+d,y:a.y+g};f(b.target,"drag",1.6*d.x,1.6*d.y);b.position.x=e.changedTouches[0].clientX;b.position.y=e.changedTouches[0].clientY;b.x2=e.changedTouches[0].clientX;b.y2=e.changedTouches[0].clientY;e.preventDefault()},!0);r(d).bind("touchend",function(d){var i=b.x1-b.x2,g=b.y1-b.y2,a=Math.abs(i),h=Math.abs(g);
b.startTime&&Date.now()-b.startTime>1E3?b={}:(h>30&&h>a?(d.preventDefault(),g>=0?f(b.target,"swipeup",i,g):f(b.target,"swipedown",i,g)):a>30&&a>h&&(d.preventDefault(),i>=0?f(b.target,"swipeleft",i,g):f(b.target,"swiperight",i,g)),b={x1:0,x2:0,y1:0,y2:0,target:null})},!0);r(d).bind("touchcancel",function(){b={x1:0,x2:0,y1:0,y2:0,target:null}},!0)});
