/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(f,g,d){function c(a,e){if(typeof a==="string")return l(a,e,"querySelectorAll");else if(a instanceof Array)return i(a);else if(typeof a==="object"&&a!==null&&typeof a.addEventListener==="function")return i(j(a));else typeof a==="function"&&(o?a(c):f.addEventListener("DOMContentLoaded",function(){a(c)},!1))}function l(a,e,b){var h=[];if(e===void 0||e instanceof HTMLElement)return i(j((e||f)[b](a)));else if(c.isR(e))return e.map(function(h){return j(h[b](a))}).forEach(function(b){b.forEach(function(b){h.push(b)})}),
i(h)}function j(a){if(a===null||a===void 0)return[];else if(a instanceof HTMLElement)return[a];else if(typeof a.length==="number"&&typeof a.item==="function")return g.call(a)}function i(a){a.__proto__=c.fn;return a}var m={},n=1,o=!1;f.addEventListener("DOMContentLoaded",function(){o=!0},!1);c.fn={detect:function(a){return this.filter(a)[0]},invoke:function(){var a=g.call(arguments),e=a.shift();return this.map(function(b){return b[e].apply(b,a)})},pluck:function(a){return this.map(function(e){return e[a]})},
each:function(a){return this.forEach(function(e){a(i(j(e)))})},html:function(a){var e;if(a===void 0)return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(b){return b});else typeof a==="string"||typeof a==="number"?this.forEach(function(b){b.innerHTML=a}):a instanceof HTMLElement?this.forEach(function(b){b.innerHTML=a.outerHTML}):c.isR(a)&&(e=a.map(function(b){return b.outerHTML}).join(""),this.forEach(function(b){b.innerHTML=e}));return this},remove:function(){this.forEach(function(a){a.parentNode instanceof
HTMLElement&&a.parentNode.removeChild(a)});return this},add:function(a){var e;typeof a==="string"?this.forEach(function(b){b.insertAdjacentHTML("beforeEnd",a)}):a instanceof HTMLElement?this.forEach(function(b){b.appendChild(a)}):c.isR(a)&&(e=f.createDocumentFragment(),a.forEach(function(b){e.appendChild(b)}),this.forEach(function(b){b.appendChild(e)}));return this},attr:function(a,e){if(typeof a==="string")if(e===void 0)return this.length===1?this[0].getAttribute(a):this.invoke("getAttribute",a);
else e===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(e));else typeof a==="object"&&this.forEach(function(b){for(var h in a)a[h]===null?b.removeAttribute(h):b.setAttribute(h,String(a[h]))});return this},css:function(a,e){if(typeof a==="string")if(e===void 0)return this.length===1?getComputedStyle(this[0],null).getPropertyValue(a):this.map(function(b){return getComputedStyle(b,null).getPropertyValue(a)});else e===null?this.forEach(function(b){b.style.removeProperty(a)}):
this.forEach(function(b){b.style.setProperty(a,e,null)});else typeof a==="object"&&this.forEach(function(b){var h=";",k;for(k in a)a[k]===null?b.style.removeProperty(k):h+=k+":"+a[k]+";";b.style.cssText+=h});return this},addClass:function(a){this.forEach(function(e){e.className===""?e.className=a:e.className+=" "+a});return this},removeClass:function(a){var e=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(b){var a=b.className.replace(e,"");b.className=a.replace(/\s+$/,"")});return this},
hasClass:function(a){var e=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(e):this.map(function(b){return!!b.className.match(e)})},toggleClass:function(a,e){e===void 0?this.hasClass(a)?this.removeClass(a):this.addClass(a):this.hasClass(a)?(this.removeClass(a),this.addClass(e)):(this.removeClass(e),this.addClass(a))},bind:function(a,e,b){this.forEach(function(h){var k=h.__nid||(h.__nid=n++),k=m[k]||(m[k]=[]);k.push({event:a,callback:e,index:k.length,useCapture:b||
!1});h.addEventListener(a,e,b||!1)});return this},unbind:function(a){function e(b,a){return b.filter(function(b){return b.event===a})}this.forEach(function(b){var h=b.__nid||(b.__nid=n++),k=a?e(m[h]||[],a):m[h];k&&k.forEach(function(a){delete k[a.index];b.removeEventListener(a.event,a.callback,a.useCapture)})});return this},delegate:function(a,e,b){this.bind(e,function(h){var e=c(a,this).detect(function(b){b=b.compareDocumentPosition(h.target);return b===0||b&Node.DOCUMENT_POSITION_CONTAINED_BY});
e&&b.call(e,h)})}};c.fn.__proto__=[];c.ajax=function(a,e,b,h){function k(b){var a=[],h;for(h in b)a.push(d(h)+"="+d(b[h]));return a.join("&")}var c=new XMLHttpRequest,h=h||{},e=e||function(){},b=b||function(){},i=h.method||"GET",f=h.header||{},j=h.ctype||(i==="POST"?"application/x-www-form-urlencoded":""),h=h.data||"",l;c.onreadystatechange=function(){c.readyState===4&&(c.status>=200&&c.status<300?e(c.responseText,c):b(c))};typeof h==="object"&&(h=k(h));c.open(i,a,!0);j&&c.setRequestHeader("Content-Type",
j);c.setRequestHeader("X-Requested-With","XMLHttpRequest");for(l in f)c.setRequestHeader(l,f[l]);c.send(h)};c.id=function(a,c){return l(a,c,"getElementById")};c.cls=function(a,c){return l(a,c,"getElementsByClassName")};c.tag=function(a,c){return l(a,c,"getElementsByTagName")};c.isR=function(a){return a.__proto__===c.fn};c.version="0.3.0";window.r=c})(document,Array.prototype.slice,encodeURIComponent);(function(f,g,d){f.r.load=function(c,f){var j=0,i=c.length;c.forEach(function(c){var n=g.createElement("script");n.src=c;n.onload=function(){n.removeAttribute("onload");++j===i&&f()};d.appendChild(n)})}})(window,document,document.getElementsByTagName("head")[0]);(function(){function f(b){b=b.css("-webkit-transform");b=typeof b==="string"?b.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return b!==null&&b.length===3?{x:Number(b[1]),y:Number(b[2])}:{x:0,y:0}}function g(b){b=b.css("-webkit-transform");b=typeof b==="string"?b.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return b!==null&&b.length===3?{x:Number(b[1]),y:Number(b[2])}:{x:1,y:1}}function d(b){b=String(b).match(/(\d+(?:\.\d+)?)(m?)(s?)/);
return b[2]===""&&b[3]==="s"?Number(b[1])*1E3:b[2]==="m"&&b[3]==="s"?Number(b[1]):300}function c(b,h,c){var d=c||{},i=d.duration||a,d=d.easing||e,f,j=0,g={};h instanceof Array?(g["-webkit-transform"]=h.join(" "),f=1):typeof h==="object"&&(f=l(h,g));typeof c.callback==="function"&&b.waitTransitionEnd(i,function(){++j;f===j&&c.callback()});g["-webkit-transition"]=i+" "+d;g["-webkit-backface-visibility"]="hidden";g["-webkit-perspective"]="1000";b.css(g)}function l(b,a){var c,d=0;for(c in b)a[c]=b[c],
d++;return d}function j(b,a){return"scale("+b+","+a+")"}function i(b,a){if(typeof b==="number"&&typeof a==="number")return n+b+"px,"+a+"px"+o;else if(typeof b==="string"&&typeof a==="string")return n+b+","+a+o}var m="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,n="translate"+(m?"3d(":"("),o=m?",0)":")",a="0.3s",e="ease-in-out";r.fn.animate=function(b,a){var d=0,e=this.length,i=a||{},f=i.callback||function(){};i.callback=function(){++d;d===e&&f()};this.each(function(a){c(a,b,i)})};r.fn.scale=
function(b,a,c){this.animate([j(b,a)],c)};r.fn.scaleR=function(b,a,c){var d=g(this);this.animate([j(d.x*b,d.y*a)],c)};r.fn.scaleX=function(b,a){var c=g(this);this.animate([j(b,c.y)],a)};r.fn.scaleRX=function(b,a){var c=g(this);this.animate([j(c.x*b,c.y)],a)};r.fn.scaleY=function(b,a){var c=g(this);this.animate([j(c.x,yScale)],a)};r.fn.scaleRY=function(b,a){var c=g(this);this.animate([j(c.x,c.y*b)],a)};r.fn.move=function(b,a,c){this.animate([i(b,a)],c)};r.fn.moveR=function(b,a,c){var d=f(this);this.animate([i(d.x+
b,d.y+a)],c)};r.fn.moveX=function(a,c){var d=f(this);this.animate([i(a,d.y)],c)};r.fn.moveRX=function(a,c,d){c=f(this);this.animate([i(c.x+a,c.y)],d)};r.fn.moveY=function(a,c){var d=f(this);this.animate([i(d.x,a)],c)};r.fn.moveRY=function(a,c){var d=f(this);this.animate([i(d.x,d.y+a)],c)};r.fn.fadeIn=function(a){var c=this;this.show();setTimeout(function(){c.animate({opacity:1},a)},0)};r.fn.fadeOut=function(a){var c=this;this.animate({opacity:0},a);this.waitTransitionEnd(typeof a==="object"?a.duration:
null,function(){c.hide()},!0)};r.fn.show=function(a){this.animate({display:"block"},a)};r.fn.hide=function(a){this.animate({display:"none"},a)};r.fn.waitTransitionEnd=function(b,c,e){var i=this,f,j,b=b||a;f=function(a,b){clearTimeout(b);c();e&&i.unbind("webkitTransitionEnd")};j=setTimeout(function(){f(null,j)},d(b)+200);i.bind("webkitTransitionEnd",f)}})();(function(f,g,d){function c(c,d){var f=d;if(typeof c!=="function")throw Error("First parameter should be function");if(typeof d==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(d){f=c(f,d)});return f}function l(){return this.replace(/(^\s+)|(\s+$)/g,"")}function j(c){return eval("("+c+")")}if(typeof g.reduce!=="function")g.reduce=c;if(typeof d.trim!=="function")d.trim=l;if(typeof f.JSON!=="object")f.JSON={},f.JSON.parse=j})(window,Array.prototype,String.prototype);r(function(){function f(c,d,f,i){var g=document.createEvent("MouseEvent");g.initMouseEvent(d,!0,!0,window,null,f,i);c.dispatchEvent(g)}var g=document.body,d={};r(g).bind("touchstart",function(c){d.x1=c.changedTouches[0].clientX;d.y1=c.changedTouches[0].clientY;d.position={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};d.target=c.changedTouches[0].target;d.startTime=Date.now()},!0);r(g).bind("touchmove",function(c){var g;g=c.changedTouches[0].clientX-d.position.x;var j=c.changedTouches[0].clientY-
d.position.y,i;i=r(c.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);i=i===null?{x:0,y:0,z:0}:{x:Number(i[1]),y:Number(i[2]),z:Number(i[3])};g={x:i.x+g,y:i.y+j};f(d.target,"drag",1.6*g.x,1.6*g.y);d.position.x=c.changedTouches[0].clientX;d.position.y=c.changedTouches[0].clientY;d.x2=c.changedTouches[0].clientX;d.y2=c.changedTouches[0].clientY;c.preventDefault()},!0);r(g).bind("touchend",function(c){var g=d.x1-d.x2,j=d.y1-d.y2,i=Math.abs(g),m=Math.abs(j);
d.startTime&&Date.now()-d.startTime>1E3?d={}:(m>30&&m>i?(c.preventDefault(),j>=0?f(d.target,"swipeup",g,j):f(d.target,"swipedown",g,j)):i>30&&i>m&&(c.preventDefault(),g>=0?f(d.target,"swipeleft",g,j):f(d.target,"swiperight",g,j)),d={x1:0,x2:0,y1:0,y2:0,target:null})},!0);r(g).bind("touchcancel",function(){d={x1:0,x2:0,y1:0,y2:0,target:null}},!0)});(function(){function f(d){this.storage=d}function g(d){return g.sname||(g.sname=new f(window[d+"Storage"]))}f.prototype.set=function(d,c){if(typeof d==="number"||typeof d==="string")this.storage.setItem(d,JSON.stringify(c));else if(typeof c==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};f.prototype.get=function(d){return typeof this.storage[d]==="undefined"?null:JSON.parse(this.storage.getItem(d))};
f.prototype.clear=function(){this.storage.clear()};f.prototype.size=function(){return this.storage.length};f.prototype.keys=function(){var d=[],c;for(c in this.storage)d.push(c);return d};f.prototype.values=function(){var d=[],c;for(c in this.storage)d.push(this.get(c));return d};r.storage=g})();
