/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(c,g,f){function e(a,b){if(typeof a==="string")return o(a,b,"querySelectorAll");else if(a instanceof Array)return k(a);else if(a instanceof HTMLElement)return k(m(a));else typeof a==="function"&&(n?a(e):c.addEventListener("DOMContentLoaded",function(){a(e)},!1))}function o(a,b,h){if(typeof b==="undefined"||b instanceof HTMLElement)return k(m((b||c)[h](a)));else if(b.__proto__===e.fn){var d=[];b.map(function(b){return m(b[h](a))}).forEach(function(b){b.forEach(function(b){d.push(b)})});return k(d)}}
function m(a){if(a===null)return[];else if(a instanceof HTMLElement)return[a];else if(typeof a.length==="number"&&typeof a.item==="function")return g.call(a)}function k(a){a.__proto__=e.fn;return a}function p(a,b){return a.filter(function(a){return a.event===b})}function q(a){var b=[],h;for(h in a)b.push(f(h)+"="+f(a[h]));return b.join("&")}var j={},l=1,n=!1;e.fn={detect:function(a){return this.filter(a)[0]},invoke:function(){var a=g.call(arguments),b=a.shift();return this.map(function(h){return h[b].apply(h,
a)})},pluck:function(a){return this.map(function(b){return b[a]})},each:function(a){return this.forEach(function(b){a(k(m(b)))})},html:function(a){var b;if(typeof a==="undefined")return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(b){return b});else typeof a==="string"||typeof a==="number"?this.forEach(function(b){b.innerHTML=a}):a instanceof HTMLElement?this.forEach(function(b){b.innerHTML=a.outerHTML}):a.__proto__===e.fn&&(b=a.map(function(b){return b.outerHTML}).join(""),
this.forEach(function(a){a.innerHTML=b}));return this},add:function(a){var b;typeof a==="string"?this.forEach(function(b){b.insertAdjacentHTML("beforeEnd",a)}):a instanceof HTMLElement?this.forEach(function(b){b.appendChild(a)}):a.__proto__===e.fn&&(b=c.createDocumentFragment(),a.forEach(function(a){b.appendChild(a)}),this.forEach(function(a){a.appendChild(b)}));return this},remove:function(){this.forEach(function(a){a.parentNode.removeChild(a)});return this},attr:function(a,b){if(typeof a==="string")if(typeof b===
"undefined")return this.length===1?this[0].getAttribute(a):this.invoke("getAttribute",a);else b===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(b));else typeof a==="object"&&this.forEach(function(b){for(var d in a)a[d]===null?b.removeAttribute(d):b.setAttribute(d,String(a[d]))});return this},css:function(a,b){if(typeof a==="string")if(typeof b==="undefined")return this.length===1?getComputedStyle(this[0],null).getPropertyValue(a):this.map(function(b){return getComputedStyle(b,
null).getPropertyValue(a)});else b===null?this.forEach(function(b){b.style.removeProperty(a)}):this.forEach(function(h){h.style.setProperty(a,b,null)});else typeof a==="object"&&this.forEach(function(b){var d=";",i;for(i in a)a[i]===null?b.style.removeProperty(i):d+=i+":"+a[i]+";";b.style.cssText+=d});return this},addClass:function(a){this.forEach(function(b){b.className===""?b.className=a:b.className+=" "+a});return this},removeClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(a){var d=
a.className.replace(b,"");a.className=d.replace(/\s+$/,"")});return this},hasClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(b):this.map(function(a){return!!a.className.match(b)})},swapClass:function(a,b){this.removeClass(a);this.addClass(b)},bind:function(a,b,h){this.forEach(function(d){var i=d.nid||(d.nid=l++),i=j[i]||(j[i]=[]);i.push({event:a,callback:b,index:i.length});d.addEventListener(a,b,h||!1)});return this},unbind:function(a){this.forEach(function(b){var h=
b.nid||(b.nid=l++),d=a?p(j[h],a):j[h];d&&d.forEach(function(a){delete d[a.index];b.removeEventListener(a.event,a.callback,!1)})});return this},delegate:function(a,b,h){this.bind(b,function(b){var i=e(a,this).detect(function(a){a=a.compareDocumentPosition(b.target);return a===0||a&Node.DOCUMENT_POSITION_CONTAINED_BY});i&&h.call(i,b)})}};c.addEventListener("DOMContentLoaded",function(){n=!0},!1);e.fn.__proto__=[];e.id=function(a,b){return o(a,b,"getElementById")};e.cls=function(a,b){return o(a,b,"getElementsByClassName")};
e.tag=function(a,b){return o(a,b,"getElementsByTagName")};e.ajax=function(a,b,h,d){var i=new XMLHttpRequest,d=d||{},b=b||function(){},h=h||function(){},e=d.method||"GET",c=d.header||{},f=d.ctype||(e==="POST"?"application/x-www-form-urlencoded":""),d=d.data||"",j;i.onreadystatechange=function(){i.readyState===4&&(i.status>=200&&i.status<300?b(i.responseText,i):h(i))};typeof d==="object"&&(d=q(d));i.open(e,a,!0);f&&i.setRequestHeader("Content-Type",f);i.setRequestHeader("X-Requested-With","XMLHttpRequest");
for(j in c)i.setRequestHeader(j,c[j]);i.send(d)};e.version="0.2.9";window.r=e})(document,Array.prototype.slice,encodeURIComponent);(function(c,g,f){c.r.load=function(e,c){var m=0,k=e.length;e.forEach(function(e){var q=g.createElement("script");q.src=e;q.onload=function(){q.removeAttribute("onload");++m===k&&c()};f.appendChild(q)})}})(window,document,document.getElementsByTagName("head")[0]);(function(c,g,f){function e(e,c){var f=c;if(typeof e!=="function")throw Error("First parameter should be function");if(typeof c==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(c){f=e(f,c)});return f}function o(){return this.replace(/(^\s+)|(\s+$)/g,"")}function m(e){return eval("("+e+")")}if(typeof g.reduce!=="function")g.reduce=e;if(typeof f.trim!=="function")f.trim=o;if(typeof c.JSON!=="object")c.JSON={},c.JSON.parse=m})(window,Array.prototype,String.prototype);(function(){r.fn.union=function(c){return c.__proto__===r.fn?r(this.concat(c)):this}})();(function(){function c(b){b=b.css("-webkit-transform");b=typeof b==="string"?b.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return b!==null&&b.length===3?{x:Number(b[1]),y:Number(b[2])}:{x:0,y:0}}function g(b){b=b.css("-webkit-transform");b=typeof b==="string"?b.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return b!==null&&b.length===3?{x:Number(b[1]),y:Number(b[2])}:{x:1,y:1}}function f(b){b=b.match(/(\d+(?:\.\d+)?)(m?)(s?)/);
return b[2]===""&&b[3]==="s"?Number(b[1])*1E3:b[2]==="m"&&b[3]==="s"?Number(b[1]):300}function e(b,a,d,e){var c,j,a=a||n;c=function(a,h){clearTimeout(h);d();e&&b.unbind("webkitTransitionEnd")};j=setTimeout(function(){c(null,j)},f(a)+200);b.bind("webkitTransitionEnd",c)}function o(b,h,d){var c=d||{},f=c.duration||n,j=c.easing||a,g,k=0,l={};h instanceof Array?(l["-webkit-transform"]=h.join(" "),g=1):typeof h==="object"&&(g=m(h,l));console.dir(c);typeof d.callback==="function"&&e(b,f,function(){++k;
g===k&&d.callback()});l["-webkit-transition"]=f+" "+j;l["-webkit-backface-visibility"]="hidden";l["-webkit-perspective"]="1000";b.css(l)}function m(b,a){var d,c=0;for(d in b)a[d]=b[d],c++;return c}function k(b,a){return"scale("+b+","+a+")"}function p(b,a){if(typeof b==="number"&&typeof a==="number")return j+b+"px,"+a+"px"+l;else if(typeof b==="string"&&typeof a==="string")return j+b+","+a+l}var q="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,j="translate"+(q?"3d(":"("),l=q?",0)":")",n="0.3s",
a="ease-in-out";r.fn.animate=function(b,a){var d=0,c=this.length,e=a||{},f=e.callback||function(){};e.callback=function(){++d;d===c&&f()};this.each(function(a){o(a,b,e)})};r.fn.scale=function(b,a,d){this.animate([k(b,a)],d)};r.fn.scaleR=function(b,a,d){var c=g(this);this.animate([k(c.x*b,c.y*a)],d)};r.fn.scaleX=function(b,a){var d=g(this);this.animate([k(b,d.y)],a)};r.fn.scaleRX=function(b,a){var d=g(this);this.animate([k(d.x*b,d.y)],a)};r.fn.scaleY=function(b,a){var d=g(this);this.animate([k(d.x,
yScale)],a)};r.fn.scaleRY=function(b,a){var d=g(this);this.animate([k(d.x,d.y*b)],a)};r.fn.move=function(b,a,d){this.animate([p(b,a)],d)};r.fn.moveR=function(b,a,d){var e=c(this);this.animate([p(e.x+b,e.y+a)],d)};r.fn.moveX=function(b,a){var d=c(this);this.animate([p(b,d.y)],a)};r.fn.moveRX=function(b,a,d){a=c(this);this.animate([p(a.x+b,a.y)],d)};r.fn.moveY=function(b,a){var d=c(this);this.animate([p(d.x,b)],a)};r.fn.moveRY=function(a,e){var d=c(this);this.animate([p(d.x,d.y+a)],e)};r.fn.fadeIn=
function(a){var c=this;this.show();setTimeout(function(){c.animate({opacity:1},a)},0)};r.fn.fadeOut=function(a){var c=this;this.animate({opacity:0},a);e(this,typeof a==="object"?a.duration:null,function(){c.hide()},!0)};r.fn.show=function(a){this.animate({display:"block"},a)};r.fn.hide=function(a){this.animate({display:"none"},a)}})();r(function(){var c,g,f,e,o,m,k;function p(c,e,f,a){var b=document.createEvent("MouseEvent");b.initMouseEvent(e,!0,!0,window,null,f,a);c.dispatchEvent(b)}var q=document.body;c=void 0;g=void 0;f=void 0;e=void 0;o=void 0;m=void 0;k=void 0;r(q).bind("touchstart",function(j){g=j.changedTouches[0].clientX;f=j.changedTouches[0].clientY;e={x:j.changedTouches[0].clientX,y:j.changedTouches[0].clientY};c=j.changedTouches[0].target;o=Date.now()},!0);r(q).bind("touchmove",function(f){var g,n;g=f.changedTouches[0].clientX-
e.x;n=f.changedTouches[0].clientY-e.y;var a;a=r(c).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);a=a===null?{x:0,y:0,z:0}:{x:Number(a[1]),y:Number(a[2]),z:Number(a[3])};g=a.x+g;n=a.y+n;p(c,"drag",1.6*g,1.6*n);e.x=f.changedTouches[0].clientX;e.y=f.changedTouches[0].clientY;m=f.changedTouches[0].clientX;k=f.changedTouches[0].clientY;f.preventDefault()},!0);r(q).bind("touchend",function(j){var l=g-m,n=f-k,a=Math.abs(l),b=Math.abs(n);o&&Date.now()-o>1E3?(c=void 0,
g=void 0,f=void 0,e=void 0,o=void 0,m=void 0,k=void 0):(b>30&&b>a?(j.preventDefault(),n>=0?p(c,"swipeup",l,n):p(c,"swipedown",l,n)):a>30&&a>b&&(j.preventDefault(),l>=0?p(c,"swipeleft",l,n):p(c,"swiperight",l,n)),g=0,m=0,f=0,k=0,c=null,e=void 0,o=void 0)},!0);r(q).bind("touchcancel",function(){g=0;m=0;f=0;k=0;c=null;e=void 0;o=void 0},!0);["swipeleft","swiperight","swipeup","swipedown"].forEach(function(c){r.fn[c]=function(e,f){this.bind(c,e,f)}})});(function(){function c(c){this.storage=c}function g(f){return g.sname||(g.sname=new c(window[f+"Storage"]))}c.prototype.set=function(c,e){if(typeof c==="number"||typeof c==="string")this.storage.setItem(c,JSON.stringify(e));else if(typeof e==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};c.prototype.get=function(c){return typeof this.storage[c]==="undefined"?null:JSON.parse(this.storage.getItem(c))};
c.prototype.clear=function(){this.storage.clear()};c.prototype.size=function(){return this.storage.length};c.prototype.keys=function(){var c=[],e;for(e in this.storage)c.push(e);return c};c.prototype.values=function(){var c=[],e;for(e in this.storage)c.push(this.get(e));return c};r.storage=g})();
