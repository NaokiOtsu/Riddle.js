/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(c,j,g){function f(b,a){if(typeof b==="string")return k(b,a,"querySelectorAll");else if(b instanceof HTMLElement)return h(i(b));else typeof b==="function"&&(l?b(f):c.addEventListener("DOMContentLoaded",function(){b(f)},!1))}function k(b,a,d){if(typeof a==="undefined"||a instanceof HTMLElement)return h(i((a||c)[d](b)));else if(a.__proto__===f.fn){var e=[];a.map(function(a){return i(a[d](b))}).forEach(function(b){b.forEach(function(b){e.push(b)})});return h(e)}}function i(b){if(b===null)return[];
else if(b instanceof HTMLElement)return[b];else if(typeof b.length==="number"&&typeof b.item==="function")return j.call(b)}function h(b){b.__proto__=f.fn;return b}function a(b,a){return b.filter(function(b){return b.event===a})}function e(b){var a=[],d;for(d in b)a.push(g(d)+"="+g(b[d]));return a.join("&")}var d={},m=1,l=!1;f.fn={detect:function(b){return this.filter(b)[0]},invoke:function(){var b=j.call(arguments),a=b.shift();return this.map(function(d){return d[a].apply(d,b)})},pluck:function(b){return this.map(function(a){return a[b]})},
each:function(b){return this.forEach(function(a){b(h(i(a)))})},html:function(b){var a;if(typeof b==="undefined")return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(b){return b});else typeof b==="string"||typeof b==="number"?this.forEach(function(a){a.innerHTML=b}):b instanceof HTMLElement?this.forEach(function(a){a.innerHTML=b.outerHTML}):b.__proto__===f.fn&&(a=b.map(function(b){return b.outerHTML}).join(""),this.forEach(function(b){b.innerHTML=a}));return this},add:function(b){var a;
typeof b==="string"?this.forEach(function(a){a.insertAdjacentHTML("beforeEnd",b)}):b instanceof HTMLElement?this.forEach(function(a){a.appendChild(b)}):b.__proto__===f.fn&&(a=c.createDocumentFragment(),b.forEach(function(b){a.appendChild(b)}),this.forEach(function(b){b.appendChild(a)}));return this},remove:function(){this.forEach(function(b){b.parentNode.removeChild(b)});return this},attr:function(b,a){if(typeof b==="string")if(typeof a==="undefined")return this.length===1?this[0].getAttribute(b):
this.invoke("getAttribute",b);else a===null?this.invoke("removeAttribute",b):this.invoke("setAttribute",b,String(a));else typeof b==="object"&&this.forEach(function(a){for(var d in b)b[d]===null?a.removeAttribute(d):a.setAttribute(d,String(b[d]))});return this},css:function(b,a){if(typeof b==="string")if(typeof a==="undefined")return this.length===1?getComputedStyle(this[0],"").getPropertyValue(b):this.map(function(a){return getComputedStyle(a,"").getPropertyValue(b)});else a===null?this.forEach(function(a){a.style.removeProperty(b)}):
this.forEach(function(d){d.style.setProperty(b,a,"")});else typeof b==="object"&&this.forEach(function(a){var d=";",e;for(e in b)b[e]===null?a.style.removeProperty(e):d+=e+":"+b[e]+";";a.style.cssText+=d});return this},addClass:function(a){this.forEach(function(d){d.className===""?d.className=a:d.className+=" "+a});return this},removeClass:function(a){var d=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(a){var b=a.className.replace(d,"");a.className=b.replace(/\s+$/,"")});return this},
hasClass:function(a){var d=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(d):this.map(function(a){return!!a.className.match(d)})},swapClass:function(a,d){this.removeClass(a);this.addClass(d)},bind:function(a,e,f){this.forEach(function(c){var g=c.nid||(c.nid=m++),g=d[g]||(d[g]=[]);g.push({event:a,callback:e,index:g.length});c.addEventListener(a,e,f||!1)});return this},unbind:function(b){this.forEach(function(e){var f=e.nid||(e.nid=m++),c=b?a(d[f],b):d[f];c&&c.forEach(function(a){delete c[a.index];
e.removeEventListener(a.event,a.callback,!1)})});return this},delegate:function(a,d,e){this.bind(d,function(d){f(a,this).detect(function(a){return a===d.target})&&e(d)})}};c.addEventListener("DOMContentLoaded",function(){l=!0},!1);f.fn.__proto__=[];f.id=function(a,d){return k(a,d,"getElementById")};f.cls=function(a,d){return k(a,d,"getElementsByClassName")};f.tag=function(a,d){return k(a,d,"getElementsByTagName")};f.ajax=function(a,d,f,c){var g=new XMLHttpRequest,c=c||{},d=d||function(){},f=f||function(){},
m=c.method||"GET",h=c.header||{},l=c.ctype||(m==="POST"?"application/x-www-form-urlencoded":""),c=c.data||"",i;g.onreadystatechange=function(){g.readyState===4&&(g.status>=200&&g.status<300?d(g.responseText,g):f(g))};typeof c==="object"&&(c=e(c));g.open(m,a,!0);l&&g.setRequestHeader("Content-Type",l);g.setRequestHeader("X-Requested-With","XMLHttpRequest");for(i in h)g.setRequestHeader(i,h[i]);g.send(c)};f.version="0.2.9";window.r=f})(document,Array.prototype.slice,encodeURIComponent);(function(c,j,g){c.r.load=function(c,k){var i=0,h=c.length;c.forEach(function(a){var e=j.createElement("script");e.src=a;e.onload=function(){e.removeAttribute("onload");++i===h&&k()};g.appendChild(e)})}})(window,document,document.getElementsByTagName("head")[0]);(function(c,j,g){function f(c,a){var e=a;if(typeof c!=="function")throw Error("First parameter should be function");if(typeof a==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(a){e=c(e,a)});return e}function k(){return this.replace(/(^\s+)|(\s+$)/g,"")}function i(c){return eval("("+c+")")}if(typeof j.reduce!=="function")j.reduce=f;if(typeof g.trim!=="function")g.trim=k;if(typeof c.JSON!=="object")c.JSON={},c.JSON.parse=i})(window,Array.prototype,String.prototype);(function(){function c(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function j(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function g(a,e,d){var c="0.3s",g="ease-in-out",
b,i=0,h={};e instanceof Array?(h["-webkit-transform"]=e.join(" "),b=1):typeof e==="object"&&(b=f(e,h));if(typeof d==="object"){typeof d.duration==="string"?c=d.duration:typeof d.duration==="number"&&(c=d.duration+"s");if(typeof d.easing==="string")g=d.easing;typeof d.callback==="function"&&a.bind("webkitTransitionEnd",function(e){++i;b===i&&(d.callback(e),a.unbind("webkitTransitionEnd"))})}h["-webkit-transition"]=c+" "+g;h["-webkit-backface-visibility"]="hidden";h["-webkit-perspective"]="1000";h["-webkit-transform-origin"]=
"0 0";a.css(h)}function f(a,e){var d,c=0;for(d in a)e[d]=a[d],c++;return c}var k="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,i="translate"+(k?"3d(":"("),h=k?",0)":")";r.fn.animate=function(a,e){var d=0,c=this.length,f=e||{},b=typeof f.callback==="function"?f.callback:function(){};f.callback=function(){++d;d===c&&b()};this.each(function(d){g(d,a,f)})};r.fn.scale=function(a,e,d){this.animate(["scale("+a+","+e+")"],d)};r.fn.scaleR=function(a,e,d){var c=j(this);this.animate(["scale("+c.x*
a+","+c.y*e+")"],d)};r.fn.scaleX=function(a,c){var d=j(this);this.animate(["scale("+a+","+d.y+")"],c)};r.fn.scaleRX=function(a,c){var d=j(this);this.animate(["scale("+d.x*a+","+d.y+")"],c)};r.fn.scaleY=function(a,c){this.animate(["scale("+j(this).x+","+yScale+")"],c)};r.fn.scaleRY=function(a,c){var d=j(this);this.animate(["scale("+d.x+","+d.y*a+")"],c)};r.fn.move=function(a,c,d){typeof a==="number"&&typeof c==="number"?this.animate([i+a+"px,"+c+"px"+h],d):typeof a==="string"&&typeof c==="string"&&
this.animate([i+a+","+c+h],d)};r.fn.moveR=function(a,e,d){var g=c(this);this.animate([i+(g.x+a)+"px,"+(g.y+e)+"px"+h],d)};r.fn.moveX=function(a,e){var d=c(this);typeof a==="number"?this.animate([i+a+"px,"+d.y+"px"+h],e):typeof a==="string"&&this.animate([i+a+","+d.y+h],e)};r.fn.moveRX=function(a,e,d){e=c(this);this.animate([i+(e.x+a)+"px,"+e.y+"px"+h],d)};r.fn.moveY=function(a,e){var d=c(this);typeof a==="number"?this.animate([i+d.x+"px,"+a+"px"+h],e):typeof a==="string"&&this.animate([i+d.x+"px,"+
a+h],e)};r.fn.moveRY=function(a,e){var d=c(this);this.animate([i+d.x+"px,"+(d.y+a)+"px"+h],e)};r.fn.fadeIn=function(a){this.animate({opacity:1},a)};r.fn.fadeOut=function(a){this.animate({opacity:0},a)};r.fn.show=function(a){this.animate({visibility:"visible"},a)};r.fn.hide=function(a){this.animate({visibility:"hidden"},a)}})();r(function(){var c,j,g,f,k,i,h;function a(a,c,e,b){var g=document.createEvent("MouseEvent");g.initMouseEvent(c,!0,!0,window,null,e,b);a.dispatchEvent(g)}var e=document.body;c=void 0;j=void 0;g=void 0;f=void 0;k=void 0;i=void 0;h=void 0;r(e).bind("touchstart",function(a){j=a.changedTouches[0].clientX;g=a.changedTouches[0].clientY;f={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};c=a.changedTouches[0].target;k=Date.now()},!0);r(e).bind("touchmove",function(d){var e,g;e=d.changedTouches[0].clientX-
f.x;g=d.changedTouches[0].clientY-f.y;var b;b=r(c).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);b=b===null?{x:0,y:0,z:0}:{x:Number(b[1]),y:Number(b[2]),z:Number(b[3])};e=b.x+e;g=b.y+g;a(c,"drag",1.6*e,1.6*g);f.x=d.changedTouches[0].clientX;f.y=d.changedTouches[0].clientY;i=d.changedTouches[0].clientX;h=d.changedTouches[0].clientY;d.preventDefault()},!0);r(e).bind("touchend",function(d){var e=j-i,l=g-h,b=Math.abs(e),n=Math.abs(l);k&&Date.now()-k>1E3?(c=void 0,
j=void 0,g=void 0,f=void 0,k=void 0,i=void 0,h=void 0):(n>30&&n>b?(d.preventDefault(),l>=0?a(c,"swipeup",e,l):a(c,"swipedown",e,l)):b>30&&b>n&&(d.preventDefault(),e>=0?a(c,"swipeleft",e,l):a(c,"swiperight",e,l)),j=0,i=0,g=0,h=0,c=null,f=void 0,k=void 0)},!0);r(e).bind("touchcancel",function(){j=0;i=0;g=0;h=0;c=null;f=void 0;k=void 0},!0);["swipeleft","swiperight","swipeup","swipedown"].forEach(function(a){r.fn[a]=function(c,e){this.bind(a,c,e)}})});(function(){function c(c){this.storage=c}function j(g){return j.sname||(j.sname=new c(window[g+"Storage"]))}c.prototype.set=function(c,f){if(typeof c==="number"||typeof c==="string")this.storage.setItem(c,JSON.stringify(f));else if(typeof f==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};c.prototype.get=function(c){return typeof this.storage[c]==="undefined"?null:JSON.parse(this.storage.getItem(c))};
c.prototype.clear=function(){this.storage.clear()};c.prototype.size=function(){return this.storage.length};c.prototype.keys=function(){var c=[],f;for(f in this.storage)c.push(f);return c};c.prototype.values=function(){var c=[],f;for(f in this.storage)c.push(this.get(f));return c};r.storage=j})();
