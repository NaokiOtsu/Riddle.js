/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(c,f,e){function d(a,b){if(typeof a==="string")return j(a,b,"querySelectorAll");else if(a instanceof Array)return i(a);else if(a instanceof HTMLElement)return i(k(a));else typeof a==="function"&&(n?a(d):c.addEventListener("DOMContentLoaded",function(){a(d)},!1))}function j(a,b,l){if(typeof b==="undefined"||b instanceof HTMLElement)return i(k((b||c)[l](a)));else if(b.__proto__===d.fn){var g=[];b.map(function(b){return k(b[l](a))}).forEach(function(a){a.forEach(function(a){g.push(a)})});return i(g)}}
function k(a){if(a===null)return[];else if(a instanceof HTMLElement)return[a];else if(typeof a.length==="number"&&typeof a.item==="function")return f.call(a)}function i(a){a.__proto__=d.fn;return a}function p(a,b){return a.filter(function(a){return a.event===b})}function q(a){var b=[],l;for(l in a)b.push(e(l)+"="+e(a[l]));return b.join("&")}var h={},m=1,n=!1;d.fn={detect:function(a){return this.filter(a)[0]},invoke:function(){var a=f.call(arguments),b=a.shift();return this.map(function(l){return l[b].apply(l,
a)})},pluck:function(a){return this.map(function(b){return b[a]})},each:function(a){return this.forEach(function(b){a(i(k(b)))})},html:function(a){var b;if(typeof a==="undefined")return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(a){return a});else typeof a==="string"||typeof a==="number"?this.forEach(function(b){b.innerHTML=a}):a instanceof HTMLElement?this.forEach(function(b){b.innerHTML=a.outerHTML}):a.__proto__===d.fn&&(b=a.map(function(a){return a.outerHTML}).join(""),
this.forEach(function(a){a.innerHTML=b}));return this},add:function(a){var b;typeof a==="string"?this.forEach(function(b){b.insertAdjacentHTML("beforeEnd",a)}):a instanceof HTMLElement?this.forEach(function(b){b.appendChild(a)}):a.__proto__===d.fn&&(b=c.createDocumentFragment(),a.forEach(function(a){b.appendChild(a)}),this.forEach(function(a){a.appendChild(b)}));return this},remove:function(){this.forEach(function(a){a.parentNode.removeChild(a)});return this},attr:function(a,b){if(typeof a==="string")if(typeof b===
"undefined")return this.length===1?this[0].getAttribute(a):this.invoke("getAttribute",a);else b===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(b));else typeof a==="object"&&this.forEach(function(b){for(var g in a)a[g]===null?b.removeAttribute(g):b.setAttribute(g,String(a[g]))});return this},css:function(a,b){if(typeof a==="string")if(typeof b==="undefined")return this.length===1?getComputedStyle(this[0],null).getPropertyValue(a):this.map(function(b){return getComputedStyle(b,
null).getPropertyValue(a)});else b===null?this.forEach(function(b){b.style.removeProperty(a)}):this.forEach(function(l){l.style.setProperty(a,b,null)});else typeof a==="object"&&this.forEach(function(b){var g=";",o;for(o in a)a[o]===null?b.style.removeProperty(o):g+=o+":"+a[o]+";";b.style.cssText+=g});return this},addClass:function(a){this.forEach(function(b){b.className===""?b.className=a:b.className+=" "+a});return this},removeClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(a){var g=
a.className.replace(b,"");a.className=g.replace(/\s+$/,"")});return this},hasClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(b):this.map(function(a){return!!a.className.match(b)})},swapClass:function(a,b){this.removeClass(a);this.addClass(b)},bind:function(a,b,l){this.forEach(function(g){var o=g.nid||(g.nid=m++),o=h[o]||(h[o]=[]);o.push({event:a,callback:b,index:o.length});g.addEventListener(a,b,l||!1)});return this},unbind:function(a){this.forEach(function(b){var l=
b.nid||(b.nid=m++),g=a?p(h[l],a):h[l];g&&g.forEach(function(a){delete g[a.index];b.removeEventListener(a.event,a.callback,!1)})});return this},delegate:function(a,b,l){this.bind(b,function(b){var c=d(a,this).detect(function(a){a=a.compareDocumentPosition(b.target);return a===0||a&Node.DOCUMENT_POSITION_CONTAINED_BY});c&&l.call(c,b)})}};c.addEventListener("DOMContentLoaded",function(){n=!0},!1);d.fn.__proto__=[];d.id=function(a,b){return j(a,b,"getElementById")};d.cls=function(a,b){return j(a,b,"getElementsByClassName")};
d.tag=function(a,b){return j(a,b,"getElementsByTagName")};d.ajax=function(a,b,l,g){var c=new XMLHttpRequest,g=g||{},b=b||function(){},l=l||function(){},d=g.method||"GET",e=g.header||{},h=g.ctype||(d==="POST"?"application/x-www-form-urlencoded":""),g=g.data||"",i;c.onreadystatechange=function(){c.readyState===4&&(c.status>=200&&c.status<300?b(c.responseText,c):l(c))};typeof g==="object"&&(g=q(g));c.open(d,a,!0);h&&c.setRequestHeader("Content-Type",h);c.setRequestHeader("X-Requested-With","XMLHttpRequest");
for(i in e)c.setRequestHeader(i,e[i]);c.send(g)};d.version="0.2.9";window.r=d})(document,Array.prototype.slice,encodeURIComponent);(function(c,f,e){c.r.load=function(c,j){var k=0,i=c.length;c.forEach(function(c){var d=f.createElement("script");d.src=c;d.onload=function(){d.removeAttribute("onload");++k===i&&j()};e.appendChild(d)})}})(window,document,document.getElementsByTagName("head")[0]);(function(c,f,e){function d(c,d){var e=d;if(typeof c!=="function")throw Error("First parameter should be function");if(typeof d==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(d){e=c(e,d)});return e}function j(){return this.replace(/(^\s+)|(\s+$)/g,"")}function k(c){return eval("("+c+")")}if(typeof f.reduce!=="function")f.reduce=d;if(typeof e.trim!=="function")e.trim=j;if(typeof c.JSON!=="object")c.JSON={},c.JSON.parse=k})(window,Array.prototype,String.prototype);(function(){r.fn.union=function(c){return c.__proto__===r.fn?r(this.concat(c)):this}})();(function(){function c(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function f(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function e(a){a=a.match(/(\d+(?:\.\d+)?)(m?)(s?)/);
return a[2]===""&&a[3]==="s"?Number(a[1])*1E3:a[2]==="m"&&a[3]==="s"?Number(a[1]):300}function d(a,b,c){var d=c||{},e=d.duration||m,d=d.easing||n,h,i=0,f={};b instanceof Array?(f["-webkit-transform"]=b.join(" "),h=1):typeof b==="object"&&(h=j(b,f));typeof c.callback==="function"&&a.waitTransitionEnd(e,function(){++i;h===i&&c.callback()});f["-webkit-transition"]=e+" "+d;f["-webkit-backface-visibility"]="hidden";f["-webkit-perspective"]="1000";a.css(f)}function j(a,b){var c,d=0;for(c in a)b[c]=a[c],
d++;return d}function k(a,b){return"scale("+a+","+b+")"}function i(a,b){if(typeof a==="number"&&typeof b==="number")return q+a+"px,"+b+"px"+h;else if(typeof a==="string"&&typeof b==="string")return q+a+","+b+h}var p="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,q="translate"+(p?"3d(":"("),h=p?",0)":")",m="0.3s",n="ease-in-out";r.fn.animate=function(a,b){var c=0,e=this.length,h=b||{},f=h.callback||function(){};h.callback=function(){++c;c===e&&f()};this.each(function(b){d(b,a,h)})};r.fn.scale=
function(a,b,c){this.animate([k(a,b)],c)};r.fn.scaleR=function(a,b,c){var d=f(this);this.animate([k(d.x*a,d.y*b)],c)};r.fn.scaleX=function(a,b){var c=f(this);this.animate([k(a,c.y)],b)};r.fn.scaleRX=function(a,b){var c=f(this);this.animate([k(c.x*a,c.y)],b)};r.fn.scaleY=function(a,b){var c=f(this);this.animate([k(c.x,yScale)],b)};r.fn.scaleRY=function(a,b){var c=f(this);this.animate([k(c.x,c.y*a)],b)};r.fn.move=function(a,b,c){this.animate([i(a,b)],c)};r.fn.moveR=function(a,b,d){var e=c(this);this.animate([i(e.x+
a,e.y+b)],d)};r.fn.moveX=function(a,b){var d=c(this);this.animate([i(a,d.y)],b)};r.fn.moveRX=function(a,b,d){b=c(this);this.animate([i(b.x+a,b.y)],d)};r.fn.moveY=function(a,b){var d=c(this);this.animate([i(d.x,a)],b)};r.fn.moveRY=function(a,b){var d=c(this);this.animate([i(d.x,d.y+a)],b)};r.fn.fadeIn=function(a){var b=this;this.show();setTimeout(function(){b.animate({opacity:1},a)},0)};r.fn.fadeOut=function(a){var b=this;this.animate({opacity:0},a);this.waitTransitionEnd(typeof a==="object"?a.duration:
null,function(){b.hide()},!0)};r.fn.show=function(a){this.animate({display:"block"},a)};r.fn.hide=function(a){this.animate({display:"none"},a)};r.fn.waitTransitionEnd=function(a,b,c){var d=this,h,f,a=a||m;h=function(a,e){clearTimeout(e);b();c&&d.unbind("webkitTransitionEnd")};f=setTimeout(function(){h(null,f)},e(a)+200);d.bind("webkitTransitionEnd",h)}})();r(function(){var c,f,e,d,j,k,i;function p(c,d,e,a){var b=document.createEvent("MouseEvent");b.initMouseEvent(d,!0,!0,window,null,e,a);c.dispatchEvent(b)}var q=document.body;c=void 0;f=void 0;e=void 0;d=void 0;j=void 0;k=void 0;i=void 0;r(q).bind("touchstart",function(h){f=h.changedTouches[0].clientX;e=h.changedTouches[0].clientY;d={x:h.changedTouches[0].clientX,y:h.changedTouches[0].clientY};c=h.changedTouches[0].target;j=Date.now()},!0);r(q).bind("touchmove",function(e){var f,j;f=e.changedTouches[0].clientX-
d.x;j=e.changedTouches[0].clientY-d.y;var a;a=r(c).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);a=a===null?{x:0,y:0,z:0}:{x:Number(a[1]),y:Number(a[2]),z:Number(a[3])};f=a.x+f;j=a.y+j;p(c,"drag",1.6*f,1.6*j);d.x=e.changedTouches[0].clientX;d.y=e.changedTouches[0].clientY;k=e.changedTouches[0].clientX;i=e.changedTouches[0].clientY;e.preventDefault()},!0);r(q).bind("touchend",function(h){var m=f-k,n=e-i,a=Math.abs(m),b=Math.abs(n);j&&Date.now()-j>1E3?(c=void 0,
f=void 0,e=void 0,d=void 0,j=void 0,k=void 0,i=void 0):(b>30&&b>a?(h.preventDefault(),n>=0?p(c,"swipeup",m,n):p(c,"swipedown",m,n)):a>30&&a>b&&(h.preventDefault(),m>=0?p(c,"swipeleft",m,n):p(c,"swiperight",m,n)),f=0,k=0,e=0,i=0,c=null,d=void 0,j=void 0)},!0);r(q).bind("touchcancel",function(){f=0;k=0;e=0;i=0;c=null;d=void 0;j=void 0},!0);["swipeleft","swiperight","swipeup","swipedown"].forEach(function(c){r.fn[c]=function(d,e){this.bind(c,d,e)}})});(function(){function c(c){this.storage=c}function f(e){return f.sname||(f.sname=new c(window[e+"Storage"]))}c.prototype.set=function(c,d){if(typeof c==="number"||typeof c==="string")this.storage.setItem(c,JSON.stringify(d));else if(typeof d==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};c.prototype.get=function(c){return typeof this.storage[c]==="undefined"?null:JSON.parse(this.storage.getItem(c))};
c.prototype.clear=function(){this.storage.clear()};c.prototype.size=function(){return this.storage.length};c.prototype.keys=function(){var c=[],d;for(d in this.storage)c.push(d);return c};c.prototype.values=function(){var c=[],d;for(d in this.storage)c.push(this.get(d));return c};r.storage=f})();
