/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(d,c,g,i,k,e){function b(a,m){if("string"===typeof a)return h(i.call((m||c).querySelectorAll(a)));if("object"===typeof a&&null!==a&&"function"===typeof a.addEventListener)return h([a]);if(g(a))return h(a);"function"===typeof a&&(b.domReady?a(b):c.addEventListener("DOMContentLoaded",function(){a(b)},!1),b.init=a)}function h(a){a.__proto__=b.fn;return a}function n(a){return a.__nid||(a.__nid=b.__nid++)}b.listeners={};b.__nid=1;b.domReady=!1;c.addEventListener("DOMContentLoaded",function(){b.domReady=
!0},!1);b.fn={each:function(a){return this.forEach(function(m){a(b.wrap([m]))})},html:function(a){if(a===e)return this[0].innerHTML;"string"===typeof a||"number"===typeof a?this.forEach(function(b){b.innerHTML=a}):a instanceof HTMLElement?this.forEach(function(b){b.innerHTML=a.outerHTML}):b.isR(a)&&this.forEach(function(b){b.innerHTML=a[0].outerHTML});return this},remove:function(){this.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)});return this},add:function(a){var m;"string"===typeof a||
"number"===typeof a?this.forEach(function(b){b.insertAdjacentHTML("beforeEnd",a)}):a instanceof HTMLElement?this.forEach(function(b){b.appendChild(a)}):b.isR(a)&&(m=c.createDocumentFragment(),a.forEach(function(a){m.appendChild(a)}),this.forEach(function(a){a.appendChild(m)}));return this},attr:function(a,b){if("string"===typeof a){if(b===e)return this[0].getAttribute(a);null===b?this.forEach(function(b){b.removeAttribute(a)}):this.forEach(function(j){j.setAttribute(a,""+b)})}else"object"===typeof a&&
this.forEach(function(b){for(var f in a)null===a[f]?b.removeAttribute(f):b.setAttribute(f,""+a[f])});return this},css:function(a,b){if("string"===typeof a){if(b===e)return getComputedStyle(this[0],null).getPropertyValue(a);null===b?this.forEach(function(b){b.style.removeProperty(a)}):this.forEach(function(j){j.style.setProperty(a,b,null)})}else"object"===typeof a&&this.forEach(function(b){var f=";",o;for(o in a)null===a[o]?b.style.removeProperty(o):f+=o+":"+a[o]+";";b.style.cssText+=f});return this},
addClass:function(a){this.forEach(function(m){var j;b(m).hasClass(a)||(j=m.className.split(" "),j.push(a),m.className=j.join(" "))});return this},removeClass:function(a){this.forEach(function(b){var j=b.className.split(" ");b.className=j.filter(function(f){return f!==a}).join(" ")});return this},hasClass:function(a){return!!this[0].className.match(RegExp("(?:^|\\b)"+a+"(?:\\b|$)"))},toggleClass:function(a){this.hasClass(a)?this.removeClass(a):this.addClass(a)},bind:function(a,m,j){var f=a.split(" ");
this.forEach(function(a){var l=n(a),c=b.listeners[l]||(b.listeners[l]=[]);f.forEach(function(f){c.push({event:f,callback:m,index:c.length,useCapture:j||!1});a.addEventListener(f,m,j||!1)})});return this},unbind:function(a){function m(a,f){return a.filter(function(a){return a.event===f})}this.forEach(function(c){var f=n(c),o=a?m(b.listeners[f]||[],a):b.listeners[f];o&&o.forEach(function(a){delete o[a.index];c.removeEventListener(a.event,a.callback,a.useCapture)})});return this},trigger:function(a){var b=
c.createEvent("Event");b.initEvent(a,!0,!0);this.forEach(function(a){a.dispatchEvent(b)});return this}};b.fn.__proto__=[];b.ajax=function(a,b,c,f){function o(a){var f=[],b;for(b in a)f.push(k(b)+"="+k(a[b]));return f.join("&")}var l=new XMLHttpRequest,f=f||{},b=b||function(){},c=c||function(){},d=f.method||"GET",e=f.header||{},g=f.ctype||("POST"===d?"application/x-www-form-urlencoded":""),f=f.data||"",h;l.onreadystatechange=function(){4===l.readyState&&(200<=l.status&&300>l.status?b(l.responseText,
l):c(l))};"object"===typeof f&&(f=o(f));l.open(d,a,!0);g&&l.setRequestHeader("Content-Type",g);l.setRequestHeader("X-Requested-With","XMLHttpRequest");for(h in e)l.setRequestHeader(h,e[h]);l.send(f);return l};b.get=function(a,c,d,f){return b.ajax(a,d,f,{data:c,method:"GET"})};b.post=function(a,c,d,f){return b.ajax(a,d,f,{data:c,method:"POST"})};b.id=function(a,b){var d=(b||c).getElementById(a);return d?h([d]):h([])};b.cls=function(a,b){return h((b||c).getElementsByClassName(a))};b.tag=function(a,
b){return h((b||c).getElementsByTagName(a))};b.isR=function(a){return a.__proto__===b.fn};b.wrap=h;b.nodeId=n;b.on=b.bind;b.off=b.unbind;b.version="0.4.0";d.r=b})(this,document,Array.isArray||function(d){return d instanceof Array},Array.prototype.slice,encodeURIComponent);(function(){function d(a){a=a.css("-webkit-transform");a="string"===typeof a?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return null!==a&&3===a.length?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function c(a){a=a.css("-webkit-transform");a="string"===typeof a?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return null!==a&&3===a.length?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function g(a){a=(""+a).match(/(\d+(?:\.\d+)?)(m?)(s?)/);
return""===a[2]&&"s"===a[3]?1E3*Number(a[1]):"m"===a[2]&&"s"===a[3]?Number(a[1]):300}function i(a,b,l){var c=l||{},d=c.duration||m,c=c.easing||j,e,h=0,g={};b instanceof Array?(g["-webkit-transform"]=b.join(" "),e=1):"object"===typeof b&&(e=k(b,g));"function"===typeof l.callback&&a.waitTransitionEnd(d,function(){++h;e===h&&l.callback()});g["-webkit-transition"]=d+" "+c;g["-webkit-backface-visibility"]="hidden";g["-webkit-perspective"]="1000";a.css(g)}function k(a,b){var c,d=0;for(c in a)b[c]=a[c],
d++;return d}function e(a,b){return"scale("+a+","+b+")"}function b(b,c){if("number"===typeof b&&"number"===typeof c)return n+b+"px,"+c+"px"+a;if("string"===typeof b&&"string"===typeof c)return n+b+","+c+a}var h="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,n="translate"+(h?"3d(":"("),a=h?",0)":")",m="0.3s",j="ease-in-out";r.fn.animate=function(a,b){var c=0,d=this.length,e=b||{},g=e.callback||function(){};e.callback=function(){++c;c===d&&g()};this.each(function(b){i(b,a,e)})};r.fn.scale=
function(a,b,c){this.animate([e(a,b)],c)};r.fn.scaleR=function(a,b,d){var g=c(this);this.animate([e(g.x*a,g.y*b)],d)};r.fn.scaleX=function(a,b){var d=c(this);this.animate([e(a,d.y)],b)};r.fn.scaleRX=function(a,b){var d=c(this);this.animate([e(d.x*a,d.y)],b)};r.fn.scaleY=function(a,b){var d=c(this);this.animate([e(d.x,yScale)],b)};r.fn.scaleRY=function(a,b){var d=c(this);this.animate([e(d.x,d.y*a)],b)};r.fn.move=function(a,c,d){this.animate([b(a,c)],d)};r.fn.moveR=function(a,c,e){var g=d(this);this.animate([b(g.x+
a,g.y+c)],e)};r.fn.moveX=function(a,c){var e=d(this);this.animate([b(a,e.y)],c)};r.fn.moveRX=function(a,c,e){c=d(this);this.animate([b(c.x+a,c.y)],e)};r.fn.moveY=function(a,c){var e=d(this);this.animate([b(e.x,a)],c)};r.fn.moveRY=function(a,c){var e=d(this);this.animate([b(e.x,e.y+a)],c)};r.fn.fadeIn=function(a){var b=this;this.show();setTimeout(function(){b.animate({opacity:1},a)},0)};r.fn.fadeOut=function(a){var b=this;this.animate({opacity:0},a);this.waitTransitionEnd("object"===typeof a?a.duration:
null,function(){b.hide()},!0)};r.fn.show=function(a){this.animate({display:"block"},a)};r.fn.hide=function(a){this.animate({display:"none"},a)};r.fn.waitTransitionEnd=function(a,b,c){var d=this,e,h,a=a||m;e=function(a,e){clearTimeout(e);b();c&&d.unbind("webkitTransitionEnd")};h=setTimeout(function(){e(null,h)},g(a)+200);d.bind("webkitTransitionEnd",e)}})();(function(d,c,g){function i(b,c){var d=c;if("function"!==typeof b)throw Error("First parameter should be function");if("undefined"===typeof c)throw Error("Second parameter should not be undefined");this.forEach(function(a){d=b(d,a)});return d}function k(){return this.replace(/(^\s+)|(\s+$)/g,"")}function e(b){return eval("("+b+")")}"function"!==typeof c.reduce&&(c.reduce=i);"function"!==typeof g.trim&&(g.trim=k);"object"!==typeof d.JSON&&(d.JSON={},d.JSON.parse=e)})(window,Array.prototype,String.prototype);(function(){function d(c){var d=[],i=[];c.split(".").forEach(function(c){i.push(c);d.push(i.join("."))});return d}r.fn.delegate=function(c,d,i){this.bind(d,function(d){var e=r(c,this).detect(function(b){b=b.compareDocumentPosition(d.target);return 0===b||b&Node.DOCUMENT_POSITION_CONTAINED_BY});e&&i.call(e,d)})};r.fn.bind=function(c,d,i){var k=c.split(" ");this.forEach(function(c){var b=getNodeId(c),h=listeners[b]||(listeners[b]=[]);k.forEach(function(b){h.push({event:b,callback:d,index:h.length,useCapture:i||
!1});c.addEventListener(b,d,i||!1)})});return this};r.fn.bind=function(c,g,i,k){this.forEach(function(c){var b=r.nodeId(c);events.forEach(function(g){var n=d(g);n.forEach(function(a){var c=n[0];r.listeners[b]=r.listeners[b]||{};a=r.listeners[b][a]||(r.listeners[b][a]=[]);a.push({name:c,actor:el,callback:i,index:a.length,useCapture:k||!1})});c.addEventListener(n[0],i,k||!1)})})}})();r.fn.collect=function(d){return this.map(function(c){return d(r.wrap([c]))})};r.fn.any=function(d){return this.some(function(c){return d(r.wrap([c]))})};r.fn.all=function(d){return this.every(function(c){return d(r.wrap([c]))})};r.fn.fold=function(d,c){return this.reduce(function(c){return d(r.wrap([c]))},c)};r.fn.foldRight=function(d,c){return this.reduceRight(function(c){return d(r.wrap([c]))},c)};r(function(){function d(a,b,c,d){var e=document.createEvent("MouseEvent");e.initMouseEvent(b,!0,!0,window,null,c,d);a.dispatchEvent(e)}var c=document.body,g,i,k,e,b,h,n;r(c).bind("touchstart",function(a){g=a.changedTouches[0].clientX;i=a.changedTouches[0].clientY;k={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};e=a.changedTouches[0].target;b=Date.now()},!0);r(c).bind("touchmove",function(a){var b=a.changedTouches[0].clientX-k.x,c=a.changedTouches[0].clientY-k.y,f;f=r(a.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);
f=null===f?{x:0,y:0,z:0}:{x:Number(f[1]),y:Number(f[2]),z:Number(f[3])};d(e,"drag",1.6*(f.x+b),1.6*(f.y+c));k.x=a.changedTouches[0].clientX;k.y=a.changedTouches[0].clientY;h=a.changedTouches[0].clientX;n=a.changedTouches[0].clientY;a.preventDefault()},!0);r(c).bind("touchend",function(a){var c=g-h,j=i-n,f=Math.abs(c),o=Math.abs(j);b&&1E3<Date.now()-b?n=h=b=e=k=i=g=void 0:(30<o&&o>f?(a.preventDefault(),0<=j?d(e,"swipeup",c,j):d(e,"swipedown",c,j)):30<f&&f>o&&(a.preventDefault(),0<=c?d(e,"swipeleft",
c,j):d(e,"swiperight",c,j)),n=i=h=g=0,e=null,b=k=void 0)},!0);r(c).bind("touchcancel",function(){n=i=h=g=0;e=null;b=k=void 0},!0)});
