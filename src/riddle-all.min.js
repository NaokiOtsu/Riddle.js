/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(d,i,f){function c(b,a){if(typeof b==="string")return m(b,a,"querySelectorAll");else if(b instanceof Array)return j(b);else if(typeof b.addEventListener==="function")return j(g(b));else typeof b==="function"&&(n?b(c):d.addEventListener("DOMContentLoaded",function(){b(c)},!1))}function m(b,a,h){if(a===void 0||a instanceof HTMLElement)return j(g((a||d)[h](b)));else if(a.__proto__===c.fn){var e=[];a.map(function(a){return g(a[h](b))}).forEach(function(a){a.forEach(function(a){e.push(a)})});
return j(e)}}function g(b){if(b===null||b===void 0)return[];else if(b instanceof HTMLElement)return[b];else if(typeof b.length==="number"&&typeof b.item==="function")return i.call(b)}function j(b){b.__proto__=c.fn;return b}function o(b,a){return b.filter(function(b){return b.event===a})}var l={},k=1,n=!1;c.fn={detect:function(b){return this.filter(b)[0]},invoke:function(){var b=i.call(arguments),a=b.shift();return this.map(function(h){return h[a].apply(h,b)})},pluck:function(b){return this.map(function(a){return a[b]})},
each:function(b){return this.forEach(function(a){b(j(g(a)))})},html:function(b){var a;if(b===void 0)return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(a){return a});else typeof b==="string"||typeof b==="number"?this.forEach(function(a){a.innerHTML=b}):b instanceof HTMLElement?this.forEach(function(a){a.innerHTML=b.outerHTML}):b.__proto__===c.fn&&(a=b.map(function(a){return a.outerHTML}).join(""),this.forEach(function(b){b.innerHTML=a}));return this},add:function(b){var a;
typeof b==="string"?this.forEach(function(a){a.insertAdjacentHTML("beforeEnd",b)}):b instanceof HTMLElement?this.forEach(function(a){a.appendChild(b)}):b.__proto__===c.fn&&(a=d.createDocumentFragment(),b.forEach(function(b){a.appendChild(b)}),this.forEach(function(b){b.appendChild(a)}));return this},remove:function(){this.forEach(function(b){b.parentNode instanceof HTMLElement&&b.parentNode.removeChild(b)});return this},attr:function(b,a){if(typeof b==="string")if(a===void 0)return this.length===
1?this[0].getAttribute(b):this.invoke("getAttribute",b);else a===null?this.invoke("removeAttribute",b):this.invoke("setAttribute",b,String(a));else typeof b==="object"&&this.forEach(function(a){for(var e in b)b[e]===null?a.removeAttribute(e):a.setAttribute(e,String(b[e]))});return this},css:function(b,a){if(typeof b==="string")if(a===void 0)return this.length===1?getComputedStyle(this[0],null).getPropertyValue(b):this.map(function(a){return getComputedStyle(a,null).getPropertyValue(b)});else a===
null?this.forEach(function(a){a.style.removeProperty(b)}):this.forEach(function(h){h.style.setProperty(b,a,null)});else typeof b==="object"&&this.forEach(function(a){var e=";",c;for(c in b)b[c]===null?a.style.removeProperty(c):e+=c+":"+b[c]+";";a.style.cssText+=e});return this},addClass:function(b){this.forEach(function(a){a.className===""?a.className=b:a.className+=" "+b});return this},removeClass:function(b){var a=RegExp("(?:^|\\b)"+b+"(?:\\b|$)\\s?","g");this.forEach(function(b){var e=b.className.replace(a,
"");b.className=e.replace(/\s+$/,"")});return this},hasClass:function(b){var a=RegExp("(?:^|\\b)"+b+"(?:\\b|$)");return this.length===1?!!this[0].className.match(a):this.map(function(b){return!!b.className.match(a)})},swapClass:function(b,a){this.removeClass(b);this.addClass(a)},bind:function(b,a,h){this.forEach(function(e){var c=e.__nid||(e.__nid=k++),c=l[c]||(l[c]=[]);c.push({event:b,callback:a,index:c.length});e.addEventListener(b,a,h||!1)});return this},unbind:function(b){this.forEach(function(a){var h=
a.__nid||(a.__nid=k++),e=b?o(l[h],b):l[h];e&&e.forEach(function(b){delete e[b.index];a.removeEventListener(b.event,b.callback,!1)})});return this},delegate:function(b,a,h){this.bind(a,function(a){var d=c(b,this).detect(function(b){b=b.compareDocumentPosition(a.target);return b===0||b&Node.DOCUMENT_POSITION_CONTAINED_BY});d&&h.call(d,a)})}};d.addEventListener("DOMContentLoaded",function(){n=!0},!1);c.fn.__proto__=[];c.ajax=function(b,a,h,e){function c(a){var b=[],h;for(h in a)b.push(f(h)+"="+f(a[h]));
return b.join("&")}var d=new XMLHttpRequest,e=e||{},a=a||function(){},h=h||function(){},k=e.method||"GET",j=e.header||{},g=e.ctype||(k==="POST"?"application/x-www-form-urlencoded":""),e=e.data||"",i;d.onreadystatechange=function(){d.readyState===4&&(d.status>=200&&d.status<300?a(d.responseText,d):h(d))};typeof e==="object"&&(e=c(e));d.open(k,b,!0);g&&d.setRequestHeader("Content-Type",g);d.setRequestHeader("X-Requested-With","XMLHttpRequest");for(i in j)d.setRequestHeader(i,j[i]);d.send(e)};c.id=function(b,
a){return m(b,a,"getElementById")};c.cls=function(b,a){return m(b,a,"getElementsByClassName")};c.tag=function(b,a){return m(b,a,"getElementsByTagName")};c.isR=function(b){return b.__proto__===c.fn};c.version="0.2.9";window.r=c})(document,Array.prototype.slice,encodeURIComponent);(function(d,i,f){d.r.load=function(c,d){var g=0,j=c.length;c.forEach(function(c){var l=i.createElement("script");l.src=c;l.onload=function(){l.removeAttribute("onload");++g===j&&d()};f.appendChild(l)})}})(window,document,document.getElementsByTagName("head")[0]);(function(d,i,f){function c(c,d){var f=d;if(typeof c!=="function")throw Error("First parameter should be function");if(typeof d==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(d){f=c(f,d)});return f}function m(){return this.replace(/(^\s+)|(\s+$)/g,"")}function g(c){return eval("("+c+")")}if(typeof i.reduce!=="function")i.reduce=c;if(typeof f.trim!=="function")f.trim=m;if(typeof d.JSON!=="object")d.JSON={},d.JSON.parse=g})(window,Array.prototype,String.prototype);(function(){r.fn.union=function(d){return d.__proto__===r.fn?r(this.concat(d)):this}})();(function(){function d(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function i(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function f(a){a=String(a).match(/(\d+(?:\.\d+)?)(m?)(s?)/);
return a[2]===""&&a[3]==="s"?Number(a[1])*1E3:a[2]==="m"&&a[3]==="s"?Number(a[1]):300}function c(a,h,e){var c=e||{},d=c.duration||n,c=c.easing||b,f,g=0,k={};h instanceof Array?(k["-webkit-transform"]=h.join(" "),f=1):typeof h==="object"&&(f=m(h,k));typeof e.callback==="function"&&a.waitTransitionEnd(d,function(){++g;f===g&&e.callback()});k["-webkit-transition"]=d+" "+c;k["-webkit-backface-visibility"]="hidden";k["-webkit-perspective"]="1000";a.css(k)}function m(a,b){var e,c=0;for(e in a)b[e]=a[e],
c++;return c}function g(a,b){return"scale("+a+","+b+")"}function j(a,b){if(typeof a==="number"&&typeof b==="number")return l+a+"px,"+b+"px"+k;else if(typeof a==="string"&&typeof b==="string")return l+a+","+b+k}var o="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,l="translate"+(o?"3d(":"("),k=o?",0)":")",n="0.3s",b="ease-in-out";r.fn.animate=function(a,b){var e=0,d=this.length,f=b||{},k=f.callback||function(){};f.callback=function(){++e;e===d&&k()};this.each(function(b){c(b,a,f)})};r.fn.scale=
function(a,b,e){this.animate([g(a,b)],e)};r.fn.scaleR=function(a,b,e){var c=i(this);this.animate([g(c.x*a,c.y*b)],e)};r.fn.scaleX=function(a,b){var e=i(this);this.animate([g(a,e.y)],b)};r.fn.scaleRX=function(a,b){var e=i(this);this.animate([g(e.x*a,e.y)],b)};r.fn.scaleY=function(a,b){var e=i(this);this.animate([g(e.x,yScale)],b)};r.fn.scaleRY=function(a,b){var e=i(this);this.animate([g(e.x,e.y*a)],b)};r.fn.move=function(a,b,e){this.animate([j(a,b)],e)};r.fn.moveR=function(a,b,e){var c=d(this);this.animate([j(c.x+
a,c.y+b)],e)};r.fn.moveX=function(a,b){var c=d(this);this.animate([j(a,c.y)],b)};r.fn.moveRX=function(a,b,c){b=d(this);this.animate([j(b.x+a,b.y)],c)};r.fn.moveY=function(a,b){var c=d(this);this.animate([j(c.x,a)],b)};r.fn.moveRY=function(a,b){var c=d(this);this.animate([j(c.x,c.y+a)],b)};r.fn.fadeIn=function(a){var b=this;this.show();setTimeout(function(){b.animate({opacity:1},a)},0)};r.fn.fadeOut=function(a){var b=this;this.animate({opacity:0},a);this.waitTransitionEnd(typeof a==="object"?a.duration:
null,function(){b.hide()},!0)};r.fn.show=function(a){this.animate({display:"block"},a)};r.fn.hide=function(a){this.animate({display:"none"},a)};r.fn.waitTransitionEnd=function(a,b,c){var d=this,k,g,a=a||n;k=function(a,f){clearTimeout(f);b();c&&d.unbind("webkitTransitionEnd")};g=setTimeout(function(){k(null,g)},f(a)+200);d.bind("webkitTransitionEnd",k)}})();r(function(){function d(c,d,b,a){var f=document.createEvent("MouseEvent");f.initMouseEvent(d,!0,!0,window,null,b,a);c.dispatchEvent(f)}var i=document.body,f,c,m,g,j,o,l;r(i).bind("touchstart",function(d){f=d.changedTouches[0].clientX;c=d.changedTouches[0].clientY;m={x:d.changedTouches[0].clientX,y:d.changedTouches[0].clientY};g=d.changedTouches[0].target;j=Date.now()},!0);r(i).bind("touchmove",function(c){var f,b;f=c.changedTouches[0].clientX-m.x;b=c.changedTouches[0].clientY-m.y;var a;a=r(c.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);
a=a===null?{x:0,y:0,z:0}:{x:Number(a[1]),y:Number(a[2]),z:Number(a[3])};f=a.x+f;b=a.y+b;d(g,"drag",1.6*f,1.6*b);m.x=c.changedTouches[0].clientX;m.y=c.changedTouches[0].clientY;o=c.changedTouches[0].clientX;l=c.changedTouches[0].clientY;c.preventDefault()},!0);r(i).bind("touchend",function(i){var n=f-o,b=c-l,a=Math.abs(n),h=Math.abs(b);j&&Date.now()-j>1E3?(f=void 0,c=void 0,m=void 0,g=void 0,j=void 0,o=void 0,l=void 0):(h>30&&h>a?(i.preventDefault(),b>=0?d(g,"swipeup",n,b):d(g,"swipedown",n,b)):a>
30&&a>h&&(i.preventDefault(),n>=0?d(g,"swipeleft",n,b):d(g,"swiperight",n,b)),f=0,o=0,c=0,l=0,g=null,m=void 0,j=void 0)},!0);r(i).bind("touchcancel",function(){f=0;o=0;c=0;l=0;g=null;m=void 0;j=void 0},!0)});(function(){function d(d){this.storage=d}function i(f){return i.sname||(i.sname=new d(window[f+"Storage"]))}d.prototype.set=function(d,c){if(typeof d==="number"||typeof d==="string")this.storage.setItem(d,JSON.stringify(c));else if(typeof c==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};d.prototype.get=function(d){return typeof this.storage[d]==="undefined"?null:JSON.parse(this.storage.getItem(d))};
d.prototype.clear=function(){this.storage.clear()};d.prototype.size=function(){return this.storage.length};d.prototype.keys=function(){var d=[],c;for(c in this.storage)d.push(c);return d};d.prototype.values=function(){var d=[],c;for(c in this.storage)d.push(this.get(c));return d};r.storage=i})();
