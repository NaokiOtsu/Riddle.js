/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(b,i,g){function f(d,a){if(typeof d==="string")return k(d,a,"querySelectorAll");else if(d instanceof HTMLElement)return h(j(d));else typeof d==="function"&&(m?d(f):b.addEventListener("DOMContentLoaded",function(){d(f)},!1))}function k(d,a,c){if(typeof a==="undefined"||a instanceof HTMLElement)return h(j((a||b)[c](d)));else if(a.__proto__===f.fn){var e=[];a.map(function(a){return j(a[c](d))}).forEach(function(d){d.forEach(function(d){e.push(d)})});return h(e)}}function j(d){if(d===null)return[];
else if(d instanceof HTMLElement)return[d];else if(typeof d.length==="number"&&typeof d.item==="function")return i.call(d)}function h(d){d.__proto__=f.fn;return d}function a(d,a){return d.filter(function(d){return d.event===a})}function e(d){var a=[],c;for(c in d)a.push(g(c)+"="+g(d[c]));return a.join("&")}var c={},n=1,l,m=!1;f.fn={detect:function(d){return this.filter(d)[0]},invoke:function(){var d=i.call(arguments),a=d.shift();return this.map(function(c){return c[a].apply(c,d)})},pluck:function(d){return this.map(function(a){return a[d]})},
each:function(d){return this.forEach(function(a){d(h(j(a)))})},html:function(d){var a;if(typeof d==="undefined")return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(d){return d});else typeof d==="string"||typeof d==="number"?this.forEach(function(a){a.innerHTML=d}):d instanceof HTMLElement?this.forEach(function(a){a.innerHTML=d.outerHTML}):d.__proto__===f.fn&&(a=d.map(function(d){return d.outerHTML}).join(""),this.forEach(function(d){d.innerHTML=a}));return this},add:function(d){var a;
typeof d==="string"?this.forEach(function(a){a.insertAdjacentHTML("beforeEnd",d)}):d instanceof HTMLElement?this.forEach(function(a){a.appendChild(d)}):d.__proto__===f.fn&&(a=b.createDocumentFragment(),d.forEach(function(d){a.appendChild(d)}),this.forEach(function(d){d.appendChild(a)}));return this},remove:function(){this.forEach(function(d){d.parentNode.removeChild(d)});return this},attr:function(d,a){if(typeof d==="string")if(typeof a==="undefined")return this.length===1?this[0].getAttribute(d):
this.invoke("getAttribute",d);else a===null?this.invoke("removeAttribute",d):this.invoke("setAttribute",d,String(a));else typeof d==="object"&&this.forEach(function(a){for(var c in d)d[c]===null?a.removeAttribute(c):a.setAttribute(c,String(d[c]))});return this},css:function(d,a){if(typeof d==="string")if(typeof a==="undefined")return this.length===1?getComputedStyle(this[0],"").getPropertyValue(d):this.map(function(a){return getComputedStyle(a,"").getPropertyValue(d)});else a===null?this.forEach(function(a){a.style.removeProperty(d)}):
this.forEach(function(c){c.style.setProperty(d,a,"")});else typeof d==="object"&&this.forEach(function(a){var c=";",e;for(e in d)d[e]===null?a.style.removeProperty(e):c+=e+":"+d[e]+";";a.style.cssText+=c});return this},addClass:function(a){this.forEach(function(c){c.className===""?c.className=a:c.className+=" "+a});return this},removeClass:function(a){var c=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(a){var d=a.className.replace(c,"");a.className=d.replace(/\s+$/,"")});return this},
hasClass:function(a){var c=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(c):this.map(function(a){return!!a.className.match(c)})},swapClass:function(a,c){this.removeClass(a);this.addClass(c)},bind:function(a,e,f){this.forEach(function(b){var g=b.nid||(b.nid=n++),g=c[g]||(c[g]=[]);g.push({event:a,callback:e,index:g.length});b.addEventListener(a,e,f||!1)});return this},unbind:function(d){this.forEach(function(e){var f=e.nid||(e.nid=n++),b=d?a(c[f],d):c[f];b&&b.forEach(function(a){delete b[a.index];
e.removeEventListener(a.event,a.callback,!1)})});return this}};b.addEventListener("DOMContentLoaded",function(){l=f(b.body);m=!0},!1);f.fn.__proto__=[];f.id=function(a,c){return k(a,c,"getElementById")};f.cls=function(a,c){return k(a,c,"getElementsByClassName")};f.tag=function(a,c){return k(a,c,"getElementsByTagName")};f.ajax=function(a,c,f,b){var g=new XMLHttpRequest,b=b||{},c=c||function(){},f=f||function(){},n=b.method||"GET",h=b.header||{},l=b.ctype||(n==="POST"?"application/x-www-form-urlencoded":
""),b=b.data||"",j;g.onreadystatechange=function(){g.readyState===4&&(g.status>=200&&g.status<300?c(g.responseText,g):f(g))};typeof b==="object"&&(b=e(b));g.open(n,a,!0);l&&g.setRequestHeader("Content-Type",l);g.setRequestHeader("X-Requested-With","XMLHttpRequest");for(j in h)g.setRequestHeader(j,h[j]);g.send(b)};f.delegate=function(a,c,e){l.bind(c,function(c){f(a).detect(function(a){return a===c.target})&&e(c)})};f.version="0.2.9";window.r=f})(document,Array.prototype.slice,encodeURIComponent);(function(b,i,g){b.r.load=function(b,k){var j=0,h=b.length;b.forEach(function(a){var e=i.createElement("script");e.src=a;e.onload=function(){e.removeAttribute("onload");++j===h&&k()};g.appendChild(e)})}})(window,document,document.getElementsByTagName("head")[0]);(function(b,i,g){function f(b,a){var e=a;if(typeof b!=="function")throw Error("First parameter should be function");if(typeof a==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(a){e=b(e,a)});return e}function k(){return this.replace(/(^\s+)|(\s+$)/g,"")}function j(b){return eval("("+b+")")}if(typeof i.reduce!=="function")i.reduce=f;if(typeof g.trim!=="function")g.trim=k;if(typeof b.JSON!=="object")b.JSON={},b.JSON.parse=j})(window,Array.prototype,String.prototype);(function(){function b(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function i(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function g(a,e,c){var b="0.3s",g="ease-in-out",
j,d=0,h={};e instanceof Array?(h["-webkit-transform"]=e.join(" "),j=1):typeof e==="object"&&(j=f(e,h));if(typeof c==="object"){typeof c.duration==="string"?b=c.duration:typeof c.duration==="number"&&(b=c.duration+"s");if(typeof c.easing==="string")g=c.easing;typeof c.callback==="function"&&a.bind("webkitTransitionEnd",function(e){++d;j===d&&(c.callback(e),a.unbind("webkitTransitionEnd"))})}h["-webkit-transition"]=b+" "+g;h["-webkit-backface-visibility"]="hidden";h["-webkit-perspective"]="1000";h["-webkit-transform-origin"]=
"0 0";a.css(h)}function f(a,e){var c,b=0;for(c in a)e[c]=a[c],b++;return b}var k="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,j="translate"+(k?"3d(":"("),h=k?",0)":")";r.fn.animate=function(a,e){var c=0,b=this.length,f=e||{},h=typeof f.callback==="function"?f.callback:function(){};f.callback=function(){++c;c===b&&h()};this.each(function(c){g(c,a,f)})};r.fn.scale=function(a,e,c){this.animate(["scale("+a+","+e+")"],c)};r.fn.scaleR=function(a,e,c){var b=i(this);this.animate(["scale("+b.x*
a+","+b.y*e+")"],c)};r.fn.scaleX=function(a,b){var c=i(this);this.animate(["scale("+a+","+c.y+")"],b)};r.fn.scaleRX=function(a,b){var c=i(this);this.animate(["scale("+c.x*a+","+c.y+")"],b)};r.fn.scaleY=function(a,b){this.animate(["scale("+i(this).x+","+yScale+")"],b)};r.fn.scaleRY=function(a,b){var c=i(this);this.animate(["scale("+c.x+","+c.y*a+")"],b)};r.fn.move=function(a,b,c){typeof a==="number"&&typeof b==="number"?this.animate([j+a+"px,"+b+"px"+h],c):typeof a==="string"&&typeof b==="string"&&
this.animate([j+a+","+b+h],c)};r.fn.moveR=function(a,e,c){var g=b(this);this.animate([j+(g.x+a)+"px,"+(g.y+e)+"px"+h],c)};r.fn.moveX=function(a,e){var c=b(this);typeof a==="number"?this.animate([j+a+"px,"+c.y+"px"+h],e):typeof a==="string"&&this.animate([j+a+","+c.y+h],e)};r.fn.moveRX=function(a,e,c){e=b(this);this.animate([j+(e.x+a)+"px,"+e.y+"px"+h],c)};r.fn.moveY=function(a,e){var c=b(this);typeof a==="number"?this.animate([j+c.x+"px,"+a+"px"+h],e):typeof a==="string"&&this.animate([j+c.x+"px,"+
a+h],e)};r.fn.moveRY=function(a,e){var c=b(this);this.animate([j+c.x+"px,"+(c.y+a)+"px"+h],e)};r.fn.fadeIn=function(a){this.animate({opacity:1},a)};r.fn.fadeOut=function(a){this.animate({opacity:0},a)};r.fn.show=function(a){this.animate({visibility:"visible"},a)};r.fn.hide=function(a){this.animate({visibility:"hidden"},a)}})();r(function(){var b,i,g,f,k,j,h;function a(a,b,e,g){var d=document.createEvent("MouseEvent");d.initMouseEvent(b,!0,!0,window,null,e,g);a.dispatchEvent(d)}var e=document.body;b=void 0;i=void 0;g=void 0;f=void 0;k=void 0;j=void 0;h=void 0;r(e).bind("touchstart",function(a){i=a.changedTouches[0].clientX;g=a.changedTouches[0].clientY;f={x:a.changedTouches[0].clientX,y:a.changedTouches[0].clientY};b=a.changedTouches[0].target;k=Date.now()},!0);r(e).bind("touchmove",function(c){var e,g;e=c.changedTouches[0].clientX-
f.x;g=c.changedTouches[0].clientY-f.y;var i;i=r(b).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);i=i===null?{x:0,y:0,z:0}:{x:Number(i[1]),y:Number(i[2]),z:Number(i[3])};e=i.x+e;g=i.y+g;a(b,"drag",1.6*e,1.6*g);f.x=c.changedTouches[0].clientX;f.y=c.changedTouches[0].clientY;j=c.changedTouches[0].clientX;h=c.changedTouches[0].clientY;c.preventDefault()},!0);r(e).bind("touchend",function(c){var e=i-j,l=g-h,m=Math.abs(e),d=Math.abs(l);k&&Date.now()-k>1E3?(b=void 0,
i=void 0,g=void 0,f=void 0,k=void 0,j=void 0,h=void 0):(d>30&&d>m?(c.preventDefault(),l>=0?a(b,"swipeup",e,l):a(b,"swipedown",e,l)):m>30&&m>d&&(c.preventDefault(),e>=0?a(b,"swipeleft",e,l):a(b,"swiperight",e,l)),i=0,j=0,g=0,h=0,b=null,f=void 0,k=void 0)},!0);r(e).bind("touchcancel",function(){i=0;j=0;g=0;h=0;b=null;f=void 0;k=void 0},!0);["swipeleft","swiperight","swipeup","swipedown"].forEach(function(a){r.fn[a]=function(b,e){this.bind(a,b,e)}})});(function(){function b(b){this.storage=b}function i(g){return i.sname||(i.sname=new b(window[g+"Storage"]))}b.prototype.set=function(b,f){if(typeof b==="number"||typeof b==="string")this.storage.setItem(b,JSON.stringify(f));else if(typeof f==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};b.prototype.get=function(b){return typeof this.storage[b]==="undefined"?null:JSON.parse(this.storage.getItem(b))};
b.prototype.clear=function(){this.storage.clear()};b.prototype.size=function(){return this.storage.length};b.prototype.keys=function(){var b=[],f;for(f in this.storage)b.push(f);return b};b.prototype.values=function(){var b=[],f;for(f in this.storage)b.push(this.get(f));return b};r.storage=i})();
