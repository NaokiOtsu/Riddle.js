/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(d,g,f){function e(a,b){if(typeof a==="string")return l(a,b,"querySelectorAll");else if(a instanceof Array)return h(a);else if(a instanceof HTMLElement)return h(k(a));else typeof a==="function"&&(c?a(e):d.addEventListener("DOMContentLoaded",function(){a(e)},!1))}function l(a,b,c){if(typeof b==="undefined"||b instanceof HTMLElement)return h(k((b||d)[c](a)));else if(b.__proto__===e.fn){var o=[];b.map(function(b){return k(b[c](a))}).forEach(function(a){a.forEach(function(a){o.push(a)})});return h(o)}}
function k(a){if(a===null)return[];else if(a instanceof HTMLElement)return[a];else if(typeof a.length==="number"&&typeof a.item==="function")return g.call(a)}function h(a){a.__proto__=e.fn;return a}function m(a,b){return a.filter(function(a){return a.event===b})}function j(a){var b=[],c;for(c in a)b.push(f(c)+"="+f(a[c]));return b.join("&")}var i={},n=1,c=!1;e.fn={detect:function(a){return this.filter(a)[0]},invoke:function(){var a=g.call(arguments),b=a.shift();return this.map(function(c){return c[b].apply(c,
a)})},pluck:function(a){return this.map(function(b){return b[a]})},each:function(a){return this.forEach(function(b){a(h(k(b)))})},html:function(a){var b;if(typeof a==="undefined")return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(a){return a});else typeof a==="string"||typeof a==="number"?this.forEach(function(b){b.innerHTML=a}):a instanceof HTMLElement?this.forEach(function(b){b.innerHTML=a.outerHTML}):a.__proto__===e.fn&&(b=a.map(function(a){return a.outerHTML}).join(""),
this.forEach(function(a){a.innerHTML=b}));return this},add:function(a){var b;typeof a==="string"?this.forEach(function(b){b.insertAdjacentHTML("beforeEnd",a)}):a instanceof HTMLElement?this.forEach(function(b){b.appendChild(a)}):a.__proto__===e.fn&&(b=d.createDocumentFragment(),a.forEach(function(a){b.appendChild(a)}),this.forEach(function(a){a.appendChild(b)}));return this},remove:function(){this.forEach(function(a){a.parentNode.removeChild(a)});return this},attr:function(a,b){if(typeof a==="string")if(typeof b===
"undefined")return this.length===1?this[0].getAttribute(a):this.invoke("getAttribute",a);else b===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(b));else typeof a==="object"&&this.forEach(function(b){for(var c in a)a[c]===null?b.removeAttribute(c):b.setAttribute(c,String(a[c]))});return this},css:function(a,b){if(typeof a==="string")if(typeof b==="undefined")return this.length===1?getComputedStyle(this[0],null).getPropertyValue(a):this.map(function(b){return getComputedStyle(b,
null).getPropertyValue(a)});else b===null?this.forEach(function(b){b.style.removeProperty(a)}):this.forEach(function(c){c.style.setProperty(a,b,null)});else typeof a==="object"&&this.forEach(function(b){var c=";",e;for(e in a)a[e]===null?b.style.removeProperty(e):c+=e+":"+a[e]+";";b.style.cssText+=c});return this},addClass:function(a){this.forEach(function(b){b.className===""?b.className=a:b.className+=" "+a});return this},removeClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(a){var c=
a.className.replace(b,"");a.className=c.replace(/\s+$/,"")});return this},hasClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(b):this.map(function(a){return!!a.className.match(b)})},swapClass:function(a,b){this.removeClass(a);this.addClass(b)},bind:function(a,b,c){this.forEach(function(e){var d=e.nid||(e.nid=n++),d=i[d]||(i[d]=[]);d.push({event:a,callback:b,index:d.length});e.addEventListener(a,b,c||!1)});return this},unbind:function(a){this.forEach(function(b){var c=
b.nid||(b.nid=n++),e=a?m(i[c],a):i[c];e&&e.forEach(function(a){delete e[a.index];b.removeEventListener(a.event,a.callback,!1)})});return this},delegate:function(a,b,c){this.bind(b,function(b){var d=e(a,this).detect(function(a){a=a.compareDocumentPosition(b.target);return a===0||a&Node.DOCUMENT_POSITION_CONTAINED_BY});d&&c.call(d,b)})}};d.addEventListener("DOMContentLoaded",function(){c=!0},!1);e.fn.__proto__=[];e.id=function(a,b){return l(a,b,"getElementById")};e.cls=function(a,b){return l(a,b,"getElementsByClassName")};
e.tag=function(a,b){return l(a,b,"getElementsByTagName")};e.ajax=function(a,b,c,e){var d=new XMLHttpRequest,e=e||{},b=b||function(){},c=c||function(){},f=e.method||"GET",i=e.header||{},h=e.ctype||(f==="POST"?"application/x-www-form-urlencoded":""),e=e.data||"",g;d.onreadystatechange=function(){d.readyState===4&&(d.status>=200&&d.status<300?b(d.responseText,d):c(d))};typeof e==="object"&&(e=j(e));d.open(f,a,!0);h&&d.setRequestHeader("Content-Type",h);d.setRequestHeader("X-Requested-With","XMLHttpRequest");
for(g in i)d.setRequestHeader(g,i[g]);d.send(e)};e.version="0.2.9";window.r=e})(document,Array.prototype.slice,encodeURIComponent);(function(d,g,f){d.r.load=function(e,d){var k=0,h=e.length;e.forEach(function(e){var j=g.createElement("script");j.src=e;j.onload=function(){j.removeAttribute("onload");++k===h&&d()};f.appendChild(j)})}})(window,document,document.getElementsByTagName("head")[0]);(function(d,g,f){function e(e,d){var f=d;if(typeof e!=="function")throw Error("First parameter should be function");if(typeof d==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(d){f=e(f,d)});return f}function l(){return this.replace(/(^\s+)|(\s+$)/g,"")}function k(e){return eval("("+e+")")}if(typeof g.reduce!=="function")g.reduce=e;if(typeof f.trim!=="function")f.trim=l;if(typeof d.JSON!=="object")d.JSON={},d.JSON.parse=k})(window,Array.prototype,String.prototype);(function(){r.fn.union=function(d){return d.__proto__===r.fn?r(this.concat(d)):this}})();(function(){function d(c){c=c.css("-webkit-transform");c=typeof c==="string"?c.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return c!==null&&c.length===3?{x:Number(c[1]),y:Number(c[2])}:{x:0,y:0}}function g(c){c=c.css("-webkit-transform");c=typeof c==="string"?c.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return c!==null&&c.length===3?{x:Number(c[1]),y:Number(c[2])}:{x:1,y:1}}function f(c){if(typeof c==="number")return c<
10?c*1E3:c;else if(typeof c==="string")if(c=c.match(/(\d+(?:\.\d+)?)(m?)(s?)/),c[2]===""&&c[3]==="s")return Number(c[1])*1E3;else if(c[2]==="m"&&c[3]==="s")return Number(c[1])}function e(c,a,b,e){var d,i;d=function(a,d){clearTimeout(d);b();e&&c.unbind("webkitTransitionEnd")};i=setTimeout(function(){d(null,i)},f(a)+200);c.bind("webkitTransitionEnd",d)}function l(c,a,b){var d="0.3s",f="ease-in-out",i,g=0,h={};a instanceof Array?(h["-webkit-transform"]=a.join(" "),i=1):typeof a==="object"&&(i=k(a,h));
if(typeof b==="object"){typeof b.duration==="string"?d=b.duration:typeof b.duration==="number"&&(d=b.duration+"s");if(typeof b.easing==="string")f=b.easing;typeof b.callback==="function"&&e(c,d,function(){++g;i===g&&b.callback()})}h["-webkit-transition"]=d+" "+f;h["-webkit-backface-visibility"]="hidden";h["-webkit-perspective"]="1000";c.css(h)}function k(c,a){var b,d=0;for(b in c)a[b]=c[b],d++;return d}function h(c,a){return"scale("+c+","+a+")"}function m(c,a){if(typeof c==="number"&&typeof a==="number")return i+
c+"px,"+a+"px"+n;else if(typeof c==="string"&&typeof a==="string")return i+c+","+a+n}var j="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,i="translate"+(j?"3d(":"("),n=j?",0)":")";r.fn.animate=function(c,a){var b=0,d=this.length,e=a||{},f=typeof e.callback==="function"?e.callback:function(){};e.callback=function(){++b;b===d&&f()};this.each(function(a){l(a,c,e)})};r.fn.scale=function(c,a,b){this.animate([h(c,a)],b)};r.fn.scaleR=function(c,a,b){var d=g(this);this.animate([h(d.x*c,d.y*a)],b)};
r.fn.scaleX=function(c,a){var b=g(this);this.animate([h(c,b.y)],a)};r.fn.scaleRX=function(c,a){var b=g(this);this.animate([h(b.x*c,b.y)],a)};r.fn.scaleY=function(c,a){var b=g(this);this.animate([h(b.x,yScale)],a)};r.fn.scaleRY=function(c,a){var b=g(this);this.animate([h(b.x,b.y*c)],a)};r.fn.move=function(c,a,b){this.animate([m(c,a)],b)};r.fn.moveR=function(c,a,b){var e=d(this);this.animate([m(e.x+c,e.y+a)],b)};r.fn.moveX=function(c,a){var b=d(this);this.animate([m(c,b.y)],a)};r.fn.moveRX=function(c,
a,b){a=d(this);this.animate([m(a.x+c,a.y)],b)};r.fn.moveY=function(c,a){var b=d(this);this.animate([m(b.x,c)],a)};r.fn.moveRY=function(c,a){var b=d(this);this.animate([m(b.x,b.y+c)],a)};r.fn.fadeIn=function(c){var a=this;this.show();setTimeout(function(){a.animate({opacity:1},c)},0)};r.fn.fadeOut=function(c){var a=this;this.animate({opacity:0},c);e(this,c.duration||"0.3s",function(){a.hide()},!0)};r.fn.show=function(c){this.animate({display:"block"},c)};r.fn.hide=function(c){this.animate({display:"none"},
c)}})();r(function(){var d,g,f,e,l,k,h;function m(d,e,c,a){var b=document.createEvent("MouseEvent");b.initMouseEvent(e,!0,!0,window,null,c,a);d.dispatchEvent(b)}var j=document.body;d=void 0;g=void 0;f=void 0;e=void 0;l=void 0;k=void 0;h=void 0;r(j).bind("touchstart",function(i){g=i.changedTouches[0].clientX;f=i.changedTouches[0].clientY;e={x:i.changedTouches[0].clientX,y:i.changedTouches[0].clientY};d=i.changedTouches[0].target;l=Date.now()},!0);r(j).bind("touchmove",function(f){var g,c;g=f.changedTouches[0].clientX-
e.x;c=f.changedTouches[0].clientY-e.y;var a;a=r(d).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);a=a===null?{x:0,y:0,z:0}:{x:Number(a[1]),y:Number(a[2]),z:Number(a[3])};g=a.x+g;c=a.y+c;m(d,"drag",1.6*g,1.6*c);e.x=f.changedTouches[0].clientX;e.y=f.changedTouches[0].clientY;k=f.changedTouches[0].clientX;h=f.changedTouches[0].clientY;f.preventDefault()},!0);r(j).bind("touchend",function(i){var j=g-k,c=f-h,a=Math.abs(j),b=Math.abs(c);l&&Date.now()-l>1E3?(d=void 0,
g=void 0,f=void 0,e=void 0,l=void 0,k=void 0,h=void 0):(b>30&&b>a?(i.preventDefault(),c>=0?m(d,"swipeup",j,c):m(d,"swipedown",j,c)):a>30&&a>b&&(i.preventDefault(),j>=0?m(d,"swipeleft",j,c):m(d,"swiperight",j,c)),g=0,k=0,f=0,h=0,d=null,e=void 0,l=void 0)},!0);r(j).bind("touchcancel",function(){g=0;k=0;f=0;h=0;d=null;e=void 0;l=void 0},!0);["swipeleft","swiperight","swipeup","swipedown"].forEach(function(d){r.fn[d]=function(e,c){this.bind(d,e,c)}})});(function(){function d(d){this.storage=d}function g(f){return g.sname||(g.sname=new d(window[f+"Storage"]))}d.prototype.set=function(d,e){if(typeof d==="number"||typeof d==="string")this.storage.setItem(d,JSON.stringify(e));else if(typeof e==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};d.prototype.get=function(d){return typeof this.storage[d]==="undefined"?null:JSON.parse(this.storage.getItem(d))};
d.prototype.clear=function(){this.storage.clear()};d.prototype.size=function(){return this.storage.length};d.prototype.keys=function(){var d=[],e;for(e in this.storage)d.push(e);return d};d.prototype.values=function(){var d=[],e;for(e in this.storage)d.push(this.get(e));return d};r.storage=g})();
