/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(j,m,g){function f(b,e){if(typeof b==="string")return l(b,e,"querySelectorAll");else if(b instanceof Array)return i(b);else if(typeof b.addEventListener==="function")return i(k(b));else if(typeof b==="function")u?b(f):j.addEventListener("DOMContentLoaded",function(){b(f)},false)}function l(b,e,a){var c=[];if(e===void 0||e instanceof HTMLElement)return i(k((e||j)[a](b)));else if(f.isR(e)){e.map(function(d){return k(d[a](b))}).forEach(function(d){d.forEach(function(h){c.push(h)})});return i(c)}}
function k(b){if(b===null||b===void 0)return[];else if(b instanceof HTMLElement)return[b];else if(typeof b.length==="number"&&typeof b.item==="function")return m.call(b)}function i(b){b.__proto__=f.fn;return b}var n={},o=1,u=false;j.addEventListener("DOMContentLoaded",function(){u=true},false);f.fn={detect:function(b){return this.filter(b)[0]},invoke:function(){var b=m.call(arguments),e=b.shift();return this.map(function(a){return a[e].apply(a,b)})},pluck:function(b){return this.map(function(e){return e[b]})},
each:function(b){return this.forEach(function(e){b(i(k(e)))})},html:function(b){var e;if(b===void 0)return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(a){return a});else if(typeof b==="string"||typeof b==="number")this.forEach(function(a){a.innerHTML=b});else if(b instanceof HTMLElement)this.forEach(function(a){a.innerHTML=b.outerHTML});else if(f.isR(b)){e=b.map(function(a){return a.outerHTML}).join("");this.forEach(function(a){a.innerHTML=e})}return this},remove:function(){this.forEach(function(b){b.parentNode instanceof
HTMLElement&&b.parentNode.removeChild(b)});return this},add:function(b){var e;if(typeof b==="string")this.forEach(function(a){a.insertAdjacentHTML("beforeEnd",b)});else if(b instanceof HTMLElement)this.forEach(function(a){a.appendChild(b)});else if(f.isR(b)){e=j.createDocumentFragment();b.forEach(function(a){e.appendChild(a)});this.forEach(function(a){a.appendChild(e)})}return this},attr:function(b,e){if(typeof b==="string")if(e===void 0)return this.length===1?this[0].getAttribute(b):this.invoke("getAttribute",
b);else e===null?this.invoke("removeAttribute",b):this.invoke("setAttribute",b,String(e));else typeof b==="object"&&this.forEach(function(a){for(var c in b)b[c]===null?a.removeAttribute(c):a.setAttribute(c,String(b[c]))});return this},css:function(b,e){if(typeof b==="string")if(e===void 0)return this.length===1?getComputedStyle(this[0],null).getPropertyValue(b):this.map(function(a){return getComputedStyle(a,null).getPropertyValue(b)});else e===null?this.forEach(function(a){a.style.removeProperty(b)}):
this.forEach(function(a){a.style.setProperty(b,e,null)});else typeof b==="object"&&this.forEach(function(a){var c=";",d;for(d in b)if(b[d]===null)a.style.removeProperty(d);else c+=d+":"+b[d]+";";a.style.cssText+=c});return this},addClass:function(b){this.forEach(function(e){e.className===""?e.className=b:e.className+=" "+b});return this},removeClass:function(b){var e=RegExp("(?:^|\\b)"+b+"(?:\\b|$)\\s?","g");this.forEach(function(a){var c=a.className.replace(e,"");a.className=c.replace(/\s+$/,"")});
return this},hasClass:function(b){var e=RegExp("(?:^|\\b)"+b+"(?:\\b|$)");return this.length===1?!!this[0].className.match(e):this.map(function(a){return!!a.className.match(e)})},toggleClass:function(b,e){if(e===void 0)this.hasClass(b)?this.removeClass(b):this.addClass(b);else if(this.hasClass(b)){this.removeClass(b);this.addClass(e)}else{this.removeClass(e);this.addClass(b)}},bind:function(b,e,a){this.forEach(function(c){var d=c.__nid||(c.__nid=o++);d=n[d]||(n[d]=[]);d.push({event:b,callback:e,index:d.length,
useCapture:a||false});c.addEventListener(b,e,a||false)});return this},unbind:function(b){function e(a,c){return a.filter(function(d){return d.event===c})}this.forEach(function(a){var c=a.__nid||(a.__nid=o++),d=b?e(n[c],b):n[c];d&&d.forEach(function(h){delete d[h.index];a.removeEventListener(h.event,h.callback,h.useCapture)})});return this},delegate:function(b,e,a){this.bind(e,function(c){var d=f(b,this).detect(function(h){h=h.compareDocumentPosition(c.target);return h===0||h&Node.DOCUMENT_POSITION_CONTAINED_BY});
d&&a.call(d,c)})}};f.fn.__proto__=[];f.ajax=function(b,e,a,c){function d(w){var x=[],v;for(v in w)x.push(g(v)+"="+g(w[v]));return x.join("&")}var h=new XMLHttpRequest;c=c||{};e=e||function(){};a=a||function(){};var p=c.method||"GET",s=c.header||{},t=c.ctype||(p==="POST"?"application/x-www-form-urlencoded":"");c=c.data||"";var q;h.onreadystatechange=function(){if(h.readyState===4)h.status>=200&&h.status<300?e(h.responseText,h):a(h)};if(typeof c==="object")c=d(c);h.open(p,b,true);t&&h.setRequestHeader("Content-Type",
t);h.setRequestHeader("X-Requested-With","XMLHttpRequest");for(q in s)h.setRequestHeader(q,s[q]);h.send(c)};f.id=function(b,e){return l(b,e,"getElementById")};f.cls=function(b,e){return l(b,e,"getElementsByClassName")};f.tag=function(b,e){return l(b,e,"getElementsByTagName")};f.isR=function(b){return b.__proto__===f.fn};f.version="0.3.0";window.r=f})(document,Array.prototype.slice,encodeURIComponent);(function(){function j(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function m(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function g(a){a=String(a).match(/(\d+(?:\.\d+)?)(m?)(s?)/);
return a[2]===""&&a[3]==="s"?Number(a[1])*1E3:a[2]==="m"&&a[3]==="s"?Number(a[1]):300}function f(a,c,d){var h=d||{},p=h.duration||b;h=h.easing||e;var s,t=0,q={};if(c instanceof Array){q["-webkit-transform"]=c.join(" ");s=1}else if(typeof c==="object")s=l(c,q);typeof d.callback==="function"&&a.waitTransitionEnd(p,function(){++t;s===t&&d.callback()});q["-webkit-transition"]=p+" "+h;q["-webkit-backface-visibility"]="hidden";q["-webkit-perspective"]="1000";a.css(q)}function l(a,c){var d,h=0;for(d in a){c[d]=
a[d];h++}return h}function k(a,c){return"scale("+a+","+c+")"}function i(a,c){if(typeof a==="number"&&typeof c==="number")return o+a+"px,"+c+"px"+u;else if(typeof a==="string"&&typeof c==="string")return o+a+","+c+u}var n="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,o="translate"+(n?"3d(":"("),u=n?",0)":")",b="0.3s",e="ease-in-out";r.fn.animate=function(a,c){var d=0,h=this.length,p=c||{},s=p.callback||function(){};p.callback=function(){++d;d===h&&s()};this.each(function(t){f(t,a,p)})};r.fn.scale=
function(a,c,d){this.animate([k(a,c)],d)};r.fn.scaleR=function(a,c,d){var h=m(this);this.animate([k(h.x*a,h.y*c)],d)};r.fn.scaleX=function(a,c){var d=m(this);this.animate([k(a,d.y)],c)};r.fn.scaleRX=function(a,c){var d=m(this);this.animate([k(d.x*a,d.y)],c)};r.fn.scaleY=function(a,c){var d=m(this);this.animate([k(d.x,yScale)],c)};r.fn.scaleRY=function(a,c){var d=m(this);this.animate([k(d.x,d.y*a)],c)};r.fn.move=function(a,c,d){this.animate([i(a,c)],d)};r.fn.moveR=function(a,c,d){var h=j(this);this.animate([i(h.x+
a,h.y+c)],d)};r.fn.moveX=function(a,c){var d=j(this);this.animate([i(a,d.y)],c)};r.fn.moveRX=function(a,c,d){c=j(this);this.animate([i(c.x+a,c.y)],d)};r.fn.moveY=function(a,c){var d=j(this);this.animate([i(d.x,a)],c)};r.fn.moveRY=function(a,c){var d=j(this);this.animate([i(d.x,d.y+a)],c)};r.fn.fadeIn=function(a){var c=this;this.show();setTimeout(function(){c.animate({opacity:1},a)},0)};r.fn.fadeOut=function(a){var c=this;this.animate({opacity:0},a);this.waitTransitionEnd(typeof a==="object"?a.duration:
null,function(){c.hide()},true)};r.fn.show=function(a){this.animate({display:"block"},a)};r.fn.hide=function(a){this.animate({display:"none"},a)};r.fn.waitTransitionEnd=function(a,c,d){var h=this,p,s;a=a||b;p=function(t,q){clearTimeout(q);c();d&&h.unbind("webkitTransitionEnd")};s=setTimeout(function(){p(null,s)},g(a)+200);h.bind("webkitTransitionEnd",p)}})();(function(j,m,g){function f(i,n){var o=n;if(typeof i!=="function")throw Error("First parameter should be function");if(typeof n==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(u){o=i(o,u)});return o}function l(){return this.replace(/(^\s+)|(\s+$)/g,"")}function k(i){return eval("("+i+")")}if(typeof m.reduce!=="function")m.reduce=f;if(typeof g.trim!=="function")g.trim=l;if(typeof j.JSON!=="object"){j.JSON={};j.JSON.parse=k}})(window,Array.prototype,String.prototype);(function(j,m,g){j.r.load=function(f,l){var k=0,i=f.length;f.forEach(function(n){var o=m.createElement("script");o.src=n;o.onload=function(){o.removeAttribute("onload");++k===i&&l()};g.appendChild(o)})}})(window,document,document.getElementsByTagName("head")[0]);(function(){function j(g){this.storage=g}function m(g){return m.sname||(m.sname=new j(window[g+"Storage"]))}j.prototype.set=function(g,f){if(typeof g==="number"||typeof g==="string")this.storage.setItem(g,JSON.stringify(f));else if(typeof f==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};j.prototype.get=function(g){return typeof this.storage[g]==="undefined"?null:JSON.parse(this.storage.getItem(g))};
j.prototype.clear=function(){this.storage.clear()};j.prototype.size=function(){return this.storage.length};j.prototype.keys=function(){var g=[],f;for(f in this.storage)g.push(f);return g};j.prototype.values=function(){var g=[],f;for(f in this.storage)g.push(this.get(f));return g};r.storage=m})();r(function(){function j(f,l,k,i){var n=document.createEvent("MouseEvent");n.initMouseEvent(l,true,true,window,null,k,i);f.dispatchEvent(n)}var m=document.body,g={};r(m).bind("touchstart",function(f){g.x1=f.changedTouches[0].clientX;g.y1=f.changedTouches[0].clientY;g.position={x:f.changedTouches[0].clientX,y:f.changedTouches[0].clientY};g.target=f.changedTouches[0].target;g.startTime=Date.now()},true);r(m).bind("touchmove",function(f){var l;l=f.changedTouches[0].clientX-g.position.x;var k=f.changedTouches[0].clientY-
g.position.y,i;i=r(f.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);i=i===null?{x:0,y:0,z:0}:{x:Number(i[1]),y:Number(i[2]),z:Number(i[3])};l={x:i.x+l,y:i.y+k};j(g.target,"drag",1.6*l.x,1.6*l.y);g.position.x=f.changedTouches[0].clientX;g.position.y=f.changedTouches[0].clientY;g.x2=f.changedTouches[0].clientX;g.y2=f.changedTouches[0].clientY;f.preventDefault()},true);r(m).bind("touchend",function(f){var l=g.x1-g.x2,k=g.y1-g.y2,i=Math.abs(l),n=Math.abs(k);
if(g.startTime&&Date.now()-g.startTime>1E3)g={};else{if(n>30&&n>i){f.preventDefault();k>=0?j(g.target,"swipeup",l,k):j(g.target,"swipedown",l,k)}else if(i>30&&i>n){f.preventDefault();l>=0?j(g.target,"swipeleft",l,k):j(g.target,"swiperight",l,k)}g={x1:0,x2:0,y1:0,y2:0,target:null}}},true);r(m).bind("touchcancel",function(){g={x1:0,x2:0,y1:0,y2:0,target:null}},true)});
