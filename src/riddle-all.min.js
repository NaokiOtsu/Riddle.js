/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(m,o,e){function f(a,c){if(typeof a==="string")return n(a,c,"querySelectorAll");else if(a instanceof HTMLElement)return i(l(a));else if(typeof a==="function")q?a(f):m.addEventListener("DOMContentLoaded",function(){a(f)},false)}function n(a,c,d){if(typeof c==="undefined"||c instanceof HTMLElement)return i(l((c||m)[d](a)));else if(c.__proto__===f.fn){var j=[];c.map(function(k){return l(k[d](a))}).forEach(function(k){k.forEach(function(s){j.push(s)})});return i(j)}}function l(a){if(a===null)return[];
else if(a instanceof HTMLElement)return[a];else if(typeof a.length==="number"&&typeof a.item==="function")return o.call(a)}function i(a){a.__proto__=f.fn;return a}function b(a,c){return a.filter(function(d){return d.event===c})}function h(a){var c=[],d;for(d in a)c.push(e(d)+"="+e(a[d]));return c.join("&")}var g={},p=1,q=false;f.fn={detect:function(a){return this.filter(a)[0]},invoke:function(){var a=o.call(arguments),c=a.shift();return this.map(function(d){return d[c].apply(d,a)})},pluck:function(a){return this.map(function(c){return c[a]})},
each:function(a){return this.forEach(function(c){a(i(l(c)))})},html:function(a){var c;if(typeof a==="undefined")return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(d){return d});else if(typeof a==="string"||typeof a==="number")this.forEach(function(d){d.innerHTML=a});else if(a instanceof HTMLElement)this.forEach(function(d){d.innerHTML=a.outerHTML});else if(a.__proto__===f.fn){c=a.map(function(d){return d.outerHTML}).join("");this.forEach(function(d){d.innerHTML=c})}return this},
add:function(a){var c;if(typeof a==="string")this.forEach(function(d){d.insertAdjacentHTML("beforeEnd",a)});else if(a instanceof HTMLElement)this.forEach(function(d){d.appendChild(a)});else if(a.__proto__===f.fn){c=m.createDocumentFragment();a.forEach(function(d){c.appendChild(d)});this.forEach(function(d){d.appendChild(c)})}return this},remove:function(){this.forEach(function(a){a.parentNode.removeChild(a)});return this},attr:function(a,c){if(typeof a==="string")if(typeof c==="undefined")return this.length===
1?this[0].getAttribute(a):this.invoke("getAttribute",a);else c===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(c));else typeof a==="object"&&this.forEach(function(d){for(var j in a)a[j]===null?d.removeAttribute(j):d.setAttribute(j,String(a[j]))});return this},css:function(a,c){if(typeof a==="string")if(typeof c==="undefined")return this.length===1?getComputedStyle(this[0],"").getPropertyValue(a):this.map(function(d){return getComputedStyle(d,"").getPropertyValue(a)});else c===
null?this.forEach(function(d){d.style.removeProperty(a)}):this.forEach(function(d){d.style.setProperty(a,c,"")});else typeof a==="object"&&this.forEach(function(d){var j=";",k;for(k in a)if(a[k]===null)d.style.removeProperty(k);else j+=k+":"+a[k]+";";d.style.cssText+=j});return this},addClass:function(a){this.forEach(function(c){c.className===""?c.className=a:c.className+=" "+a});return this},removeClass:function(a){var c=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(d){var j=d.className.replace(c,
"");d.className=j.replace(/\s+$/,"")});return this},hasClass:function(a){var c=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(c):this.map(function(d){return!!d.className.match(c)})},swapClass:function(a,c){this.removeClass(a);this.addClass(c)},bind:function(a,c,d){this.forEach(function(j){var k=j.nid||(j.nid=p++);k=g[k]||(g[k]=[]);k.push({event:a,callback:c,index:k.length});j.addEventListener(a,c,d||false)});return this},unbind:function(a){this.forEach(function(c){var d=
c.nid||(c.nid=p++),j=a?b(g[d],a):g[d];j&&j.forEach(function(k){delete j[k.index];c.removeEventListener(k.event,k.callback,false)})});return this},delegate:function(a,c,d){this.bind(c,function(j){var k=f(a,this).detect(function(s){s=s.compareDocumentPosition(s.target);return s===0||s|Node.DOCUMENT_POSITION_CONTAINED_BY});k&&d.call(k,j)})}};m.addEventListener("DOMContentLoaded",function(){q=true},false);f.fn.__proto__=[];f.id=function(a,c){return n(a,c,"getElementById")};f.cls=function(a,c){return n(a,
c,"getElementsByClassName")};f.tag=function(a,c){return n(a,c,"getElementsByTagName")};f.ajax=function(a,c,d,j){var k=new XMLHttpRequest;j=j||{};c=c||function(){};d=d||function(){};var s=j.method||"GET",u=j.header||{},v=j.ctype||(s==="POST"?"application/x-www-form-urlencoded":"");j=j.data||"";var t;k.onreadystatechange=function(){if(k.readyState===4)k.status>=200&&k.status<300?c(k.responseText,k):d(k)};if(typeof j==="object")j=h(j);k.open(s,a,true);v&&k.setRequestHeader("Content-Type",v);k.setRequestHeader("X-Requested-With",
"XMLHttpRequest");for(t in u)k.setRequestHeader(t,u[t]);k.send(j)};f.version="0.2.9";window.r=f})(document,Array.prototype.slice,encodeURIComponent);(function(){function m(b){b=b.css("-webkit-transform");b=typeof b==="string"?b.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return b!==null&&b.length===3?{x:Number(b[1]),y:Number(b[2])}:{x:0,y:0}}function o(b){b=b.css("-webkit-transform");b=typeof b==="string"?b.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return b!==null&&b.length===3?{x:Number(b[1]),y:Number(b[2])}:{x:1,y:1}}function e(b,h,g){var p="0.3s",q="ease-in-out",
a,c=0,d={};if(h instanceof Array){d["-webkit-transform"]=h.join(" ");a=1}else if(typeof h==="object")a=f(h,d);if(typeof g==="object"){if(typeof g.duration==="string")p=g.duration;else if(typeof g.duration==="number")p=g.duration+"s";if(typeof g.easing==="string")q=g.easing;typeof g.callback==="function"&&b.bind("webkitTransitionEnd",function(j){++c;if(a===c){g.callback(j);b.unbind("webkitTransitionEnd")}})}d["-webkit-transition"]=p+" "+q;d["-webkit-backface-visibility"]="hidden";d["-webkit-perspective"]=
"1000";d["-webkit-transform-origin"]="0 0";b.css(d)}function f(b,h){var g,p=0;for(g in b){h[g]=b[g];p++}return p}var n="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,l="translate"+(n?"3d(":"("),i=n?",0)":")";r.fn.animate=function(b,h){var g=0,p=this.length,q=h||{},a=typeof q.callback==="function"?q.callback:function(){};q.callback=function(){++g;g===p&&a()};this.each(function(c){e(c,b,q)})};r.fn.scale=function(b,h,g){this.animate(["scale("+b+","+h+")"],g)};r.fn.scaleR=function(b,h,g){var p=
o(this);this.animate(["scale("+p.x*b+","+p.y*h+")"],g)};r.fn.scaleX=function(b,h){var g=o(this);this.animate(["scale("+b+","+g.y+")"],h)};r.fn.scaleRX=function(b,h){var g=o(this);this.animate(["scale("+g.x*b+","+g.y+")"],h)};r.fn.scaleY=function(b,h){this.animate(["scale("+o(this).x+","+yScale+")"],h)};r.fn.scaleRY=function(b,h){var g=o(this);this.animate(["scale("+g.x+","+g.y*b+")"],h)};r.fn.move=function(b,h,g){if(typeof b==="number"&&typeof h==="number")this.animate([l+b+"px,"+h+"px"+i],g);else typeof b===
"string"&&typeof h==="string"&&this.animate([l+b+","+h+i],g)};r.fn.moveR=function(b,h,g){var p=m(this);this.animate([l+(p.x+b)+"px,"+(p.y+h)+"px"+i],g)};r.fn.moveX=function(b,h){var g=m(this);if(typeof b==="number")this.animate([l+b+"px,"+g.y+"px"+i],h);else typeof b==="string"&&this.animate([l+b+","+g.y+i],h)};r.fn.moveRX=function(b,h,g){h=m(this);this.animate([l+(h.x+b)+"px,"+h.y+"px"+i],g)};r.fn.moveY=function(b,h){var g=m(this);if(typeof b==="number")this.animate([l+g.x+"px,"+b+"px"+i],h);else typeof b===
"string"&&this.animate([l+g.x+"px,"+b+i],h)};r.fn.moveRY=function(b,h){var g=m(this);this.animate([l+g.x+"px,"+(g.y+b)+"px"+i],h)};r.fn.fadeIn=function(b){this.animate({opacity:1},b)};r.fn.fadeOut=function(b){this.animate({opacity:0},b)};r.fn.show=function(b){this.animate({visibility:"visible"},b)};r.fn.hide=function(b){this.animate({visibility:"hidden"},b)}})();(function(m,o,e){function f(i,b){var h=b;if(typeof i!=="function")throw Error("First parameter should be function");if(typeof b==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(g){h=i(h,g)});return h}function n(){return this.replace(/(^\s+)|(\s+$)/g,"")}function l(i){return eval("("+i+")")}if(typeof o.reduce!=="function")o.reduce=f;if(typeof e.trim!=="function")e.trim=n;if(typeof m.JSON!=="object"){m.JSON={};m.JSON.parse=l}})(window,Array.prototype,String.prototype);(function(m,o,e){m.r.load=function(f,n){var l=0,i=f.length;f.forEach(function(b){var h=o.createElement("script");h.src=b;h.onload=function(){h.removeAttribute("onload");++l===i&&n()};e.appendChild(h)})}})(window,document,document.getElementsByTagName("head")[0]);(function(){function m(e){this.storage=e}function o(e){return o.sname||(o.sname=new m(window[e+"Storage"]))}m.prototype.set=function(e,f){if(typeof e==="number"||typeof e==="string")this.storage.setItem(e,JSON.stringify(f));else if(typeof f==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};m.prototype.get=function(e){return typeof this.storage[e]==="undefined"?null:JSON.parse(this.storage.getItem(e))};
m.prototype.clear=function(){this.storage.clear()};m.prototype.size=function(){return this.storage.length};m.prototype.keys=function(){var e=[],f;for(f in this.storage)e.push(f);return e};m.prototype.values=function(){var e=[],f;for(f in this.storage)e.push(this.get(f));return e};r.storage=o})();r(function(){function m(f,n,l,i){var b=document.createEvent("MouseEvent");b.initMouseEvent(n,true,true,window,null,l,i);f.dispatchEvent(b)}var o=document.body,e={};r(o).bind("touchstart",function(f){e.x1=f.changedTouches[0].clientX;e.y1=f.changedTouches[0].clientY;e.position={x:f.changedTouches[0].clientX,y:f.changedTouches[0].clientY};e.target=f.changedTouches[0].target;e.startTime=Date.now()},true);r(o).bind("touchmove",function(f){var n;n=f.changedTouches[0].clientX-e.position.x;var l=f.changedTouches[0].clientY-
e.position.y,i;i=r(e.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);i=i===null?{x:0,y:0,z:0}:{x:Number(i[1]),y:Number(i[2]),z:Number(i[3])};n={x:i.x+n,y:i.y+l};m(e.target,"drag",1.6*n.x,1.6*n.y);e.position.x=f.changedTouches[0].clientX;e.position.y=f.changedTouches[0].clientY;e.x2=f.changedTouches[0].clientX;e.y2=f.changedTouches[0].clientY;f.preventDefault()},true);r(o).bind("touchend",function(f){var n=e.x1-e.x2,l=e.y1-e.y2,i=Math.abs(n),b=Math.abs(l);
if(e.startTime&&Date.now()-e.startTime>1E3)e={};else{if(b>30&&b>i){f.preventDefault();l>=0?m(e.target,"swipeup",n,l):m(e.target,"swipedown",n,l)}else if(i>30&&i>b){f.preventDefault();n>=0?m(e.target,"swipeleft",n,l):m(e.target,"swiperight",n,l)}e={x1:0,x2:0,y1:0,y2:0,target:null}}},true);r(o).bind("touchcancel",function(){e={x1:0,x2:0,y1:0,y2:0,target:null}},true);["swipeleft","swiperight","swipeup","swipedown"].forEach(function(f){r.fn[f]=function(n,l){this.bind(f,n,l)}})});
