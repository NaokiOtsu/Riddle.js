/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(c,h,g){function d(a,b){if(typeof a==="string")return m(a,b,"querySelectorAll");else if(a instanceof Array)return k(a);else if(a instanceof HTMLElement)return k(j(a));else typeof a==="function"&&(p?a(d):c.addEventListener("DOMContentLoaded",function(){a(d)},!1))}function m(a,b,e){if(typeof b==="undefined"||b instanceof HTMLElement)return k(j((b||c)[e](a)));else if(b.__proto__===d.fn){var f=[];b.map(function(b){return j(b[e](a))}).forEach(function(a){a.forEach(function(a){f.push(a)})});return k(f)}}
function j(a){if(a===null)return[];else if(a instanceof HTMLElement)return[a];else if(typeof a.length==="number"&&typeof a.item==="function")return h.call(a)}function k(a){a.__proto__=d.fn;return a}function q(a,b){return a.filter(function(a){return a.event===b})}function n(a){var b=[],e;for(e in a)b.push(g(e)+"="+g(a[e]));return b.join("&")}var l={},o=1,p=!1;d.fn={detect:function(a){return this.filter(a)[0]},invoke:function(){var a=h.call(arguments),b=a.shift();return this.map(function(e){return e[b].apply(e,
a)})},pluck:function(a){return this.map(function(b){return b[a]})},each:function(a){return this.forEach(function(b){a(k(j(b)))})},html:function(a){var b;if(typeof a==="undefined")return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(a){return a});else typeof a==="string"||typeof a==="number"?this.forEach(function(b){b.innerHTML=a}):a instanceof HTMLElement?this.forEach(function(b){b.innerHTML=a.outerHTML}):a.__proto__===d.fn&&(b=a.map(function(a){return a.outerHTML}).join(""),
this.forEach(function(a){a.innerHTML=b}));return this},add:function(a){var b;typeof a==="string"?this.forEach(function(b){b.insertAdjacentHTML("beforeEnd",a)}):a instanceof HTMLElement?this.forEach(function(b){b.appendChild(a)}):a.__proto__===d.fn&&(b=c.createDocumentFragment(),a.forEach(function(a){b.appendChild(a)}),this.forEach(function(a){a.appendChild(b)}));return this},remove:function(){this.forEach(function(a){a.parentNode.removeChild(a)});return this},attr:function(a,b){if(typeof a==="string")if(typeof b===
"undefined")return this.length===1?this[0].getAttribute(a):this.invoke("getAttribute",a);else b===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(b));else typeof a==="object"&&this.forEach(function(b){for(var f in a)a[f]===null?b.removeAttribute(f):b.setAttribute(f,String(a[f]))});return this},css:function(a,b){if(typeof a==="string")if(typeof b==="undefined")return this.length===1?getComputedStyle(this[0],null).getPropertyValue(a):this.map(function(b){return getComputedStyle(b,
null).getPropertyValue(a)});else b===null?this.forEach(function(b){b.style.removeProperty(a)}):this.forEach(function(e){e.style.setProperty(a,b,null)});else typeof a==="object"&&this.forEach(function(b){var f=";",i;for(i in a)a[i]===null?b.style.removeProperty(i):f+=i+":"+a[i]+";";b.style.cssText+=f});return this},addClass:function(a){this.forEach(function(b){b.className===""?b.className=a:b.className+=" "+a});return this},removeClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(a){var f=
a.className.replace(b,"");a.className=f.replace(/\s+$/,"")});return this},hasClass:function(a){var b=RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(b):this.map(function(a){return!!a.className.match(b)})},swapClass:function(a,b){this.removeClass(a);this.addClass(b)},bind:function(a,b,e){this.forEach(function(f){var i=f.nid||(f.nid=o++),i=l[i]||(l[i]=[]);i.push({event:a,callback:b,index:i.length});f.addEventListener(a,b,e||!1)});return this},unbind:function(a){this.forEach(function(b){var e=
b.nid||(b.nid=o++),f=a?q(l[e],a):l[e];f&&f.forEach(function(a){delete f[a.index];b.removeEventListener(a.event,a.callback,!1)})});return this},delegate:function(a,b,e){this.bind(b,function(b){var i=d(a,this).detect(function(a){a=a.compareDocumentPosition(b.target);return a===0||a&Node.DOCUMENT_POSITION_CONTAINED_BY});i&&e.call(i,b)})}};c.addEventListener("DOMContentLoaded",function(){p=!0},!1);d.fn.__proto__=[];d.id=function(a,b){return m(a,b,"getElementById")};d.cls=function(a,b){return m(a,b,"getElementsByClassName")};
d.tag=function(a,b){return m(a,b,"getElementsByTagName")};d.ajax=function(a,b,e,f){var i=new XMLHttpRequest,f=f||{},b=b||function(){},e=e||function(){},d=f.method||"GET",c=f.header||{},g=f.ctype||(d==="POST"?"application/x-www-form-urlencoded":""),f=f.data||"",l;i.onreadystatechange=function(){i.readyState===4&&(i.status>=200&&i.status<300?b(i.responseText,i):e(i))};typeof f==="object"&&(f=n(f));i.open(d,a,!0);g&&i.setRequestHeader("Content-Type",g);i.setRequestHeader("X-Requested-With","XMLHttpRequest");
for(l in c)i.setRequestHeader(l,c[l]);i.send(f)};d.version="0.2.9";window.r=d})(document,Array.prototype.slice,encodeURIComponent);(function(c,h,g){c.r.load=function(d,c){var j=0,k=d.length;d.forEach(function(d){var n=h.createElement("script");n.src=d;n.onload=function(){n.removeAttribute("onload");++j===k&&c()};g.appendChild(n)})}})(window,document,document.getElementsByTagName("head")[0]);(function(c,h,g){function d(d,c){var g=c;if(typeof d!=="function")throw Error("First parameter should be function");if(typeof c==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(c){g=d(g,c)});return g}function m(){return this.replace(/(^\s+)|(\s+$)/g,"")}function j(d){return eval("("+d+")")}if(typeof h.reduce!=="function")h.reduce=d;if(typeof g.trim!=="function")g.trim=m;if(typeof c.JSON!=="object")c.JSON={},c.JSON.parse=j})(window,Array.prototype,String.prototype);(function(){r.fn.union=function(c){return c.__proto__===r.fn?r(this.concat(c)):this}})();(function(){function c(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\([\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s[\-\d.]+,\s([\-\d.]+),\s([\-\d.]+)\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:0,y:0}}function h(a){a=a.css("-webkit-transform");a=typeof a==="string"?a.match(/matrix\(([\d.]+),\s[\d.]+,\s[\d.]+,\s([\d.]+),\s[\d.]+,\s[\d.]+\)/):null;return a!==null&&a.length===3?{x:Number(a[1]),y:Number(a[2])}:{x:1,y:1}}function g(a){a=a.match(/(\d+(?:\.\d+)?)(m?)(s?)/);
return a[2]===""&&a[3]==="s"?Number(a[1])*1E3:a[2]==="m"&&a[3]==="s"?Number(a[1]):300}function d(a,b,e){var f=e||{},d=f.duration||o,f=f.easing||p,c,g=0,l={};b instanceof Array?(l["-webkit-transform"]=b.join(" "),c=1):typeof b==="object"&&(c=m(b,l));typeof e.callback==="function"&&a.waitTransitionEnd(d,function(){++g;c===g&&e.callback()});l["-webkit-transition"]=d+" "+f;l["-webkit-backface-visibility"]="hidden";l["-webkit-perspective"]="1000";a.css(l)}function m(a,b){var e,f=0;for(e in a)b[e]=a[e],
f++;return f}function j(a,b){return"scale("+a+","+b+")"}function k(a,b){if(typeof a==="number"&&typeof b==="number")return n+a+"px,"+b+"px"+l;else if(typeof a==="string"&&typeof b==="string")return n+a+","+b+l}var q="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,n="translate"+(q?"3d(":"("),l=q?",0)":")",o="0.3s",p="ease-in-out";r.fn.animate=function(a,b){var e=0,f=this.length,c=b||{},g=c.callback||function(){};c.callback=function(){++e;e===f&&g()};this.each(function(b){d(b,a,c)})};r.fn.scale=
function(a,b,e){this.animate([j(a,b)],e)};r.fn.scaleR=function(a,b,e){var c=h(this);this.animate([j(c.x*a,c.y*b)],e)};r.fn.scaleX=function(a,b){var e=h(this);this.animate([j(a,e.y)],b)};r.fn.scaleRX=function(a,b){var e=h(this);this.animate([j(e.x*a,e.y)],b)};r.fn.scaleY=function(a,b){var e=h(this);this.animate([j(e.x,yScale)],b)};r.fn.scaleRY=function(a,b){var e=h(this);this.animate([j(e.x,e.y*a)],b)};r.fn.move=function(a,b,e){this.animate([k(a,b)],e)};r.fn.moveR=function(a,b,e){var d=c(this);this.animate([k(d.x+
a,d.y+b)],e)};r.fn.moveX=function(a,b){var e=c(this);this.animate([k(a,e.y)],b)};r.fn.moveRX=function(a,b,e){b=c(this);this.animate([k(b.x+a,b.y)],e)};r.fn.moveY=function(a,b){var e=c(this);this.animate([k(e.x,a)],b)};r.fn.moveRY=function(a,b){var e=c(this);this.animate([k(e.x,e.y+a)],b)};r.fn.fadeIn=function(a){var b=this;this.show();setTimeout(function(){b.animate({opacity:1},a)},0)};r.fn.fadeOut=function(a){var b=this;this.animate({opacity:0},a);this.waitTransitionEnd(typeof a==="object"?a.duration:
null,function(){b.hide()},!0)};r.fn.show=function(a){this.animate({display:"block"},a)};r.fn.hide=function(a){this.animate({display:"none"},a)};r.fn.waitTransitionEnd=function(a,b,e){var c=this,d,l,a=a||o;d=function(a,d){clearTimeout(d);b();e&&c.unbind("webkitTransitionEnd")};l=setTimeout(function(){d(null,l)},g(a)+200);c.bind("webkitTransitionEnd",d)}})();r(function(){function c(d,c,g,a){var b=document.createEvent("MouseEvent");b.initMouseEvent(c,!0,!0,window,null,g,a);d.dispatchEvent(b)}var h=document.body,g,d,m,j,k,q,n;r(h).bind("touchstart",function(c){g=c.changedTouches[0].clientX;d=c.changedTouches[0].clientY;m={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};j=c.changedTouches[0].target;k=Date.now()},!0);r(h).bind("touchmove",function(d){var g,h;g=d.changedTouches[0].clientX-m.x;h=d.changedTouches[0].clientY-m.y;var a;a=r(d.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);
a=a===null?{x:0,y:0,z:0}:{x:Number(a[1]),y:Number(a[2]),z:Number(a[3])};g=a.x+g;h=a.y+h;c(j,"drag",1.6*g,1.6*h);m.x=d.changedTouches[0].clientX;m.y=d.changedTouches[0].clientY;q=d.changedTouches[0].clientX;n=d.changedTouches[0].clientY;d.preventDefault()},!0);r(h).bind("touchend",function(h){var o=g-q,p=d-n,a=Math.abs(o),b=Math.abs(p);k&&Date.now()-k>1E3?(g=void 0,d=void 0,m=void 0,j=void 0,k=void 0,q=void 0,n=void 0):(b>30&&b>a?(h.preventDefault(),p>=0?c(j,"swipeup",o,p):c(j,"swipedown",o,p)):a>
30&&a>b&&(h.preventDefault(),o>=0?c(j,"swipeleft",o,p):c(j,"swiperight",o,p)),g=0,q=0,d=0,n=0,j=null,m=void 0,k=void 0)},!0);r(h).bind("touchcancel",function(){g=0;q=0;d=0;n=0;j=null;m=void 0;k=void 0},!0)});(function(){function c(c){this.storage=c}function h(g){return h.sname||(h.sname=new c(window[g+"Storage"]))}c.prototype.set=function(c,d){if(typeof c==="number"||typeof c==="string")this.storage.setItem(c,JSON.stringify(d));else if(typeof d==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};c.prototype.get=function(c){return typeof this.storage[c]==="undefined"?null:JSON.parse(this.storage.getItem(c))};
c.prototype.clear=function(){this.storage.clear()};c.prototype.size=function(){return this.storage.length};c.prototype.keys=function(){var c=[],d;for(d in this.storage)c.push(d);return c};c.prototype.values=function(){var c=[],d;for(d in this.storage)c.push(this.get(d));return c};r.storage=h})();
