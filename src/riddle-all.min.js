/*
 Naosuke Yokoe - http://github.com/zentooo/Riddle.js - MIT Licensed */
(function(l,m,b){function c(a,d){if(typeof a==="string")return f(a,d,"querySelectorAll");else if(a instanceof HTMLElement)return g(j(a));else if(typeof a==="function")u?a(c):l.addEventListener("DOMContentLoaded",function(){a(c)},false)}function f(a,d,e){if(typeof d==="undefined"||d instanceof HTMLElement)return g(j((d||l)[e](a)));else if(d.__proto__===c.fn){var h=[];d.map(function(i){return j(i[e](a))}).forEach(function(i){i.forEach(function(q){h.push(q)})});return g(h)}}function j(a){if(a===null)return[];
else if(a instanceof HTMLElement)return[a];else if(typeof a.length==="number"&&typeof a.item==="function")return m.call(a)}function g(a){a.__proto__=c.fn;return a}function k(a,d){var e,h=d||"last";if(a.__proto__===c.fn){e=a.map(function(i){return i.outerHTML}).join("");this.forEach(function(i){k[h](i,e)})}else if(a instanceof HTMLElement){e=a.outerHTML;this.forEach(function(i){k[h](i,e)})}else typeof a==="string"&&this.forEach(function(i){k[h](i,a)});return this}function n(a,d){return a.filter(function(e){return e.event===
d})}function o(a){var d=[],e;for(e in a)d.push(b(e)+"="+b(a[e]));return"?"+d.join("&")}var p={},v=1,u=false;c.fn={detect:function(a){return this.filter(a)[0]},invoke:function(){var a=m.call(arguments),d=a.shift();return this.map(function(e){return e[d].apply(e,a)})},pluck:function(a){return this.map(function(d){return d[a]})},each:function(a){return this.forEach(function(d){a(g(j(d)))})},html:function(a){var d;if(typeof a==="undefined")return this.length===1?this[0].innerHTML:this.pluck("innerHTML").map(function(e){return e});
else if(typeof a==="string")this.forEach(function(e){e.innerHTML=a});else if(a instanceof HTMLElement)this.forEach(function(e){e.innerHTML=a.outerHTML});else if(a.__proto__===c.fn){d=a.map(function(e){return e.outerHTML}).join("");this.forEach(function(e){e.innerHTML=d})}return this},add:k,remove:function(){this.forEach(function(a){a.parentNode.removeChild(a)});return this},attr:function(a,d){if(typeof a==="string")if(typeof d==="undefined")return this.length===1?this[0].getAttribute(a):this.invoke("getAttribute",
a);else d===null?this.invoke("removeAttribute",a):this.invoke("setAttribute",a,String(d));else typeof a==="object"&&this.forEach(function(e){for(var h in a)a[h]===null?e.removeAttribute(h):e.setAttribute(h,String(a[h]))});return this},css:function(a,d){if(typeof a==="string")if(typeof d==="undefined")return this.length===1?getComputedStyle(this[0],"").getPropertyValue(a):this.map(function(e){return getComputedStyle(e,"").getPropertyValue(a)});else d===null?this.forEach(function(e){e.style.removeProperty(a)}):
this.forEach(function(e){e.style.setProperty(a,d,"")});else typeof a==="object"&&this.forEach(function(e){for(var h in a)a[h]===null?e.style.removeProperty(h):e.style.setProperty(h,a[h],"")});return this},addClass:function(a){this.forEach(function(d){d.className===""?d.className=a:d.className+=" "+a});return this},removeClass:function(a){var d=RegExp("(?:^|\\b)"+a+"(?:\\b|$)\\s?","g");this.forEach(function(e){var h=e.className.replace(d,"");e.className=h.replace(/\s+$/,"")});return this},hasClass:function(a){var d=
RegExp("(?:^|\\b)"+a+"(?:\\b|$)");return this.length===1?!!this[0].className.match(d):this.map(function(e){return!!e.className.match(d)})},swapClass:function(a,d){this.removeClass(a);this.addClass(d)},bind:function(a,d,e){this.forEach(function(h){var i=h.nid||(h.nid=v++);i=p[i]||(p[i]=[]);i.push({event:a,callback:d,index:i.length});h.addEventListener(a,d,e||false)});return this},unbind:function(a){this.forEach(function(d){var e=d.nid||(d.nid=v++),h=a?n(p[e],a):p[e];h&&h.forEach(function(i){delete h[i.index];
d.removeEventListener(i.event,i.callback,false)})});return this}};l.addEventListener("DOMContentLoaded",function(){u=true},false);["click","submit","focus","blur","scroll","select","change"].forEach(function(a){c.fn[a]=function(d,e){this.bind(a,d,e)}});c.fn.__proto__=Array.prototype;k.prev=function(a,d){a.insertAdjacentHTML("beforeBegin",d)};k.first=function(a,d){a.insertAdjacentHTML("afterBegin",d)};k.last=function(a,d){a.insertAdjacentHTML("beforeEnd",d)};k.next=function(a,d){a.insertAdjacentHTML("afterEnd",
d)};c.id=function(a,d){return f(a,d,"getElementById")};c.cls=function(a,d){return f(a,d,"getElementsByClassName")};c.tag=function(a,d){return f(a,d,"getElementsByTagName")};c.ajax=function(a,d,e,h){var i=new XMLHttpRequest;h=h||{};e=e||function(){};var q=h.header||{},w=h.ctype||(h.method==="POST"?"application/x-www-form-urlencoded":""),s=h.data||"",t;i.onreadystatechange=function(){if(i.readyState===4)i.status>=200&&i.status<300?d(i.responseText,i):e(i)};if(typeof s==="object")s=o(s);i.open(h.method||
"GET",a,true);w&&i.setRequestHeader("Content-Type",w);i.setRequestHeader("X-Requested-With","XMLHttpRequest");for(t in q)i.setRequestHeader(t,q[t]);i.send(s)};c.version="0.2.6";window.r=c})(document,Array.prototype.slice,encodeURIComponent);(function(){function l(b,c,f){var j="0.3s",g="ease-in-out",k,n=0,o={};if(c instanceof Array){o["-webkit-transform"]=c.join(" ");k=1}else if(typeof c==="object")k=m(c,o);if(typeof f==="object"){if(typeof f.duration==="string")j=f.duration;else if(typeof f.duration==="number")j=f.duration+"s";if(typeof f.easing==="string")g=f.easing;typeof f.callback==="function"&&b.bind("webkitTransitionEnd",function(p){++n;if(k===n){f.callback(p);b.unbind("webkitTransitionEnd")}})}o["-webkit-transition"]=j+" "+g;
o["-webkit-backface-visibility"]="hidden";o["-webkit-perspective"]="1000";o["-webkit-transform-origin"]="0 0";b.css(o)}function m(b,c){var f,j=0;for(f in b){c[f]=b[f];j++}return j}r.fn.animate=function(b,c){var f=0,j=this.length,g=c||{},k=typeof g.callback==="function"?g.callback:function(){};g.callback=function(){++f;f===j&&k()};this.each(function(n){l(n,b,g)})};r.fn.scale=function(b,c,f){this.animate(["scale("+b+","+c+")"],f)};r.fn.scaleX=function(b,c){this.animate(["scale("+b+",1.0)"],c)};r.fn.scaleY=
function(b,c){this.animate(["scale(1.0,"+yScale+")"],c)};r.fn.move=function(b,c,f){if(typeof b==="number"&&typeof c==="number")this.animate(["translate3d("+b+"px,"+c+"px,0px)"],f);else typeof b==="string"&&typeof c==="string"&&this.animate(["translate("+b+","+c+",0px)"],f)};r.fn.moveX=function(b,c){if(typeof b==="number")this.animate(["translate3d("+b+"px,0px,0px)"],c);else typeof b==="string"&&this.animate(["translate3d("+b+",0px,0px)"],c)};r.fn.moveY=function(b,c){if(typeof b==="number")this.animate(["translate3d(0px,"+
b+"px,0px)"],c);else typeof b==="string"&&this.animate(["translate3d(0px,"+b+",0px)"],c)};r.fn.fadeIn=function(b){this.animate({opacity:1},b)};r.fn.fadeOut=function(b){this.animate({opacity:0},b)};r.fn.show=function(b){this.animate({visibility:"visible"},b)};r.fn.hide=function(b){this.animate({visibility:"hidden"},b)}})();(function(l,m,b){function c(g,k){var n=k;if(typeof g!=="function")throw Error("First parameter should be function");if(typeof k==="undefined")throw Error("Second parameter should not be undefined");this.forEach(function(o){n=g(n,o)});return n}function f(){return this.replace(/(^\s+)|(\s+$)/g,"")}function j(g){return eval("("+g+")")}if(typeof m.reduce!=="function")m.reduce=c;if(typeof b.trim!=="function")b.trim=f;if(typeof l.JSON!=="object"){l.JSON={};l.JSON.parse=j}})(window,Array.prototype,String.prototype);(function(l,m,b){l.r.load=function(c,f){var j=0,g=c.length;c.forEach(function(k){var n=m.createElement("script");n.src=k;n.onload=function(){n.removeAttribute("onload");++j===g&&f()};b.appendChild(n)})}})(window,document,document.getElementsByTagName("head")[0]);(function(){function l(b){this.storage=b}function m(b){return m.sname||(m.sname=new l(window[b+"Storage"]))}l.prototype.set=function(b,c){if(typeof b==="number"||typeof b==="string")this.storage.setItem(b,JSON.stringify(c));else if(typeof c==="undefined")throw Error("typeof value is 'undefined'. Maybe you're doing something wrong");else throw Error("Given value as key is OK but seems not a good manner");};l.prototype.get=function(b){return typeof this.storage[b]==="undefined"?null:JSON.parse(this.storage.getItem(b))};
l.prototype.clear=function(){this.storage.clear()};l.prototype.size=function(){return this.storage.length};l.prototype.keys=function(){var b=[],c;for(c in this.storage)b.push(c);return b};l.prototype.values=function(){var b=[],c;for(c in this.storage)b.push(this.get(c));return b};r.storage=m})();r(function(){function l(c,f,j,g){var k=document.createEvent("MouseEvent");k.initMouseEvent(f,true,true,window,null,j,g);c.dispatchEvent(k)}var m=document.body,b={};r(m).bind("touchstart",function(c){b.x1=c.changedTouches[0].clientX;b.y1=c.changedTouches[0].clientY;b.position={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};b.target=c.changedTouches[0].target;b.startTime=Date.now()},true);r(m).bind("touchmove",function(c){var f;f=c.changedTouches[0].clientX-b.position.x;var j=c.changedTouches[0].clientY-
b.position.y,g;g=r(b.target).css("-webkit-transform").match(/matrix\(\d+, \d+, \d+, (-?\d+), (-?\d+), (-?\d+)\)/);g=g===null?{x:0,y:0,z:0}:{x:Number(g[1]),y:Number(g[2]),z:Number(g[3])};f={x:g.x+f,y:g.y+j};l(b.target,"drag",1.6*f.x,1.6*f.y);b.position.x=c.changedTouches[0].clientX;b.position.y=c.changedTouches[0].clientY;b.x2=c.changedTouches[0].clientX;b.y2=c.changedTouches[0].clientY;c.preventDefault()},true);r(m).bind("touchend",function(c){var f=b.x1-b.x2,j=b.y1-b.y2,g=Math.abs(f),k=Math.abs(j);
if(b.startTime&&Date.now()-b.startTime>1E3)b={};else{if(k>30&&k>g){c.preventDefault();j>=0?l(b.target,"swipeup",f,j):l(b.target,"swipedown",f,j)}else if(g>30&&g>k){c.preventDefault();f>=0?l(b.target,"swipeleft",f,j):l(b.target,"swiperight",f,j)}b={x1:0,x2:0,y1:0,y2:0,target:null}}},true);r(m).bind("touchcancel",function(){b={x1:0,x2:0,y1:0,y2:0,target:null}},true);["swipeleft","swiperight","swipeup","swipedown"].forEach(function(c){r.fn[c]=function(f,j){this.bind(c,f,j)}})});
